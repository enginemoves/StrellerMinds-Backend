2ecc4fdd7c1289bd11d4be33571aafe4
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", { value: true });
exports.CoursesAdvancesController = void 0;
const common_1 = require("@nestjs/common");
const create_courses_advance_dto_1 = require("../dto/create-courses-advance.dto");
const update_courses_advance_dto_1 = require("../dto/update-courses-advance.dto");
const courses_advances_service_1 = require("../services/courses-advances.service");
const roles_decorator_1 = require("src/role/roles.decorator");
const roles_guard_1 = require("src/role/roles.guard");
const roles_enum_1 = require("src/role/roles.enum");
let CoursesAdvancesController = class CoursesAdvancesController {
    constructor(coursesAdvancesService) {
        this.coursesAdvancesService = coursesAdvancesService;
    }
    create(createCourseDto, req) {
        return this.coursesAdvancesService.create(createCourseDto, req.user.id);
    }
    findAll(instructorId) {
        return this.coursesAdvancesService.findAll(instructorId);
    }
    search(query) {
        return this.coursesAdvancesService.searchCourses(query);
    }
    getPopular(limit) {
        return this.coursesAdvancesService.getPopularCourses(limit);
    }
    getByCategory(category) {
        return this.coursesAdvancesService.getCoursesByCategory(category);
    }
    findOne(id) {
        return this.coursesAdvancesService.findOne(id);
    }
    update(id, updateCourseDto, req) {
        return this.coursesAdvancesService.update(id, updateCourseDto, req.user.id);
    }
    remove(id, req) {
        return this.coursesAdvancesService.remove(id, req.user.id);
    }
};
exports.CoursesAdvancesController = CoursesAdvancesController;
__decorate([
    (0, common_1.Post)(),
    (0, common_1.UseGuards)(roles_guard_1.RolesGuard),
    (0, roles_decorator_1.Roles)(roles_enum_1.Role.Instructor),
    __param(0, (0, common_1.Body)()),
    __param(1, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof create_courses_advance_dto_1.CreateCoursesAdvanceDto !== "undefined" && create_courses_advance_dto_1.CreateCoursesAdvanceDto) === "function" ? _b : Object, Object]),
    __metadata("design:returntype", void 0)
], CoursesAdvancesController.prototype, "create", null);
__decorate([
    (0, common_1.Get)(),
    __param(0, (0, common_1.Query)('instructor')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", void 0)
], CoursesAdvancesController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)('search'),
    __param(0, (0, common_1.Query)('q')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", void 0)
], CoursesAdvancesController.prototype, "search", null);
__decorate([
    (0, common_1.Get)('popular'),
    __param(0, (0, common_1.Query)('limit')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Number]),
    __metadata("design:returntype", void 0)
], CoursesAdvancesController.prototype, "getPopular", null);
__decorate([
    (0, common_1.Get)('category/:category'),
    __param(0, (0, common_1.Param)('category')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", void 0)
], CoursesAdvancesController.prototype, "getByCategory", null);
__decorate([
    (0, common_1.Get)(':id'),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", void 0)
], CoursesAdvancesController.prototype, "findOne", null);
__decorate([
    (0, common_1.Patch)(':id'),
    (0, common_1.UseGuards)(roles_guard_1.RolesGuard),
    (0, roles_decorator_1.Roles)(roles_enum_1.Role.Instructor, roles_enum_1.Role.Admin),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __param(2, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_c = typeof update_courses_advance_dto_1.UpdateCoursesAdvanceDto !== "undefined" && update_courses_advance_dto_1.UpdateCoursesAdvanceDto) === "function" ? _c : Object, Object]),
    __metadata("design:returntype", void 0)
], CoursesAdvancesController.prototype, "update", null);
__decorate([
    (0, common_1.Delete)(':id'),
    (0, common_1.UseGuards)(roles_guard_1.RolesGuard),
    (0, roles_decorator_1.Roles)(roles_enum_1.Role.Instructor, roles_enum_1.Role.Admin),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", void 0)
], CoursesAdvancesController.prototype, "remove", null);
exports.CoursesAdvancesController = CoursesAdvancesController = __decorate([
    (0, common_1.Controller)('courses-advances'),
    __metadata("design:paramtypes", [typeof (_a = typeof courses_advances_service_1.CoursesAdvancesService !== "undefined" && courses_advances_service_1.CoursesAdvancesService) === "function" ? _a : Object])
], CoursesAdvancesController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxvam9zZXBoXFxEb2N1bWVudHNcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFxjb3Vyc2VzLWFkdmFuY2VzXFxjb250cm9sbGVyc1xcY291cnNlcy1hZHZhbmNlcy5jb250cm9sbGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSwyQ0FXd0I7QUFDeEIsa0ZBQTRFO0FBQzVFLGtGQUE0RTtBQUM1RSxtRkFBOEU7QUFDOUUsOERBQWlEO0FBQ2pELHNEQUFrRDtBQUNsRCxvREFBMkM7QUFHcEMsSUFBTSx5QkFBeUIsR0FBL0IsTUFBTSx5QkFBeUI7SUFDcEMsWUFDbUIsc0JBQThDO1FBQTlDLDJCQUFzQixHQUF0QixzQkFBc0IsQ0FBd0I7SUFDOUQsQ0FBQztJQUtKLE1BQU0sQ0FBUyxlQUF3QyxFQUFTLEdBQUc7UUFDakUsT0FBTyxJQUFJLENBQUMsc0JBQXNCLENBQUMsTUFBTSxDQUFDLGVBQWUsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzFFLENBQUM7SUFHRCxPQUFPLENBQXNCLFlBQXFCO1FBQ2hELE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUMzRCxDQUFDO0lBR0QsTUFBTSxDQUFhLEtBQWE7UUFDOUIsT0FBTyxJQUFJLENBQUMsc0JBQXNCLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFHRCxVQUFVLENBQWlCLEtBQWM7UUFDdkMsT0FBTyxJQUFJLENBQUMsc0JBQXNCLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDOUQsQ0FBQztJQUdELGFBQWEsQ0FBb0IsUUFBZ0I7UUFDL0MsT0FBTyxJQUFJLENBQUMsc0JBQXNCLENBQUMsb0JBQW9CLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDcEUsQ0FBQztJQUdELE9BQU8sQ0FBYyxFQUFVO1FBQzdCLE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBS0QsTUFBTSxDQUNTLEVBQVUsRUFDZixlQUF3QyxFQUN6QyxHQUFHO1FBRVYsT0FBTyxJQUFJLENBQUMsc0JBQXNCLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxlQUFlLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUM5RSxDQUFDO0lBS0QsTUFBTSxDQUFjLEVBQVUsRUFBUyxHQUFHO1FBQ3hDLE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUM3RCxDQUFDO0NBQ0YsQ0FBQTtBQXREWSw4REFBeUI7QUFRcEM7SUFIQyxJQUFBLGFBQUksR0FBRTtJQUNOLElBQUEsa0JBQVMsRUFBQyx3QkFBVSxDQUFDO0lBQ3JCLElBQUEsdUJBQUssRUFBQyxpQkFBSSxDQUFDLFVBQVUsQ0FBQztJQUNmLFdBQUEsSUFBQSxhQUFJLEdBQUUsQ0FBQTtJQUE0QyxXQUFBLElBQUEsWUFBRyxHQUFFLENBQUE7O3lEQUEvQixvREFBdUIsb0JBQXZCLG9EQUF1Qjs7dURBRXREO0FBR0Q7SUFEQyxJQUFBLFlBQUcsR0FBRTtJQUNHLFdBQUEsSUFBQSxjQUFLLEVBQUMsWUFBWSxDQUFDLENBQUE7Ozs7d0RBRTNCO0FBR0Q7SUFEQyxJQUFBLFlBQUcsRUFBQyxRQUFRLENBQUM7SUFDTixXQUFBLElBQUEsY0FBSyxFQUFDLEdBQUcsQ0FBQyxDQUFBOzs7O3VEQUVqQjtBQUdEO0lBREMsSUFBQSxZQUFHLEVBQUMsU0FBUyxDQUFDO0lBQ0gsV0FBQSxJQUFBLGNBQUssRUFBQyxPQUFPLENBQUMsQ0FBQTs7OzsyREFFekI7QUFHRDtJQURDLElBQUEsWUFBRyxFQUFDLG9CQUFvQixDQUFDO0lBQ1gsV0FBQSxJQUFBLGNBQUssRUFBQyxVQUFVLENBQUMsQ0FBQTs7Ozs4REFFL0I7QUFHRDtJQURDLElBQUEsWUFBRyxFQUFDLEtBQUssQ0FBQztJQUNGLFdBQUEsSUFBQSxjQUFLLEVBQUMsSUFBSSxDQUFDLENBQUE7Ozs7d0RBRW5CO0FBS0Q7SUFIQyxJQUFBLGNBQUssRUFBQyxLQUFLLENBQUM7SUFDWixJQUFBLGtCQUFTLEVBQUMsd0JBQVUsQ0FBQztJQUNyQixJQUFBLHVCQUFLLEVBQUMsaUJBQUksQ0FBQyxVQUFVLEVBQUUsaUJBQUksQ0FBQyxLQUFLLENBQUM7SUFFaEMsV0FBQSxJQUFBLGNBQUssRUFBQyxJQUFJLENBQUMsQ0FBQTtJQUNYLFdBQUEsSUFBQSxhQUFJLEdBQUUsQ0FBQTtJQUNOLFdBQUEsSUFBQSxZQUFHLEdBQUUsQ0FBQTs7aUVBRG1CLG9EQUF1QixvQkFBdkIsb0RBQXVCOzt1REFJakQ7QUFLRDtJQUhDLElBQUEsZUFBTSxFQUFDLEtBQUssQ0FBQztJQUNiLElBQUEsa0JBQVMsRUFBQyx3QkFBVSxDQUFDO0lBQ3JCLElBQUEsdUJBQUssRUFBQyxpQkFBSSxDQUFDLFVBQVUsRUFBRSxpQkFBSSxDQUFDLEtBQUssQ0FBQztJQUMzQixXQUFBLElBQUEsY0FBSyxFQUFDLElBQUksQ0FBQyxDQUFBO0lBQWMsV0FBQSxJQUFBLFlBQUcsR0FBRSxDQUFBOzs7O3VEQUVyQztvQ0FyRFUseUJBQXlCO0lBRHJDLElBQUEsbUJBQVUsRUFBQyxrQkFBa0IsQ0FBQzt5REFHYyxpREFBc0Isb0JBQXRCLGlEQUFzQjtHQUZ0RCx5QkFBeUIsQ0FzRHJDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcb2pvc2VwaFxcRG9jdW1lbnRzXFxTdHJlbGxlck1pbmRzLUJhY2tlbmRcXHNyY1xcY291cnNlcy1hZHZhbmNlc1xcY29udHJvbGxlcnNcXGNvdXJzZXMtYWR2YW5jZXMuY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbnRyb2xsZXIsXHJcbiAgR2V0LFxyXG4gIFBvc3QsXHJcbiAgQm9keSxcclxuICBQYXRjaCxcclxuICBQYXJhbSxcclxuICBEZWxldGUsXHJcbiAgUXVlcnksXHJcbiAgVXNlR3VhcmRzLFxyXG4gIFJlcSxcclxufSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XHJcbmltcG9ydCB7IENyZWF0ZUNvdXJzZXNBZHZhbmNlRHRvIH0gZnJvbSAnLi4vZHRvL2NyZWF0ZS1jb3Vyc2VzLWFkdmFuY2UuZHRvJztcclxuaW1wb3J0IHsgVXBkYXRlQ291cnNlc0FkdmFuY2VEdG8gfSBmcm9tICcuLi9kdG8vdXBkYXRlLWNvdXJzZXMtYWR2YW5jZS5kdG8nO1xyXG5pbXBvcnQgeyBDb3Vyc2VzQWR2YW5jZXNTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvY291cnNlcy1hZHZhbmNlcy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUm9sZXMgfSBmcm9tICdzcmMvcm9sZS9yb2xlcy5kZWNvcmF0b3InO1xyXG5pbXBvcnQgeyBSb2xlc0d1YXJkIH0gZnJvbSAnc3JjL3JvbGUvcm9sZXMuZ3VhcmQnO1xyXG5pbXBvcnQgeyBSb2xlIH0gZnJvbSAnc3JjL3JvbGUvcm9sZXMuZW51bSc7XHJcblxyXG5AQ29udHJvbGxlcignY291cnNlcy1hZHZhbmNlcycpXHJcbmV4cG9ydCBjbGFzcyBDb3Vyc2VzQWR2YW5jZXNDb250cm9sbGVyIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgY291cnNlc0FkdmFuY2VzU2VydmljZTogQ291cnNlc0FkdmFuY2VzU2VydmljZSxcclxuICApIHt9XHJcblxyXG4gIEBQb3N0KClcclxuICBAVXNlR3VhcmRzKFJvbGVzR3VhcmQpXHJcbiAgQFJvbGVzKFJvbGUuSW5zdHJ1Y3RvcilcclxuICBjcmVhdGUoQEJvZHkoKSBjcmVhdGVDb3Vyc2VEdG86IENyZWF0ZUNvdXJzZXNBZHZhbmNlRHRvLCBAUmVxKCkgcmVxKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb3Vyc2VzQWR2YW5jZXNTZXJ2aWNlLmNyZWF0ZShjcmVhdGVDb3Vyc2VEdG8sIHJlcS51c2VyLmlkKTtcclxuICB9XHJcblxyXG4gIEBHZXQoKVxyXG4gIGZpbmRBbGwoQFF1ZXJ5KCdpbnN0cnVjdG9yJykgaW5zdHJ1Y3RvcklkPzogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb3Vyc2VzQWR2YW5jZXNTZXJ2aWNlLmZpbmRBbGwoaW5zdHJ1Y3RvcklkKTtcclxuICB9XHJcblxyXG4gIEBHZXQoJ3NlYXJjaCcpXHJcbiAgc2VhcmNoKEBRdWVyeSgncScpIHF1ZXJ5OiBzdHJpbmcpIHtcclxuICAgIHJldHVybiB0aGlzLmNvdXJzZXNBZHZhbmNlc1NlcnZpY2Uuc2VhcmNoQ291cnNlcyhxdWVyeSk7XHJcbiAgfVxyXG5cclxuICBAR2V0KCdwb3B1bGFyJylcclxuICBnZXRQb3B1bGFyKEBRdWVyeSgnbGltaXQnKSBsaW1pdD86IG51bWJlcikge1xyXG4gICAgcmV0dXJuIHRoaXMuY291cnNlc0FkdmFuY2VzU2VydmljZS5nZXRQb3B1bGFyQ291cnNlcyhsaW1pdCk7XHJcbiAgfVxyXG5cclxuICBAR2V0KCdjYXRlZ29yeS86Y2F0ZWdvcnknKVxyXG4gIGdldEJ5Q2F0ZWdvcnkoQFBhcmFtKCdjYXRlZ29yeScpIGNhdGVnb3J5OiBzdHJpbmcpIHtcclxuICAgIHJldHVybiB0aGlzLmNvdXJzZXNBZHZhbmNlc1NlcnZpY2UuZ2V0Q291cnNlc0J5Q2F0ZWdvcnkoY2F0ZWdvcnkpO1xyXG4gIH1cclxuXHJcbiAgQEdldCgnOmlkJylcclxuICBmaW5kT25lKEBQYXJhbSgnaWQnKSBpZDogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb3Vyc2VzQWR2YW5jZXNTZXJ2aWNlLmZpbmRPbmUoaWQpO1xyXG4gIH1cclxuXHJcbiAgQFBhdGNoKCc6aWQnKVxyXG4gIEBVc2VHdWFyZHMoUm9sZXNHdWFyZClcclxuICBAUm9sZXMoUm9sZS5JbnN0cnVjdG9yLCBSb2xlLkFkbWluKVxyXG4gIHVwZGF0ZShcclxuICAgIEBQYXJhbSgnaWQnKSBpZDogc3RyaW5nLFxyXG4gICAgQEJvZHkoKSB1cGRhdGVDb3Vyc2VEdG86IFVwZGF0ZUNvdXJzZXNBZHZhbmNlRHRvLFxyXG4gICAgQFJlcSgpIHJlcSxcclxuICApIHtcclxuICAgIHJldHVybiB0aGlzLmNvdXJzZXNBZHZhbmNlc1NlcnZpY2UudXBkYXRlKGlkLCB1cGRhdGVDb3Vyc2VEdG8sIHJlcS51c2VyLmlkKTtcclxuICB9XHJcblxyXG4gIEBEZWxldGUoJzppZCcpXHJcbiAgQFVzZUd1YXJkcyhSb2xlc0d1YXJkKVxyXG4gIEBSb2xlcyhSb2xlLkluc3RydWN0b3IsIFJvbGUuQWRtaW4pXHJcbiAgcmVtb3ZlKEBQYXJhbSgnaWQnKSBpZDogc3RyaW5nLCBAUmVxKCkgcmVxKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb3Vyc2VzQWR2YW5jZXNTZXJ2aWNlLnJlbW92ZShpZCwgcmVxLnVzZXIuaWQpO1xyXG4gIH1cclxufVxyXG4iXSwidmVyc2lvbiI6M30=