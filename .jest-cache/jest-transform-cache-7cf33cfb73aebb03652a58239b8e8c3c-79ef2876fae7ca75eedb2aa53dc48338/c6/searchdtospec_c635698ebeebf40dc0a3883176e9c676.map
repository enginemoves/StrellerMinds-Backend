{"file":"C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\search\\dto\\search.dto.spec.ts","mappings":"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","names":[],"sources":["C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\search\\dto\\search.dto.spec.ts"],"sourcesContent":["import { validate } from \"class-validator\"\r\nimport { plainToClass } from \"class-transformer\"\r\nimport { SearchDto } from \"./search.dto\"\r\nimport { AdvancedFilterDto } from \"./advanced-filter.dto\"\r\nimport { SearchSuggestionDto } from \"./search-suggestion.dto\"\r\n\r\ndescribe(\"Search DTOs\", () => {\r\n  describe(\"SearchDto\", () => {\r\n    it(\"should validate a valid search DTO\", async () => {\r\n      const dto = plainToClass(SearchDto, {\r\n        query: \"stellar blockchain\",\r\n        page: 1,\r\n        limit: 10,\r\n      })\r\n\r\n      const errors = await validate(dto)\r\n      expect(errors).toHaveLength(0)\r\n    })\r\n\r\n    it(\"should fail validation for empty query\", async () => {\r\n      const dto = plainToClass(SearchDto, {\r\n        query: \"\",\r\n        page: 1,\r\n        limit: 10,\r\n      })\r\n\r\n      const errors = await validate(dto)\r\n      expect(errors).toHaveLength(1)\r\n      expect(errors[0].property).toBe(\"query\")\r\n    })\r\n\r\n    it(\"should fail validation for invalid page number\", async () => {\r\n      const dto = plainToClass(SearchDto, {\r\n        query: \"stellar\",\r\n        page: 0,\r\n        limit: 10,\r\n      })\r\n\r\n      const errors = await validate(dto)\r\n      expect(errors).toHaveLength(1)\r\n      expect(errors[0].property).toBe(\"page\")\r\n    })\r\n\r\n    it(\"should fail validation for invalid limit\", async () => {\r\n      const dto = plainToClass(SearchDto, {\r\n        query: \"stellar\",\r\n        page: 1,\r\n        limit: 101,\r\n      })\r\n\r\n      const errors = await validate(dto)\r\n      expect(errors).toHaveLength(1)\r\n      expect(errors[0].property).toBe(\"limit\")\r\n    })\r\n\r\n    it(\"should use default values when not provided\", () => {\r\n      const dto = plainToClass(SearchDto, {\r\n        query: \"stellar\",\r\n      })\r\n\r\n      expect(dto.page).toBe(1)\r\n      expect(dto.limit).toBe(10)\r\n    })\r\n  })\r\n\r\n  describe(\"AdvancedFilterDto\", () => {\r\n    it(\"should validate a valid advanced filter DTO\", async () => {\r\n      const dto = plainToClass(AdvancedFilterDto, {\r\n        query: \"stellar\",\r\n        categories: [\"blockchain\", \"development\"],\r\n        levels: [\"beginner\", \"intermediate\"],\r\n        priceRange: { min: 0, max: 200 },\r\n        durationRange: { min: 60, max: 300 },\r\n        instructors: [\"John Doe\"],\r\n        tags: [\"stellar\", \"blockchain\"],\r\n        sortBy: \"relevance\",\r\n        sortOrder: \"desc\",\r\n        page: 1,\r\n        limit: 10,\r\n      })\r\n\r\n      const errors = await validate(dto)\r\n      expect(errors).toHaveLength(0)\r\n    })\r\n\r\n    it(\"should validate price range\", async () => {\r\n      const dto = plainToClass(AdvancedFilterDto, {\r\n        query: \"stellar\",\r\n        priceRange: { min: 100, max: 50 }, // Invalid: min > max\r\n      })\r\n\r\n      const errors = await validate(dto)\r\n      expect(errors.length).toBeGreaterThan(0)\r\n    })\r\n\r\n    it(\"should validate duration range\", async () => {\r\n      const dto = plainToClass(AdvancedFilterDto, {\r\n        query: \"stellar\",\r\n        durationRange: { min: 300, max: 100 }, // Invalid: min > max\r\n      })\r\n\r\n      const errors = await validate(dto)\r\n      expect(errors.length).toBeGreaterThan(0)\r\n    })\r\n\r\n    it(\"should validate sort options\", async () => {\r\n      const dto = plainToClass(AdvancedFilterDto, {\r\n        query: \"stellar\",\r\n        sortBy: \"invalid_sort\",\r\n        sortOrder: \"invalid_order\",\r\n      })\r\n\r\n      const errors = await validate(dto)\r\n      expect(errors.length).toBeGreaterThan(0)\r\n    })\r\n  })\r\n\r\n  describe(\"SearchSuggestionDto\", () => {\r\n    it(\"should validate a valid suggestion DTO\", async () => {\r\n      const dto = plainToClass(SearchSuggestionDto, {\r\n        query: \"stel\",\r\n        limit: 5,\r\n      })\r\n\r\n      const errors = await validate(dto)\r\n      expect(errors).toHaveLength(0)\r\n    })\r\n\r\n    it(\"should fail validation for short query\", async () => {\r\n      const dto = plainToClass(SearchSuggestionDto, {\r\n        query: \"a\",\r\n        limit: 5,\r\n      })\r\n\r\n      const errors = await validate(dto)\r\n      expect(errors).toHaveLength(1)\r\n      expect(errors[0].property).toBe(\"query\")\r\n    })\r\n\r\n    it(\"should fail validation for excessive limit\", async () => {\r\n      const dto = plainToClass(SearchSuggestionDto, {\r\n        query: \"stellar\",\r\n        limit: 21,\r\n      })\r\n\r\n      const errors = await validate(dto)\r\n      expect(errors).toHaveLength(1)\r\n      expect(errors[0].property).toBe(\"limit\")\r\n    })\r\n\r\n    it(\"should use default limit when not provided\", () => {\r\n      const dto = plainToClass(SearchSuggestionDto, {\r\n        query: \"stellar\",\r\n      })\r\n\r\n      expect(dto.limit).toBe(10)\r\n    })\r\n  })\r\n})\r\n"],"version":3}