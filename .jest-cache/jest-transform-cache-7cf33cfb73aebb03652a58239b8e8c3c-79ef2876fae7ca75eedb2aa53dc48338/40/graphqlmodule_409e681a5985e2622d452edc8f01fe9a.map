{"file":"C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\graphql\\graphql.module.ts","mappings":";;;;;;;;;AAAA,2CAAuC;AACvC,6CAA+C;AAC/C,2CAAsE;AACtE,+BAA2B;AAE3B,4DAAuD;AACvD,4DAAuD;AACvD,2EAAsE;AACtE,4DAAuD;AAGvD,mEAAqE;AACrE,6DAA+D;AAC/D,yDAA2D;AAqDpD,IAAM,gBAAgB,GAAtB,MAAM,gBAAgB;CAAG,CAAA;AAAnB,4CAAgB;2BAAhB,gBAAgB;IAnD5B,IAAA,eAAM,EAAC;QACN,OAAO,EAAE;YACP,uBAAa,CAAC,OAAO,CAAqB;gBACxC,MAAM,EAAE,qBAAY;gBACpB,cAAc,EAAE,IAAA,WAAI,EAAC,OAAO,CAAC,GAAG,EAAE,EAAE,wBAAwB,CAAC;gBAC7D,UAAU,EAAE,IAAI;gBAChB,UAAU,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY;gBACjD,aAAa,EAAE,IAAI;gBACnB,aAAa,EAAE;oBACb,YAAY,EAAE,IAAI;oBAClB,4BAA4B,EAAE,IAAI;iBACnC;gBACD,OAAO,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,UAAU,EAAE,KAAK,EAAE,EAAkB,EAAE;oBAC3D,IAAI,UAAU,EAAE,CAAC;wBACf,yCAAyC;wBACzC,OAAO;4BACL,GAAG,EAAE,UAAU,CAAC,OAAO,CAAC,GAAG;4BAC3B,GAAG,EAAE,UAAU,CAAC,OAAO,CAAC,GAAG;4BAC3B,IAAI,EAAE,UAAU,CAAC,OAAO,CAAC,IAAI;4BAC7B,WAAW,EAAE,EAAE;yBAChB,CAAA;oBACH,CAAC;oBACD,eAAe;oBACf,OAAO;wBACL,GAAG;wBACH,GAAG;wBACH,IAAI,EAAE,GAAG,CAAC,IAAI;wBACd,WAAW,EAAE,EAAE;qBAChB,CAAA;gBACH,CAAC;gBACD,WAAW,EAAE,CAAC,KAAK,EAAE,EAAE;oBACrB,OAAO,CAAC,KAAK,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAA;oBACtC,OAAO;wBACL,OAAO,EAAE,KAAK,CAAC,OAAO;wBACtB,IAAI,EAAE,KAAK,CAAC,UAAU,EAAE,IAAI;wBAC5B,IAAI,EAAE,KAAK,CAAC,IAAI;wBAChB,SAAS,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE;qBACpC,CAAA;gBACH,CAAC;gBACD,OAAO,EAAE,CAAC,IAAI,2CAAuB,EAAE,EAAE,IAAI,qCAAoB,EAAE,EAAE,IAAI,iCAAkB,EAAE,CAAC;gBAC9F,IAAI,EAAE;oBACJ,MAAM,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW,IAAI,GAAG;oBACtC,WAAW,EAAE,IAAI;iBAClB;aACF,CAAC;YACF,wBAAU;YACV,wBAAU;YACV,kCAAe;YACf,wBAAU;SACX;KACF,CAAC;GACW,gBAAgB,CAAG","names":[],"sources":["C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\graphql\\graphql.module.ts"],"sourcesContent":["import { Module } from \"@nestjs/common\"\r\nimport { GraphQLModule } from \"@nestjs/graphql\"\r\nimport { ApolloDriver, type ApolloDriverConfig } from \"@nestjs/apollo\"\r\nimport { join } from \"path\"\r\n\r\nimport { UserModule } from \"./modules/user/user.module\"\r\nimport { PostModule } from \"./modules/post/post.module\"\r\nimport { AnalyticsModule } from \"./modules/analytics/analytics.module\"\r\nimport { AuthModule } from \"./modules/auth/auth.module\"\r\n\r\nimport type { GraphQLContext } from \"./types/context.type\"\r\nimport { GraphQLComplexityPlugin } from \"./plugins/complexity.plugin\"\r\nimport { GraphQLLoggingPlugin } from \"./plugins/logging.plugin\"\r\nimport { GraphQLCachePlugin } from \"./plugins/cache.plugin\"\r\n\r\n@Module({\r\n  imports: [\r\n    GraphQLModule.forRoot<ApolloDriverConfig>({\r\n      driver: ApolloDriver,\r\n      autoSchemaFile: join(process.cwd(), \"src/graphql/schema.gql\"),\r\n      sortSchema: true,\r\n      playground: process.env.NODE_ENV !== \"production\",\r\n      introspection: true,\r\n      subscriptions: {\r\n        \"graphql-ws\": true,\r\n        \"subscriptions-transport-ws\": true,\r\n      },\r\n      context: ({ req, res, connection, extra }): GraphQLContext => {\r\n        if (connection) {\r\n          // WebSocket connection for subscriptions\r\n          return {\r\n            req: connection.context.req,\r\n            res: connection.context.res,\r\n            user: connection.context.user,\r\n            dataSources: {},\r\n          }\r\n        }\r\n        // HTTP request\r\n        return {\r\n          req,\r\n          res,\r\n          user: req.user,\r\n          dataSources: {},\r\n        }\r\n      },\r\n      formatError: (error) => {\r\n        console.error(\"GraphQL Error:\", error)\r\n        return {\r\n          message: error.message,\r\n          code: error.extensions?.code,\r\n          path: error.path,\r\n          timestamp: new Date().toISOString(),\r\n        }\r\n      },\r\n      plugins: [new GraphQLComplexityPlugin(), new GraphQLLoggingPlugin(), new GraphQLCachePlugin()],\r\n      cors: {\r\n        origin: process.env.CORS_ORIGIN || \"*\",\r\n        credentials: true,\r\n      },\r\n    }),\r\n    UserModule,\r\n    PostModule,\r\n    AnalyticsModule,\r\n    AuthModule,\r\n  ],\r\n})\r\nexport class GraphQLApiModule {}\r\n"],"version":3}