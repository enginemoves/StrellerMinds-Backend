2ab50186b54d3408074bab31c2aa1b5d
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", { value: true });
exports.AdminUsersController = void 0;
const common_1 = require("@nestjs/common");
const swagger_1 = require("@nestjs/swagger");
const users_service_1 = require("./services/users.service");
const create_users_dto_1 = require("./dtos/create.users.dto");
const update_users_dto_1 = require("./dtos/update.users.dto");
const roles_decorator_1 = require("../role/roles.decorator");
const roles_guard_1 = require("../role/roles.guard");
const roles_enum_1 = require("../role/roles.enum");
const audit_log_service_1 = require("../audit/services/audit.log.service");
const userRole_enum_1 = require("./enums/userRole.enum");
const accountStatus_enum_1 = require("./enums/accountStatus.enum");
/**
 * AdminUsersController handles admin-level user management operations.
 */
let AdminUsersController = class AdminUsersController {
    constructor(usersService, auditLogService) {
        this.usersService = usersService;
        this.auditLogService = auditLogService;
    }
    /**
     * Create a new user (admin only)
     * @param dto User creation data
     * @param adminId ID of the admin performing the action
     * @returns Created user data
     */
    async create(dto, adminId) {
        const user = await this.usersService.create(dto);
        await this.auditLogService.createLog({
            action: 'CREATE_USER',
            entityType: 'User',
            entityId: user.id,
            performedBy: adminId,
            details: { created: true },
        });
        return user;
    }
    /**
     * Get all users
     * @returns List of users
     */
    async findAll() {
        return this.usersService.findAll();
    }
    /**
     * Get user by ID
     * @param id User ID
     * @returns User data
     */
    async findOne(id) {
        return this.usersService.findOne(id);
    }
    /**
     * Update user by ID
     * @param id User ID
     * @param dto User update data
     * @param adminId ID of the admin performing the action
     * @returns Updated user data
     */
    async update(id, dto, adminId) {
        const user = await this.usersService.update(id, dto);
        await this.auditLogService.createLog({
            action: 'UPDATE_USER',
            entityType: 'User',
            entityId: id,
            performedBy: adminId,
            details: { updated: true },
        });
        return user;
    }
    /**
     * Delete user by ID
     * @param id User ID
     * @param adminId ID of the admin performing the action
     */
    async delete(id, adminId) {
        await this.usersService.delete(id);
        await this.auditLogService.createLog({
            action: 'DELETE_USER',
            entityType: 'User',
            entityId: id,
            performedBy: adminId,
            details: { deleted: true },
        });
        return;
    }
    /**
     * Update user role
     * @param id User ID
     * @param role New role for the user
     * @param adminId ID of the admin performing the action
     * @returns Updated user data
     */
    async updateRole(id, role, adminId) {
        const user = await this.usersService.update(id, { role });
        await this.auditLogService.createLog({
            action: 'UPDATE_ROLE',
            entityType: 'User',
            entityId: id,
            performedBy: adminId,
            details: { newRole: role },
        });
        return user;
    }
    /**
     * Update user account status
     * @param id User ID
     * @param status New status for the user
     * @param adminId ID of the admin performing the action
     * @returns Updated user data
     */
    async updateStatus(id, status, adminId) {
        const user = await this.usersService.update(id, { status });
        await this.auditLogService.createLog({
            action: 'UPDATE_STATUS',
            entityType: 'User',
            entityId: id,
            performedBy: adminId,
            details: { newStatus: status },
        });
        return user;
    }
    /**
     * Get user analytics
     * @param id User ID
     * @returns User analytics data
     */
    async getUserAnalytics(id) {
        // This should call analyticsService for user-specific analytics
        // Placeholder: return basic info for now
        return { message: 'User analytics endpoint (to be implemented)' };
    }
};
exports.AdminUsersController = AdminUsersController;
__decorate([
    (0, swagger_1.ApiOperation)({ summary: 'Create a new user (admin only)' }),
    (0, swagger_1.ApiBody)({ type: create_users_dto_1.CreateUsersDto }),
    (0, swagger_1.ApiResponse)({ status: 201, description: 'User created.' }),
    (0, common_1.Post)(),
    __param(0, (0, common_1.Body)()),
    __param(1, (0, common_1.Body)('adminId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_c = typeof create_users_dto_1.CreateUsersDto !== "undefined" && create_users_dto_1.CreateUsersDto) === "function" ? _c : Object, String]),
    __metadata("design:returntype", Promise)
], AdminUsersController.prototype, "create", null);
__decorate([
    (0, swagger_1.ApiOperation)({ summary: 'Get all users' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'List of users.' }),
    (0, common_1.Get)(),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], AdminUsersController.prototype, "findAll", null);
__decorate([
    (0, swagger_1.ApiOperation)({ summary: 'Get user by ID' }),
    (0, swagger_1.ApiParam)({ name: 'id', type: 'string', description: 'User ID' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'User found.' }),
    (0, common_1.Get)(':id'),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], AdminUsersController.prototype, "findOne", null);
__decorate([
    (0, swagger_1.ApiOperation)({ summary: 'Update user by ID' }),
    (0, swagger_1.ApiParam)({ name: 'id', type: 'string', description: 'User ID' }),
    (0, swagger_1.ApiBody)({ type: update_users_dto_1.updateUsersDto }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'User updated.' }),
    (0, common_1.Patch)(':id'),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __param(1, (0, common_1.Body)()),
    __param(2, (0, common_1.Body)('adminId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_d = typeof update_users_dto_1.updateUsersDto !== "undefined" && update_users_dto_1.updateUsersDto) === "function" ? _d : Object, String]),
    __metadata("design:returntype", Promise)
], AdminUsersController.prototype, "update", null);
__decorate([
    (0, swagger_1.ApiOperation)({ summary: 'Delete user by ID' }),
    (0, swagger_1.ApiParam)({ name: 'id', type: 'string', description: 'User ID' }),
    (0, swagger_1.ApiResponse)({ status: 204, description: 'User deleted.' }),
    (0, common_1.Delete)(':id'),
    (0, common_1.HttpCode)(common_1.HttpStatus.NO_CONTENT),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __param(1, (0, common_1.Body)('adminId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, String]),
    __metadata("design:returntype", Promise)
], AdminUsersController.prototype, "delete", null);
__decorate([
    (0, swagger_1.ApiOperation)({ summary: 'Update user role' }),
    (0, swagger_1.ApiParam)({ name: 'id', type: 'string', description: 'User ID' }),
    (0, swagger_1.ApiBody)({ schema: { properties: { role: { type: 'string', enum: userRole_enum_1.UserRole }, adminId: { type: 'string' } } } }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'User role updated.' }),
    (0, common_1.Patch)(':id/role'),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __param(1, (0, common_1.Body)('role')),
    __param(2, (0, common_1.Body)('adminId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_e = typeof userRole_enum_1.UserRole !== "undefined" && userRole_enum_1.UserRole) === "function" ? _e : Object, String]),
    __metadata("design:returntype", Promise)
], AdminUsersController.prototype, "updateRole", null);
__decorate([
    (0, swagger_1.ApiOperation)({ summary: 'Update user account status' }),
    (0, swagger_1.ApiParam)({ name: 'id', type: 'string', description: 'User ID' }),
    (0, swagger_1.ApiBody)({ schema: { properties: { status: { type: 'string', enum: accountStatus_enum_1.AccountStatus }, adminId: { type: 'string' } } } }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'User status updated.' }),
    (0, common_1.Patch)(':id/status'),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __param(1, (0, common_1.Body)('status')),
    __param(2, (0, common_1.Body)('adminId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_f = typeof accountStatus_enum_1.AccountStatus !== "undefined" && accountStatus_enum_1.AccountStatus) === "function" ? _f : Object, String]),
    __metadata("design:returntype", Promise)
], AdminUsersController.prototype, "updateStatus", null);
__decorate([
    (0, swagger_1.ApiOperation)({ summary: 'Get user analytics' }),
    (0, swagger_1.ApiParam)({ name: 'id', type: 'string', description: 'User ID' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'User analytics.' }),
    (0, common_1.Get)(':id/analytics'),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], AdminUsersController.prototype, "getUserAnalytics", null);
exports.AdminUsersController = AdminUsersController = __decorate([
    (0, swagger_1.ApiTags)('Admin Users'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Controller)('admin/users'),
    (0, common_1.UseGuards)(roles_guard_1.RolesGuard),
    (0, roles_decorator_1.Roles)(roles_enum_1.Role.Admin),
    __metadata("design:paramtypes", [typeof (_a = typeof users_service_1.UsersService !== "undefined" && users_service_1.UsersService) === "function" ? _a : Object, typeof (_b = typeof audit_log_service_1.AuditLogService !== "undefined" && audit_log_service_1.AuditLogService) === "function" ? _b : Object])
], AdminUsersController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxvam9zZXBoXFxEb2N1bWVudHNcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFx1c2Vyc1xcYWRtaW4udXNlcnMuY29udHJvbGxlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsMkNBQW1JO0FBQ25JLDZDQUF1RztBQUN2Ryw0REFBd0Q7QUFDeEQsOERBQXlEO0FBQ3pELDhEQUF5RDtBQUN6RCw2REFBZ0Q7QUFDaEQscURBQWlEO0FBQ2pELG1EQUEwQztBQUMxQywyRUFBc0U7QUFDdEUseURBQWlEO0FBQ2pELG1FQUEyRDtBQUUzRDs7R0FFRztBQU1JLElBQU0sb0JBQW9CLEdBQTFCLE1BQU0sb0JBQW9CO0lBQy9CLFlBQ21CLFlBQTBCLEVBQzFCLGVBQWdDO1FBRGhDLGlCQUFZLEdBQVosWUFBWSxDQUFjO1FBQzFCLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtJQUNoRCxDQUFDO0lBRUo7Ozs7O09BS0c7SUFLRyxBQUFOLEtBQUssQ0FBQyxNQUFNLENBQVMsR0FBbUIsRUFBbUIsT0FBZTtRQUN4RSxNQUFNLElBQUksR0FBRyxNQUFNLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2pELE1BQU0sSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUM7WUFDbkMsTUFBTSxFQUFFLGFBQWE7WUFDckIsVUFBVSxFQUFFLE1BQU07WUFDbEIsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFO1lBQ2pCLFdBQVcsRUFBRSxPQUFPO1lBQ3BCLE9BQU8sRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUU7U0FDM0IsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQ7OztPQUdHO0lBSUcsQUFBTixLQUFLLENBQUMsT0FBTztRQUNYLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNyQyxDQUFDO0lBRUQ7Ozs7T0FJRztJQUtHLEFBQU4sS0FBSyxDQUFDLE9BQU8s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SkwsSUFBQSxzQkFBWSxFQUFDLEVBQUUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLENBQUM7SUFDL0MsSUFBQSxrQkFBUSxFQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsQ0FBQztJQUNoRSxJQUFBLHFCQUFXLEVBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxpQkFBaUIsRUFBRSxDQUFDO0lBQzVELElBQUEsWUFBRyxFQUFDLGVBQWUsQ0FBQztJQUNHLFdBQUEsSUFBQSxjQUFLLEVBQUMsSUFBSSxFQUFFLHNCQUFhLENBQUMsQ0FBQTs7Ozs0REFJakQ7K0JBdktVLG9CQUFvQjtJQUxoQyxJQUFBLGlCQUFPLEVBQUMsYUFBYSxDQUFDO0lBQ3RCLElBQUEsdUJBQWEsR0FBRTtJQUNmLElBQUEsbUJBQVUsRUFBQyxhQUFhLENBQUM7SUFDekIsSUFBQSxrQkFBUyxFQUFDLHdCQUFVLENBQUM7SUFDckIsSUFBQSx1QkFBSyxFQUFDLGlCQUFJLENBQUMsS0FBSyxDQUFDO3lEQUdpQiw0QkFBWSxvQkFBWiw0QkFBWSxvREFDVCxtQ0FBZSxvQkFBZixtQ0FBZTtHQUh4QyxvQkFBb0IsQ0F3S2hDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcb2pvc2VwaFxcRG9jdW1lbnRzXFxTdHJlbGxlck1pbmRzLUJhY2tlbmRcXHNyY1xcdXNlcnNcXGFkbWluLnVzZXJzLmNvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29udHJvbGxlciwgR2V0LCBQb3N0LCBQYXRjaCwgRGVsZXRlLCBQYXJhbSwgQm9keSwgVXNlR3VhcmRzLCBQYXJzZVVVSURQaXBlLCBIdHRwQ29kZSwgSHR0cFN0YXR1cyB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcclxuaW1wb3J0IHsgQXBpVGFncywgQXBpQmVhcmVyQXV0aCwgQXBpT3BlcmF0aW9uLCBBcGlSZXNwb25zZSwgQXBpUGFyYW0sIEFwaUJvZHkgfSBmcm9tICdAbmVzdGpzL3N3YWdnZXInO1xyXG5pbXBvcnQgeyBVc2Vyc1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3VzZXJzLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDcmVhdGVVc2Vyc0R0byB9IGZyb20gJy4vZHRvcy9jcmVhdGUudXNlcnMuZHRvJztcclxuaW1wb3J0IHsgdXBkYXRlVXNlcnNEdG8gfSBmcm9tICcuL2R0b3MvdXBkYXRlLnVzZXJzLmR0byc7XHJcbmltcG9ydCB7IFJvbGVzIH0gZnJvbSAnLi4vcm9sZS9yb2xlcy5kZWNvcmF0b3InO1xyXG5pbXBvcnQgeyBSb2xlc0d1YXJkIH0gZnJvbSAnLi4vcm9sZS9yb2xlcy5ndWFyZCc7XHJcbmltcG9ydCB7IFJvbGUgfSBmcm9tICcuLi9yb2xlL3JvbGVzLmVudW0nO1xyXG5pbXBvcnQgeyBBdWRpdExvZ1NlcnZpY2UgfSBmcm9tICcuLi9hdWRpdC9zZXJ2aWNlcy9hdWRpdC5sb2cuc2VydmljZSc7XHJcbmltcG9ydCB7IFVzZXJSb2xlIH0gZnJvbSAnLi9lbnVtcy91c2VyUm9sZS5lbnVtJztcclxuaW1wb3J0IHsgQWNjb3VudFN0YXR1cyB9IGZyb20gJy4vZW51bXMvYWNjb3VudFN0YXR1cy5lbnVtJztcclxuXHJcbi8qKlxyXG4gKiBBZG1pblVzZXJzQ29udHJvbGxlciBoYW5kbGVzIGFkbWluLWxldmVsIHVzZXIgbWFuYWdlbWVudCBvcGVyYXRpb25zLlxyXG4gKi9cclxuQEFwaVRhZ3MoJ0FkbWluIFVzZXJzJylcclxuQEFwaUJlYXJlckF1dGgoKVxyXG5AQ29udHJvbGxlcignYWRtaW4vdXNlcnMnKVxyXG5AVXNlR3VhcmRzKFJvbGVzR3VhcmQpXHJcbkBSb2xlcyhSb2xlLkFkbWluKVxyXG5leHBvcnQgY2xhc3MgQWRtaW5Vc2Vyc0NvbnRyb2xsZXIge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSByZWFkb25seSB1c2Vyc1NlcnZpY2U6IFVzZXJzU2VydmljZSxcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgYXVkaXRMb2dTZXJ2aWNlOiBBdWRpdExvZ1NlcnZpY2UsXHJcbiAgKSB7fVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBuZXcgdXNlciAoYWRtaW4gb25seSlcclxuICAgKiBAcGFyYW0gZHRvIFVzZXIgY3JlYXRpb24gZGF0YVxyXG4gICAqIEBwYXJhbSBhZG1pbklkIElEIG9mIHRoZSBhZG1pbiBwZXJmb3JtaW5nIHRoZSBhY3Rpb25cclxuICAgKiBAcmV0dXJucyBDcmVhdGVkIHVzZXIgZGF0YVxyXG4gICAqL1xyXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnQ3JlYXRlIGEgbmV3IHVzZXIgKGFkbWluIG9ubHkpJyB9KVxyXG4gIEBBcGlCb2R5KHsgdHlwZTogQ3JlYXRlVXNlcnNEdG8gfSlcclxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDIwMSwgZGVzY3JpcHRpb246ICdVc2VyIGNyZWF0ZWQuJyB9KVxyXG4gIEBQb3N0KClcclxuICBhc3luYyBjcmVhdGUoQEJvZHkoKSBkdG86IENyZWF0ZVVzZXJzRHRvLCBAQm9keSgnYWRtaW5JZCcpIGFkbWluSWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMudXNlcnNTZXJ2aWNlLmNyZWF0ZShkdG8pO1xyXG4gICAgYXdhaXQgdGhpcy5hdWRpdExvZ1NlcnZpY2UuY3JlYXRlTG9nKHtcclxuICAgICAgYWN0aW9uOiAnQ1JFQVRFX1VTRVInLFxyXG4gICAgICBlbnRpdHlUeXBlOiAnVXNlcicsXHJcbiAgICAgIGVudGl0eUlkOiB1c2VyLmlkLFxyXG4gICAgICBwZXJmb3JtZWRCeTogYWRtaW5JZCxcclxuICAgICAgZGV0YWlsczogeyBjcmVhdGVkOiB0cnVlIH0sXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB1c2VyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFsbCB1c2Vyc1xyXG4gICAqIEByZXR1cm5zIExpc3Qgb2YgdXNlcnNcclxuICAgKi9cclxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0dldCBhbGwgdXNlcnMnIH0pXHJcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiAyMDAsIGRlc2NyaXB0aW9uOiAnTGlzdCBvZiB1c2Vycy4nIH0pXHJcbiAgQEdldCgpXHJcbiAgYXN5bmMgZmluZEFsbCgpIHtcclxuICAgIHJldHVybiB0aGlzLnVzZXJzU2VydmljZS5maW5kQWxsKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdXNlciBieSBJRFxyXG4gICAqIEBwYXJhbSBpZCBVc2VyIElEXHJcbiAgICogQHJldHVybnMgVXNlciBkYXRhXHJcbiAgICovXHJcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdHZXQgdXNlciBieSBJRCcgfSlcclxuICBAQXBpUGFyYW0oeyBuYW1lOiAnaWQnLCB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdVc2VyIElEJyB9KVxyXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogMjAwLCBkZXNjcmlwdGlvbjogJ1VzZXIgZm91bmQuJyB9KVxyXG4gIEBHZXQoJzppZCcpXHJcbiAgYXN5bmMgZmluZE9uZShAUGFyYW0oJ2lkJywgUGFyc2VVVUlEUGlwZSkgaWQ6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIHRoaXMudXNlcnNTZXJ2aWNlLmZpbmRPbmUoaWQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIHVzZXIgYnkgSURcclxuICAgKiBAcGFyYW0gaWQgVXNlciBJRFxyXG4gICAqIEBwYXJhbSBkdG8gVXNlciB1cGRhdGUgZGF0YVxyXG4gICAqIEBwYXJhbSBhZG1pbklkIElEIG9mIHRoZSBhZG1pbiBwZXJmb3JtaW5nIHRoZSBhY3Rpb25cclxuICAgKiBAcmV0dXJucyBVcGRhdGVkIHVzZXIgZGF0YVxyXG4gICAqL1xyXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnVXBkYXRlIHVzZXIgYnkgSUQnIH0pXHJcbiAgQEFwaVBhcmFtKHsgbmFtZTogJ2lkJywgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnVXNlciBJRCcgfSlcclxuICBAQXBpQm9keSh7IHR5cGU6IHVwZGF0ZVVzZXJzRHRvIH0pXHJcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiAyMDAsIGRlc2NyaXB0aW9uOiAnVXNlciB1cGRhdGVkLicgfSlcclxuICBAUGF0Y2goJzppZCcpXHJcbiAgYXN5bmMgdXBkYXRlKEBQYXJhbSgnaWQnLCBQYXJzZVVVSURQaXBlKSBpZDogc3RyaW5nLCBAQm9keSgpIGR0bzogdXBkYXRlVXNlcnNEdG8sIEBCb2R5KCdhZG1pbklkJykgYWRtaW5JZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy51c2Vyc1NlcnZpY2UudXBkYXRlKGlkLCBkdG8pO1xyXG4gICAgYXdhaXQgdGhpcy5hdWRpdExvZ1NlcnZpY2UuY3JlYXRlTG9nKHtcclxuICAgICAgYWN0aW9uOiAnVVBEQVRFX1VTRVInLFxyXG4gICAgICBlbnRpdHlUeXBlOiAnVXNlcicsXHJcbiAgICAgIGVudGl0eUlkOiBpZCxcclxuICAgICAgcGVyZm9ybWVkQnk6IGFkbWluSWQsXHJcbiAgICAgIGRldGFpbHM6IHsgdXBkYXRlZDogdHJ1ZSB9LFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdXNlcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlbGV0ZSB1c2VyIGJ5IElEXHJcbiAgICogQHBhcmFtIGlkIFVzZXIgSURcclxuICAgKiBAcGFyYW0gYWRtaW5JZCBJRCBvZiB0aGUgYWRtaW4gcGVyZm9ybWluZyB0aGUgYWN0aW9uXHJcbiAgICovXHJcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdEZWxldGUgdXNlciBieSBJRCcgfSlcclxuICBAQXBpUGFyYW0oeyBuYW1lOiAnaWQnLCB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdVc2VyIElEJyB9KVxyXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogMjA0LCBkZXNjcmlwdGlvbjogJ1VzZXIgZGVsZXRlZC4nIH0pXHJcbiAgQERlbGV0ZSgnOmlkJylcclxuICBASHR0cENvZGUoSHR0cFN0YXR1cy5OT19DT05URU5UKVxyXG4gIGFzeW5jIGRlbGV0ZShAUGFyYW0oJ2lkJywgUGFyc2VVVUlEUGlwZSkgaWQ6IHN0cmluZywgQEJvZHkoJ2FkbWluSWQnKSBhZG1pbklkOiBzdHJpbmcpIHtcclxuICAgIGF3YWl0IHRoaXMudXNlcnNTZXJ2aWNlLmRlbGV0ZShpZCk7XHJcbiAgICBhd2FpdCB0aGlzLmF1ZGl0TG9nU2VydmljZS5jcmVhdGVMb2coe1xyXG4gICAgICBhY3Rpb246ICdERUxFVEVfVVNFUicsXHJcbiAgICAgIGVudGl0eVR5cGU6ICdVc2VyJyxcclxuICAgICAgZW50aXR5SWQ6IGlkLFxyXG4gICAgICBwZXJmb3JtZWRCeTogYWRtaW5JZCxcclxuICAgICAgZGV0YWlsczogeyBkZWxldGVkOiB0cnVlIH0sXHJcbiAgICB9KTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSB1c2VyIHJvbGVcclxuICAgKiBAcGFyYW0gaWQgVXNlciBJRFxyXG4gICAqIEBwYXJhbSByb2xlIE5ldyByb2xlIGZvciB0aGUgdXNlclxyXG4gICAqIEBwYXJhbSBhZG1pbklkIElEIG9mIHRoZSBhZG1pbiBwZXJmb3JtaW5nIHRoZSBhY3Rpb25cclxuICAgKiBAcmV0dXJucyBVcGRhdGVkIHVzZXIgZGF0YVxyXG4gICAqL1xyXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnVXBkYXRlIHVzZXIgcm9sZScgfSlcclxuICBAQXBpUGFyYW0oeyBuYW1lOiAnaWQnLCB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdVc2VyIElEJyB9KVxyXG4gIEBBcGlCb2R5KHsgc2NoZW1hOiB7IHByb3BlcnRpZXM6IHsgcm9sZTogeyB0eXBlOiAnc3RyaW5nJywgZW51bTogVXNlclJvbGUgfSwgYWRtaW5JZDogeyB0eXBlOiAnc3RyaW5nJyB9IH0gfSB9KVxyXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogMjAwLCBkZXNjcmlwdGlvbjogJ1VzZXIgcm9sZSB1cGRhdGVkLicgfSlcclxuICBAUGF0Y2goJzppZC9yb2xlJylcclxuICBhc3luYyB1cGRhdGVSb2xlKFxyXG4gICAgQFBhcmFtKCdpZCcsIFBhcnNlVVVJRFBpcGUpIGlkOiBzdHJpbmcsXHJcbiAgICBAQm9keSgncm9sZScpIHJvbGU6IFVzZXJSb2xlLFxyXG4gICAgQEJvZHkoJ2FkbWluSWQnKSBhZG1pbklkOiBzdHJpbmdcclxuICApIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLnVzZXJzU2VydmljZS51cGRhdGUoaWQsIHsgcm9sZSB9KTtcclxuICAgIGF3YWl0IHRoaXMuYXVkaXRMb2dTZXJ2aWNlLmNyZWF0ZUxvZyh7XHJcbiAgICAgIGFjdGlvbjogJ1VQREFURV9ST0xFJyxcclxuICAgICAgZW50aXR5VHlwZTogJ1VzZXInLFxyXG4gICAgICBlbnRpdHlJZDogaWQsXHJcbiAgICAgIHBlcmZvcm1lZEJ5OiBhZG1pbklkLFxyXG4gICAgICBkZXRhaWxzOiB7IG5ld1JvbGU6IHJvbGUgfSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHVzZXI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgdXNlciBhY2NvdW50IHN0YXR1c1xyXG4gICAqIEBwYXJhbSBpZCBVc2VyIElEXHJcbiAgICogQHBhcmFtIHN0YXR1cyBOZXcgc3RhdHVzIGZvciB0aGUgdXNlclxyXG4gICAqIEBwYXJhbSBhZG1pbklkIElEIG9mIHRoZSBhZG1pbiBwZXJmb3JtaW5nIHRoZSBhY3Rpb25cclxuICAgKiBAcmV0dXJucyBVcGRhdGVkIHVzZXIgZGF0YVxyXG4gICAqL1xyXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnVXBkYXRlIHVzZXIgYWNjb3VudCBzdGF0dXMnIH0pXHJcbiAgQEFwaVBhcmFtKHsgbmFtZTogJ2lkJywgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnVXNlciBJRCcgfSlcclxuICBAQXBpQm9keSh7IHNjaGVtYTogeyBwcm9wZXJ0aWVzOiB7IHN0YXR1czogeyB0eXBlOiAnc3RyaW5nJywgZW51bTogQWNjb3VudFN0YXR1cyB9LCBhZG1pbklkOiB7IHR5cGU6ICdzdHJpbmcnIH0gfSB9IH0pXHJcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiAyMDAsIGRlc2NyaXB0aW9uOiAnVXNlciBzdGF0dXMgdXBkYXRlZC4nIH0pXHJcbiAgQFBhdGNoKCc6aWQvc3RhdHVzJylcclxuICBhc3luYyB1cGRhdGVTdGF0dXMoXHJcbiAgICBAUGFyYW0oJ2lkJywgUGFyc2VVVUlEUGlwZSkgaWQ6IHN0cmluZyxcclxuICAgIEBCb2R5KCdzdGF0dXMnKSBzdGF0dXM6IEFjY291bnRTdGF0dXMsXHJcbiAgICBAQm9keSgnYWRtaW5JZCcpIGFkbWluSWQ6IHN0cmluZ1xyXG4gICkge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMudXNlcnNTZXJ2aWNlLnVwZGF0ZShpZCwgeyBzdGF0dXMgfSk7XHJcbiAgICBhd2FpdCB0aGlzLmF1ZGl0TG9nU2VydmljZS5jcmVhdGVMb2coe1xyXG4gICAgICBhY3Rpb246ICdVUERBVEVfU1RBVFVTJyxcclxuICAgICAgZW50aXR5VHlwZTogJ1VzZXInLFxyXG4gICAgICBlbnRpdHlJZDogaWQsXHJcbiAgICAgIHBlcmZvcm1lZEJ5OiBhZG1pbklkLFxyXG4gICAgICBkZXRhaWxzOiB7IG5ld1N0YXR1czogc3RhdHVzIH0sXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB1c2VyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHVzZXIgYW5hbHl0aWNzXHJcbiAgICogQHBhcmFtIGlkIFVzZXIgSURcclxuICAgKiBAcmV0dXJucyBVc2VyIGFuYWx5dGljcyBkYXRhXHJcbiAgICovXHJcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdHZXQgdXNlciBhbmFseXRpY3MnIH0pXHJcbiAgQEFwaVBhcmFtKHsgbmFtZTogJ2lkJywgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnVXNlciBJRCcgfSlcclxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDIwMCwgZGVzY3JpcHRpb246ICdVc2VyIGFuYWx5dGljcy4nIH0pXHJcbiAgQEdldCgnOmlkL2FuYWx5dGljcycpXHJcbiAgYXN5bmMgZ2V0VXNlckFuYWx5dGljcyhAUGFyYW0oJ2lkJywgUGFyc2VVVUlEUGlwZSkgaWQ6IHN0cmluZykge1xyXG4gICAgLy8gVGhpcyBzaG91bGQgY2FsbCBhbmFseXRpY3NTZXJ2aWNlIGZvciB1c2VyLXNwZWNpZmljIGFuYWx5dGljc1xyXG4gICAgLy8gUGxhY2Vob2xkZXI6IHJldHVybiBiYXNpYyBpbmZvIGZvciBub3dcclxuICAgIHJldHVybiB7IG1lc3NhZ2U6ICdVc2VyIGFuYWx5dGljcyBlbmRwb2ludCAodG8gYmUgaW1wbGVtZW50ZWQpJyB9O1xyXG4gIH1cclxufVxyXG4iXSwidmVyc2lvbiI6M30=