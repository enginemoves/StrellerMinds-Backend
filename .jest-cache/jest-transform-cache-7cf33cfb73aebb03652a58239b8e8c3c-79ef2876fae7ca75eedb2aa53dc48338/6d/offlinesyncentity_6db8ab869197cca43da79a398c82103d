4032078e50f92c17f5aa306540494f51
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", { value: true });
exports.OfflineSync = void 0;
const typeorm_1 = require("typeorm");
let OfflineSync = class OfflineSync {
};
exports.OfflineSync = OfflineSync;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)("uuid"),
    __metadata("design:type", String)
], OfflineSync.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "varchar", length: 255, nullable: true }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", String)
], OfflineSync.prototype, "userId", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "varchar", length: 100 }),
    __metadata("design:type", String)
], OfflineSync.prototype, "operation", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "varchar", length: 100 }),
    __metadata("design:type", String)
], OfflineSync.prototype, "entityType", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "varchar", length: 255, nullable: true }),
    __metadata("design:type", String)
], OfflineSync.prototype, "entityId", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "json" }),
    __metadata("design:type", Object)
], OfflineSync.prototype, "data", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "json", nullable: true }),
    __metadata("design:type", Object)
], OfflineSync.prototype, "metadata", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "varchar", length: 50, default: "pending" }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", String)
], OfflineSync.prototype, "status", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "integer", default: 5 }),
    __metadata("design:type", Number)
], OfflineSync.prototype, "priority", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "text", nullable: true }),
    __metadata("design:type", String)
], OfflineSync.prototype, "errorMessage", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "json", nullable: true }),
    __metadata("design:type", Object)
], OfflineSync.prototype, "result", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "timestamp", nullable: true }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], OfflineSync.prototype, "processedAt", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "integer", default: 0 }),
    __metadata("design:type", Number)
], OfflineSync.prototype, "retryCount", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "integer", default: 3 }),
    __metadata("design:type", Number)
], OfflineSync.prototype, "maxRetries", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: "timestamp", nullable: true }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], OfflineSync.prototype, "nextRetryAt", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], OfflineSync.prototype, "createdAt", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], OfflineSync.prototype, "updatedAt", void 0);
exports.OfflineSync = OfflineSync = __decorate([
    (0, typeorm_1.Entity)("offline_sync"),
    (0, typeorm_1.Index)(["userId", "status"]),
    (0, typeorm_1.Index)(["status", "priority", "createdAt"])
], OfflineSync);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxvam9zZXBoXFxEb2N1bWVudHNcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFxwd2FcXGVudGl0aWVzXFxvZmZsaW5lLXN5bmMuZW50aXR5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxxQ0FBMkc7QUFRcEcsSUFBTSxXQUFXLEdBQWpCLE1BQU0sV0FBVztDQTBEdkIsQ0FBQTtBQTFEWSxrQ0FBVztBQUV0QjtJQURDLElBQUEsZ0NBQXNCLEVBQUMsTUFBTSxDQUFDOzt1Q0FDckI7QUFJVjtJQUZDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7SUFDeEQsSUFBQSxlQUFLLEdBQUU7OzJDQUNPO0FBR2Y7SUFEQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQzs7OENBQ2pCO0FBR3hCO0lBREMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUM7OytDQUN2QjtBQUdsQjtJQURDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7OzZDQUN4QztBQUdqQjtJQURDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQzs7eUNBQ2hCO0FBR1Q7SUFEQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQzs7NkNBTXhDO0FBSUQ7SUFGQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxDQUFDO0lBQzNELElBQUEsZUFBSyxHQUFFOzsyQ0FDVTtBQUdsQjtJQURDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDOzs2Q0FDeEI7QUFHaEI7SUFEQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQzs7aURBQ3BCO0FBR3JCO0lBREMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7OzJDQUM3QjtBQUdaO0lBREMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7a0RBQ2hDLElBQUksb0JBQUosSUFBSTtnREFBQTtBQUdsQjtJQURDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDOzsrQ0FDdEI7QUFHbEI7SUFEQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQzs7K0NBQ3RCO0FBR2xCO0lBREMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7a0RBQ2hDLElBQUksb0JBQUosSUFBSTtnREFBQTtBQUdsQjtJQURDLElBQUEsMEJBQWdCLEdBQUU7a0RBQ1IsSUFBSSxvQkFBSixJQUFJOzhDQUFBO0FBR2Y7SUFEQyxJQUFBLDBCQUFnQixHQUFFO2tEQUNSLElBQUksb0JBQUosSUFBSTs4Q0FBQTtzQkF6REosV0FBVztJQUh2QixJQUFBLGdCQUFNLEVBQUMsY0FBYyxDQUFDO0lBQ3RCLElBQUEsZUFBSyxFQUFDLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzNCLElBQUEsZUFBSyxFQUFDLENBQUMsUUFBUSxFQUFFLFVBQVUsRUFBRSxXQUFXLENBQUMsQ0FBQztHQUM5QixXQUFXLENBMER2QiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXG9qb3NlcGhcXERvY3VtZW50c1xcU3RyZWxsZXJNaW5kcy1CYWNrZW5kXFxzcmNcXHB3YVxcZW50aXRpZXNcXG9mZmxpbmUtc3luYy5lbnRpdHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW50aXR5LCBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uLCBDb2x1bW4sIENyZWF0ZURhdGVDb2x1bW4sIFVwZGF0ZURhdGVDb2x1bW4sIEluZGV4IH0gZnJvbSBcInR5cGVvcm1cIlxyXG5cclxuZXhwb3J0IHR5cGUgU3luY1N0YXR1cyA9IFwicGVuZGluZ1wiIHwgXCJwcm9jZXNzaW5nXCIgfCBcImNvbXBsZXRlZFwiIHwgXCJmYWlsZWRcIiB8IFwiY2FuY2VsbGVkXCJcclxuZXhwb3J0IHR5cGUgU3luY09wZXJhdGlvbiA9IFwiY3JlYXRlXCIgfCBcInVwZGF0ZVwiIHwgXCJkZWxldGVcIiB8IFwiYmF0Y2hcIlxyXG5cclxuQEVudGl0eShcIm9mZmxpbmVfc3luY1wiKVxyXG5ASW5kZXgoW1widXNlcklkXCIsIFwic3RhdHVzXCJdKVxyXG5ASW5kZXgoW1wic3RhdHVzXCIsIFwicHJpb3JpdHlcIiwgXCJjcmVhdGVkQXRcIl0pXHJcbmV4cG9ydCBjbGFzcyBPZmZsaW5lU3luYyB7XHJcbiAgQFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4oXCJ1dWlkXCIpXHJcbiAgaWQ6IHN0cmluZ1xyXG5cclxuICBAQ29sdW1uKHsgdHlwZTogXCJ2YXJjaGFyXCIsIGxlbmd0aDogMjU1LCBudWxsYWJsZTogdHJ1ZSB9KVxyXG4gIEBJbmRleCgpXHJcbiAgdXNlcklkPzogc3RyaW5nXHJcblxyXG4gIEBDb2x1bW4oeyB0eXBlOiBcInZhcmNoYXJcIiwgbGVuZ3RoOiAxMDAgfSlcclxuICBvcGVyYXRpb246IFN5bmNPcGVyYXRpb25cclxuXHJcbiAgQENvbHVtbih7IHR5cGU6IFwidmFyY2hhclwiLCBsZW5ndGg6IDEwMCB9KVxyXG4gIGVudGl0eVR5cGU6IHN0cmluZ1xyXG5cclxuICBAQ29sdW1uKHsgdHlwZTogXCJ2YXJjaGFyXCIsIGxlbmd0aDogMjU1LCBudWxsYWJsZTogdHJ1ZSB9KVxyXG4gIGVudGl0eUlkPzogc3RyaW5nXHJcblxyXG4gIEBDb2x1bW4oeyB0eXBlOiBcImpzb25cIiB9KVxyXG4gIGRhdGE6IGFueVxyXG5cclxuICBAQ29sdW1uKHsgdHlwZTogXCJqc29uXCIsIG51bGxhYmxlOiB0cnVlIH0pXHJcbiAgbWV0YWRhdGE/OiB7XHJcbiAgICBjbGllbnRUaW1lc3RhbXA6IERhdGVcclxuICAgIGRldmljZUlkPzogc3RyaW5nXHJcbiAgICBjb25uZWN0aW9uVHlwZT86IHN0cmluZ1xyXG4gICAgcmV0cnlDb3VudD86IG51bWJlclxyXG4gIH1cclxuXHJcbiAgQENvbHVtbih7IHR5cGU6IFwidmFyY2hhclwiLCBsZW5ndGg6IDUwLCBkZWZhdWx0OiBcInBlbmRpbmdcIiB9KVxyXG4gIEBJbmRleCgpXHJcbiAgc3RhdHVzOiBTeW5jU3RhdHVzXHJcblxyXG4gIEBDb2x1bW4oeyB0eXBlOiBcImludGVnZXJcIiwgZGVmYXVsdDogNSB9KVxyXG4gIHByaW9yaXR5OiBudW1iZXJcclxuXHJcbiAgQENvbHVtbih7IHR5cGU6IFwidGV4dFwiLCBudWxsYWJsZTogdHJ1ZSB9KVxyXG4gIGVycm9yTWVzc2FnZT86IHN0cmluZ1xyXG5cclxuICBAQ29sdW1uKHsgdHlwZTogXCJqc29uXCIsIG51bGxhYmxlOiB0cnVlIH0pXHJcbiAgcmVzdWx0PzogYW55XHJcblxyXG4gIEBDb2x1bW4oeyB0eXBlOiBcInRpbWVzdGFtcFwiLCBudWxsYWJsZTogdHJ1ZSB9KVxyXG4gIHByb2Nlc3NlZEF0PzogRGF0ZVxyXG5cclxuICBAQ29sdW1uKHsgdHlwZTogXCJpbnRlZ2VyXCIsIGRlZmF1bHQ6IDAgfSlcclxuICByZXRyeUNvdW50OiBudW1iZXJcclxuXHJcbiAgQENvbHVtbih7IHR5cGU6IFwiaW50ZWdlclwiLCBkZWZhdWx0OiAzIH0pXHJcbiAgbWF4UmV0cmllczogbnVtYmVyXHJcblxyXG4gIEBDb2x1bW4oeyB0eXBlOiBcInRpbWVzdGFtcFwiLCBudWxsYWJsZTogdHJ1ZSB9KVxyXG4gIG5leHRSZXRyeUF0PzogRGF0ZVxyXG5cclxuICBAQ3JlYXRlRGF0ZUNvbHVtbigpXHJcbiAgY3JlYXRlZEF0OiBEYXRlXHJcblxyXG4gIEBVcGRhdGVEYXRlQ29sdW1uKClcclxuICB1cGRhdGVkQXQ6IERhdGVcclxufVxyXG4iXSwidmVyc2lvbiI6M30=