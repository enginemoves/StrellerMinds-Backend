24bee46920ab67de0ea4b11473325f42
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var LearningPathService_1;
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", { value: true });
exports.LearningPathService = void 0;
const common_1 = require("@nestjs/common");
const typeorm_1 = require("@nestjs/typeorm");
const typeorm_2 = require("typeorm");
const learning_path_entity_1 = require("../entities/learning-path.entity");
const user_entity_1 = require("../../users/entities/user.entity");
const course_entity_1 = require("../../courses/entities/course.entity");
const user_interaction_entity_1 = require("../entities/user-interaction.entity");
const recommendation_analytics_service_1 = require("./recommendation-analytics.service");
const content_similarity_service_1 = require("./content-similarity.service");
let LearningPathService = LearningPathService_1 = class LearningPathService {
    constructor(learningPathRepository, stepRepository, userRepository, courseRepository, interactionRepository, analyticsService, similarityService) {
        this.learningPathRepository = learningPathRepository;
        this.stepRepository = stepRepository;
        this.userRepository = userRepository;
        this.courseRepository = courseRepository;
        this.interactionRepository = interactionRepository;
        this.analyticsService = analyticsService;
        this.similarityService = similarityService;
        this.logger = new common_1.Logger(LearningPathService_1.name);
    }
    /**
     * Generate a personalized learning path for a user
     */
    async generateLearningPath(userId, goal, options = {
        maxCourses: 10,
        includeAssessments: true,
        includeProjects: true,
        adaptToProgress: true,
        considerPrerequisites: true,
    }) {
        this.logger.log(`Generating learning path for user ${userId}`);
        try {
            // Analyze user's current skills and progress
            const userProfile = await this.analyzeUserProfile(userId);
            // Find relevant courses for the target skills
            const candidateCourses = await this.findRelevantCourses(goal.targetSkills, goal.preferences);
            // Filter and sequence courses based on prerequisites and difficulty
            const sequencedCourses = await this.sequenceCourses(candidateCourses, userProfile, goal, options);
            // Create learning path entity
            const learningPath = await this.createLearningPathEntity(userId, goal, sequencedCourses);
            // Generate learning path steps
            const steps = await this.generateLearningPathSteps(learningPath.id, sequencedCourses, goal, options);
            // Save the complete learning path
            learningPath.steps = steps;
            learningPath.totalSteps = steps.length;
            learningPath.estimatedDuration = this.calculateEstimatedDuration(steps);
            const savedPath = await this.learningPathRepository.save(learningPath);
            // Track analytics
            await this.analyticsService.trackRecommendationGeneration({
                userId,
                recommendationIds: [savedPath.id],
                algorithmVersion: 'learning_path_v1.0',
                generationTimeMs: Date.now(),
                context: { goal, options },
            });
            this.logger.log(`Generated learning path with ${steps.length} steps for user ${userId}`);
            return savedPath;
        }
        catch (error) {
            this.logger.error(`Error generating learning path for user ${userId}:`, error);
            throw error;
        }
    }
    /**
     * Get learning paths for a user
     */
    async getUserLearningPaths(userId, query) {
        const queryBuilder = this.learningPathRepository
            .createQueryBuilder('path')
            .leftJoinAndSelect('path.steps', 'steps')
            .leftJoinAndSelect('steps.course', 'course')
            .where('path.userId = :userId', { userId });
        // Apply filters
        if (query.status) {
            queryBuilder.andWhere('path.status = :status', { status: query.status });
        }
        if (query.skillArea) {
            queryBuilder.andWhere('path.targetSkills @> :skillArea', { skillArea: [query.skillArea] });
        }
        // Apply sorting
        queryBuilder.orderBy(`path.${query.sortBy}`, query.sortOrder);
        // Get total count
        const total = await queryBuilder.getCount();
        // Apply pagination
        queryBuilder.skip(query.offset).take(query.limit);
        const paths = await queryBuilder.getMany();
        return { paths, total };
    }
    /**
     * Update learning path progress
     */
    async updateProgress(pathId, stepId, completed) {
        const path = await this.learningPathRepository.findOne({
            where: { id: pathId },
            relations: ['steps'],
        });
        if (!path) {
            throw new Error(`Learning path ${pathId} not found`);
        }
        const step = path.steps.find(s => s.id === stepId);
        if (!step) {
            throw new Error(`Step ${stepId} not found in learning path`);
        }
        // Update step completion
        step.completed = completed;
        step.completedAt = completed ? new Date() : null;
        await this.stepRepository.save(step);
        // Update path progress
        const completedSteps = path.steps.filter(s => s.completed).length;
        path.completedSteps = completedSteps;
        path.progressPercentage = (completedSteps / path.totalSteps) * 100;
        // Update path status
        if (path.progressPercentage === 100) {
            path.status = learning_path_entity_1.LearningPathStatus.COMPLETED;
            path.completedAt = new Date();
        }
        else if (path.progressPercentage > 0 && path.status === learning_path_entity_1.LearningPathStatus.NOT_STARTED) {
            path.status = learning_path_entity_1.LearningPathStatus.IN_PROGRESS;
            path.startedAt = new Date();
        }
        return await this.learningPathRepository.save(path);
    }
    /**
     * Adapt learning path based on user progress and performance
     */
    async adaptLearningPath(pathId) {
        const path = await this.learningPathRepository.findOne({
            where: { id: pathId },
            relations: ['steps', 'steps.course', 'user'],
        });
        if (!path) {
            throw new Error(`Learning path ${pathId} not found`);
        }
        this.logger.log(`Adapting learning path ${pathId} based on user progress`);
        // Analyze user's recent performance
        const userPerformance = await this.analyzeUserPerformance(path.userId, path.steps);
        // Identify areas where user is struggling or excelling
        const adaptations = await this.identifyAdaptations(path, userPerformance);
        // Apply adaptations
        if (adaptations.length > 0) {
            await this.applyAdaptations(path, adaptations);
            // Update path metadata
            path.metadata = {
                ...path.metadata,
                adaptations: adaptations.map(a => ({
                    type: a.type,
                    reason: a.reason,
                    appliedAt: new Date(),
                })),
                lastAdaptedAt: new Date(),
            };
            await this.learningPathRepository.save(path);
        }
        return path;
    }
    /**
     * Get learning path recommendations based on user's interests and goals
     */
    async getPathRecommendations(userId, limit = 5) {
        const user = await this.userRepository.findOne({ where: { id: userId } });
        if (!user) {
            throw new Error(`User ${userId} not found`);
        }
        // Get user's interaction history
        const interactions = await this.interactionRepository.find({
            where: { userId },
            order: { createdAt: 'DESC' },
            take: 100,
            relations: ['course'],
        });
        // Generate skill-based path recommendations
        const skillBasedPaths = await this.generateSkillBasedPathRecommendations(user, interactions, limit);
        // Generate trending path recommendations
        const trendingPaths = await this.generateTrendingPathRecommendations(limit);
        // Generate continuation path recommendations
        const continuationPaths = await this.generateContinuationPathRecommendations(user, interactions, limit);
        return {
            skillBasedPaths,
            trendingPaths,
            continuationPaths,
        };
    }
    /**
     * Analyze user's current skills and learning profile
     */
    async analyzeUserProfile(userId) {
        const user = await this.userRepository.findOne({ where: { id: userId } });
        const interactions = await this.interactionRepository.find({
            where: { userId },
            order: { createdAt: 'DESC' },
            take: 200,
            relations: ['course'],
        });
        // Extract current skills from completed courses
        const currentSkills = new Set();
        const skillLevels = {};
        interactions
            .filter(i => i.interactionType === user_interaction_entity_1.InteractionType.COMPLETE && i.course)
            .forEach(i => {
            if (i.course?.skills) {
                i.course.skills.forEach(skill => {
                    currentSkills.add(skill);
                    skillLevels[skill] = (skillLevels[skill] || 0) + 1;
                });
            }
        });
        // Calculate completion rate
        const enrollments = interactions.filter(i => i.interactionType === user_interaction_entity_1.InteractionType.ENROLL).length;
        const completions = interactions.filter(i => i.interactionType === user_interaction_entity_1.InteractionType.COMPLETE).length;
        const completionRate = enrollments > 0 ? completions / enrollments : 0;
        // Analyze learning style based on interaction patterns
        const learningStyle = this.determineLearningStyle(interactions);
        // Calculate average session time (placeholder)
        const averageSessionTime = 45; // minutes
        // Determine preferred difficulty
        const preferredDifficulty = this.determinePreferredDifficulty(interactions);
        return {
            currentSkills: Array.from(currentSkills),
            skillLevels,
            learningStyle,
            completionRate,
            averageSessionTime,
            preferredDifficulty,
        };
    }
    /**
     * Find courses relevant to target skills
     */
    async findRelevantCourses(targetSkills, preferences) {
        const queryBuilder = this.courseRepository.createQueryBuilder('course')
            .where('course.isActive = :isActive', { isActive: true });
        // Filter by skills
        if (targetSkills.length > 0) {
            queryBuilder.andWhere('course.skills && :targetSkills', { targetSkills });
        }
        // Apply preferences
        if (preferences.preferredDifficulty?.length) {
            queryBuilder.andWhere('course.difficulty IN (:...difficulties)', {
                difficulties: preferences.preferredDifficulty,
            });
        }
        if (preferences.preferredDuration) {
            queryBuilder.andWhere('course.duration <= :maxDuration', {
                maxDuration: preferences.preferredDuration * 1.5, // Allow 50% flexibility
            });
        }
        if (preferences.excludeTopics?.length) {
            queryBuilder.andWhere('NOT (course.tags && :excludeTopics)', {
                excludeTopics: preferences.excludeTopics,
            });
        }
        if (preferences.includeTopics?.length) {
            queryBuilder.andWhere('course.tags && :includeTopics', {
                includeTopics: preferences.includeTopics,
            });
        }
        // Order by rating and relevance
        queryBuilder.orderBy('course.rating', 'DESC');
        return await queryBuilder.getMany();
    }
    /**
     * Sequence courses based on prerequisites and difficulty progression
     */
    async sequenceCourses(courses, userProfile, goal, options) {
        // Group courses by difficulty level
        const coursesByDifficulty = {
            beginner: courses.filter(c => c.difficulty === 'beginner'),
            intermediate: courses.filter(c => c.difficulty === 'intermediate'),
            advanced: courses.filter(c => c.difficulty === 'advanced'),
        };
        const sequencedCourses = [];
        const userCurrentLevel = goal.currentLevel;
        const userTargetLevel = goal.targetLevel;
        // Start with appropriate difficulty level
        let currentDifficulty = userCurrentLevel;
        // Add courses progressively
        while (sequencedCourses.length < options.maxCourses && currentDifficulty) {
            const availableCourses = coursesByDifficulty[currentDifficulty];
            if (availableCourses.length > 0) {
                // Select best courses for current level
                const selectedCourses = this.selectBestCoursesForLevel(availableCourses, userProfile, goal, Math.min(3, options.maxCourses - sequencedCourses.length));
                sequencedCourses.push(...selectedCourses);
            }
            // Progress to next difficulty level
            if (currentDifficulty === 'beginner' && userTargetLevel !== 'beginner') {
                currentDifficulty = 'intermediate';
            }
            else if (currentDifficulty === 'intermediate' && userTargetLevel === 'advanced') {
                currentDifficulty = 'advanced';
            }
            else {
                break;
            }
        }
        return sequencedCourses.slice(0, options.maxCourses);
    }
    /**
     * Select best courses for a specific difficulty level
     */
    selectBestCoursesForLevel(courses, userProfile, goal, maxCourses) {
        // Score courses based on relevance to user's goals and profile
        const scoredCourses = courses.map(course => ({
            course,
            score: this.calculateCourseRelevanceScore(course, userProfile, goal),
        }));
        // Sort by score and return top courses
        return scoredCourses
            .sort((a, b) => b.score - a.score)
            .slice(0, maxCourses)
            .map(sc => sc.course);
    }
    /**
     * Calculate course relevance score for learning path
     */
    calculateCourseRelevanceScore(course, userProfile, goal) {
        let score = 0;
        // Skill alignment (40% weight)
        const skillOverlap = course.skills?.filter(skill => goal.targetSkills.includes(skill)).length || 0;
        const skillScore = skillOverlap / Math.max(goal.targetSkills.length, 1);
        score += skillScore * 0.4;
        // Course rating (20% weight)
        const ratingScore = (course.rating || 0) / 5;
        score += ratingScore * 0.2;
        // User's current skill level alignment (20% weight)
        const userHasPrereqs = course.prerequisites?.every(prereq => userProfile.currentSkills.includes(prereq)) ?? true;
        score += userHasPrereqs ? 0.2 : 0;
        // Duration preference (10% weight)
        if (goal.preferences.preferredDuration) {
            const durationDiff = Math.abs((course.duration || 0) - goal.preferences.preferredDuration);
            const durationScore = Math.max(0, 1 - durationDiff / goal.preferences.preferredDuration);
            score += durationScore * 0.1;
        }
        // Popularity/enrollment count (10% weight)
        const popularityScore = Math.min((course.enrollmentCount || 0) / 1000, 1);
        score += popularityScore * 0.1;
        return score;
    }
    /**
     * Create learning path entity
     */
    async createLearningPathEntity(userId, goal, courses) {
        const learningPath = new learning_path_entity_1.LearningPath();
        learningPath.userId = userId;
        learningPath.title = `${goal.targetSkills.slice(0, 2).join(' & ')} Learning Path`;
        learningPath.description = `Personalized learning path to master ${goal.targetSkills.join(', ')}`;
        learningPath.targetSkills = goal.targetSkills;
        learningPath.currentLevel = goal.currentLevel;
        learningPath.targetLevel = goal.targetLevel;
        learningPath.status = learning_path_entity_1.LearningPathStatus.NOT_STARTED;
        learningPath.totalSteps = 0; // Will be updated after steps are created
        learningPath.completedSteps = 0;
        learningPath.progressPercentage = 0;
        learningPath.estimatedDuration = 0; // Will be calculated after steps are created
        learningPath.metadata = {
            generatedAt: new Date(),
            goal,
            algorithmVersion: 'v1.0',
        };
        return await this.learningPathRepository.save(learningPath);
    }
    /**
     * Generate learning path steps
     */
    async generateLearningPathSteps(pathId, courses, goal, options) {
        const steps = [];
        let stepOrder = 1;
        for (const course of courses) {
            // Add course step
            const courseStep = new learning_path_entity_1.LearningPathStep();
            courseStep.learningPathId = pathId;
            courseStep.courseId = course.id;
            courseStep.stepType = learning_path_entity_1.StepType.COURSE;
            courseStep.title = course.title;
            courseStep.description = course.description;
            courseStep.stepOrder = stepOrder++;
            courseStep.estimatedDuration = course.duration || 60;
            courseStep.completed = false;
            courseStep.metadata = {
                courseId: course.id,
                difficulty: course.difficulty,
                skills: course.skills,
            };
            steps.push(courseStep);
            // Add assessment step if enabled
            if (options.includeAssessments && stepOrder <= courses.length) {
                const assessmentStep = new learning_path_entity_1.LearningPathStep();
                assessmentStep.learningPathId = pathId;
                assessmentStep.stepType = learning_path_entity_1.StepType.ASSESSMENT;
                assessmentStep.title = `${course.title} - Knowledge Check`;
                assessmentStep.description = `Assess your understanding of ${course.title}`;
                assessmentStep.stepOrder = stepOrder++;
                assessmentStep.estimatedDuration = 30;
                assessmentStep.completed = false;
                assessmentStep.metadata = {
                    relatedCourseId: course.id,
                    assessmentType: 'knowledge_check',
                };
                steps.push(assessmentStep);
            }
            // Add project step for advanced courses if enabled
            if (options.includeProjects && course.difficulty === 'advanced') {
                const projectStep = new learning_path_entity_1.LearningPathStep();
                projectStep.learningPathId = pathId;
                projectStep.stepType = learning_path_entity_1.StepType.PROJECT;
                projectStep.title = `${course.title} - Practical Project`;
                projectStep.description = `Apply your knowledge with a hands-on project`;
                projectStep.stepOrder = stepOrder++;
                projectStep.estimatedDuration = 120;
                projectStep.completed = false;
                projectStep.metadata = {
                    relatedCourseId: course.id,
                    projectType: 'capstone',
                };
                steps.push(projectStep);
            }
        }
        // Save all steps
        return await this.stepRepository.save(steps);
    }
    /**
     * Calculate estimated duration for learning path
     */
    calculateEstimatedDuration(steps) {
        return steps.reduce((total, step) => total + step.estimatedDuration, 0);
    }
    /**
     * Analyze user performance for adaptation
     */
    async analyzeUserPerformance(userId, steps) {
        // Analyze completion patterns and times
        const completedSteps = steps.filter(s => s.completed);
        const totalSteps = steps.length;
        const completionRate = totalSteps > 0 ? completedSteps.length / totalSteps : 0;
        // Identify struggling and excelling areas based on completion times and patterns
        const strugglingAreas = [];
        const excellingAreas = [];
        // Calculate average completion time
        const averageCompletionTime = completedSteps.length > 0
            ? completedSteps.reduce((sum, step) => {
                if (step.completedAt && step.createdAt) {
                    return sum + (step.completedAt.getTime() - step.createdAt.getTime());
                }
                return sum;
            }, 0) / completedSteps.length
            : 0;
        return {
            strugglingAreas,
            excellingAreas,
            averageCompletionTime: averageCompletionTime / (1000 * 60 * 60), // Convert to hours
            completionRate,
        };
    }
    /**
     * Identify adaptations needed for learning path
     */
    async identifyAdaptations(path, performance) {
        const adaptations = [];
        // If completion rate is low, add support materials
        if (performance.completionRate < 0.5) {
            adaptations.push({
                type: 'add_support',
                reason: 'Low completion rate detected, adding support materials',
            });
        }
        // If user is excelling, skip redundant content
        if (performance.excellingAreas.length > 0) {
            adaptations.push({
                type: 'skip_redundant',
                reason: 'User excelling in certain areas, optimizing path',
            });
        }
        return adaptations;
    }
    /**
     * Apply adaptations to learning path
     */
    async applyAdaptations(path, adaptations) {
        for (const adaptation of adaptations) {
            switch (adaptation.type) {
                case 'add_support':
                    // Add support materials or easier prerequisite courses
                    break;
                case 'skip_redundant':
                    // Mark certain steps as optional or completed
                    break;
                case 'adjust_pace':
                    // Modify estimated durations
                    break;
                case 'change_difficulty':
                    // Replace courses with easier/harder alternatives
                    break;
            }
        }
    }
    /**
     * Generate skill-based path recommendations
     */
    async generateSkillBasedPathRecommendations(user, interactions, limit) {
        // Analyze user's skill gaps and interests
        const userSkills = user.skills || [];
        const desiredSkills = user.desiredSkills || [];
        const skillGaps = desiredSkills.filter(skill => !userSkills.includes(skill));
        return skillGaps.slice(0, limit).map(skill => ({
            targetSkills: [skill],
            currentLevel: 'beginner',
            targetLevel: 'intermediate',
            timeframe: 8,
            preferences: {
                maxCoursesPerWeek: 2,
                preferredDuration: 60,
            },
        }));
    }
    /**
     * Generate trending path recommendations
     */
    async generateTrendingPathRecommendations(limit) {
        // Get trending skills/topics from recent course enrollments
        const trendingSkills = ['React', 'Python', 'Machine Learning', 'DevOps', 'Cloud Computing'];
        return trendingSkills.slice(0, limit).map(skill => ({
            targetSkills: [skill],
            currentLevel: 'beginner',
            targetLevel: 'advanced',
            timeframe: 12,
            preferences: {
                maxCoursesPerWeek: 1,
                preferredDuration: 90,
            },
        }));
    }
    /**
     * Generate continuation path recommendations
     */
    async generateContinuationPathRecommendations(user, interactions, limit) {
        // Find skills user has started learning but not mastered
        const inProgressSkills = interactions
            .filter(i => i.interactionType === user_interaction_entity_1.InteractionType.START && i.course?.skills)
            .flatMap(i => i.course.skills)
            .filter((skill, index, arr) => arr.indexOf(skill) === index)
            .slice(0, limit);
        return inProgressSkills.map(skill => ({
            targetSkills: [skill],
            currentLevel: 'intermediate',
            targetLevel: 'advanced',
            timeframe: 6,
            preferences: {
                maxCoursesPerWeek: 2,
                preferredDuration: 75,
            },
        }));
    }
    /**
     * Utility methods
     */
    determineLearningStyle(interactions) {
        // Analyze interaction patterns to determine learning style
        const videoInteractions = interactions.filter(i => i.metadata?.contentType === 'video').length;
        const textInteractions = interactions.filter(i => i.metadata?.contentType === 'text').length;
        const practiceInteractions = interactions.filter(i => i.metadata?.contentType === 'practice').length;
        if (videoInteractions > textInteractions && videoInteractions > practiceInteractions) {
            return 'visual';
        }
        else if (practiceInteractions > videoInteractions && practiceInteractions > textInteractions) {
            return 'kinesthetic';
        }
        else {
            return 'reading';
        }
    }
    determinePreferredDifficulty(interactions) {
        // Analyze completion rates by difficulty to determine preference
        const completedCourses = interactions
            .filter(i => i.interactionType === user_interaction_entity_1.InteractionType.COMPLETE && i.course)
            .map(i => i.course);
        const difficultyCompletions = {
            beginner: completedCourses.filter(c => c.difficulty === 'beginner').length,
            intermediate: completedCourses.filter(c => c.difficulty === 'intermediate').length,
            advanced: completedCourses.filter(c => c.difficulty === 'advanced').length,
        };
        const maxCompletions = Math.max(...Object.values(difficultyCompletions));
        const preferredDifficulty = Object.entries(difficultyCompletions)
            .find(([_, count]) => count === maxCompletions)?.[0] || 'beginner';
        return preferredDifficulty;
    }
};
exports.LearningPathService = LearningPathService;
exports.LearningPathService = LearningPathService = LearningPathService_1 = __decorate([
    (0, common_1.Injectable)(),
    __param(0, (0, typeorm_1.InjectRepository)(learning_path_entity_1.LearningPath)),
    __param(1, (0, typeorm_1.InjectRepository)(learning_path_entity_1.LearningPathStep)),
    __param(2, (0, typeorm_1.InjectRepository)(user_entity_1.User)),
    __param(3, (0, typeorm_1.InjectRepository)(course_entity_1.Course)),
    __param(4, (0, typeorm_1.InjectRepository)(user_interaction_entity_1.UserInteraction)),
    __metadata("design:paramtypes", [typeof (_a = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _a : Object, typeof (_b = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _b : Object, typeof (_c = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _c : Object, typeof (_d = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _d : Object, typeof (_e = typeof typeorm_2.Repository !== "undefined" && typeorm_2.Repository) === "function" ? _e : Object, typeof (_f = typeof recommendation_analytics_service_1.RecommendationAnalyticsService !== "undefined" && recommendation_analytics_service_1.RecommendationAnalyticsService) === "function" ? _f : Object, typeof (_g = typeof content_similarity_service_1.ContentSimilarityService !== "undefined" && content_similarity_service_1.ContentSimilarityService) === "function" ? _g : Object])
], LearningPathService);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxvam9zZXBoXFxEb2N1bWVudHNcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFxyZWNvbW1lbmRhdGlvblxcc2VydmljZXNcXGxlYXJuaW5nLXBhdGguc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDJDQUFvRDtBQUNwRCw2Q0FBbUQ7QUFDbkQscUNBQXlDO0FBQ3pDLDJFQUFnSDtBQUNoSCxrRUFBd0Q7QUFDeEQsd0VBQThEO0FBQzlELGlGQUF1RjtBQUV2Rix5RkFBb0Y7QUFDcEYsNkVBQXdFO0FBeUJqRSxJQUFNLG1CQUFtQiwyQkFBekIsTUFBTSxtQkFBbUI7SUFHOUIsWUFFRSxzQkFBd0QsRUFFeEQsY0FBb0QsRUFFcEQsY0FBd0MsRUFFeEMsZ0JBQTRDLEVBRTVDLHFCQUEwRCxFQUNsRCxnQkFBZ0QsRUFDaEQsaUJBQTJDO1FBVjNDLDJCQUFzQixHQUF0QixzQkFBc0IsQ0FBMEI7UUFFaEQsbUJBQWMsR0FBZCxjQUFjLENBQThCO1FBRTVDLG1CQUFjLEdBQWQsY0FBYyxDQUFrQjtRQUVoQyxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQW9CO1FBRXBDLDBCQUFxQixHQUFyQixxQkFBcUIsQ0FBNkI7UUFDbEQscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFnQztRQUNoRCxzQkFBaUIsR0FBakIsaUJBQWlCLENBQTBCO1FBZHBDLFdBQU0sR0FBRyxJQUFJLGVBQU0sQ0FBQyxxQkFBbUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQWU1RCxDQUFDO0lBRUo7O09BRUc7SUFDSCxLQUFLLENBQUMsb0JBQW9CLENBQ3hCLE1BQWMsRUFDZCxJQUFrQixFQUNsQixVQUFpQztRQUMvQixVQUFVLEVBQUUsRUFBRTtRQUNkLGtCQUFrQixFQUFFLElBQUk7UUFDeEIsZUFBZSxFQUFFLElBQUk7UUFDckIsZUFBZSxFQUFFLElBQUk7UUFDckIscUJBQXFCLEVBQUUsSUFBSTtLQUM1QjtRQUVELElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLHFD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Z0IsRUFBQyxtQ0FBWSxDQUFDLENBQUE7SUFFOUIsV0FBQSxJQUFBLDBCQUFnQixFQUFDLHVDQUFnQixDQUFDLENBQUE7SUFFbEMsV0FBQSxJQUFBLDBCQUFnQixFQUFDLGtCQUFJLENBQUMsQ0FBQTtJQUV0QixXQUFBLElBQUEsMEJBQWdCLEVBQUMsc0JBQU0sQ0FBQyxDQUFBO0lBRXhCLFdBQUEsSUFBQSwwQkFBZ0IsRUFBQyx5Q0FBZSxDQUFDLENBQUE7eURBUEYsb0JBQVUsb0JBQVYsb0JBQVUsb0RBRWxCLG9CQUFVLG9CQUFWLG9CQUFVLG9EQUVWLG9CQUFVLG9CQUFWLG9CQUFVLG9EQUVSLG9CQUFVLG9CQUFWLG9CQUFVLG9EQUVMLG9CQUFVLG9CQUFWLG9CQUFVLG9EQUNmLGlFQUE4QixvQkFBOUIsaUVBQThCLG9EQUM3QixxREFBd0Isb0JBQXhCLHFEQUF3QjtHQWYxQyxtQkFBbUIsQ0FndkIvQiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXG9qb3NlcGhcXERvY3VtZW50c1xcU3RyZWxsZXJNaW5kcy1CYWNrZW5kXFxzcmNcXHJlY29tbWVuZGF0aW9uXFxzZXJ2aWNlc1xcbGVhcm5pbmctcGF0aC5zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIExvZ2dlciB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcclxuaW1wb3J0IHsgSW5qZWN0UmVwb3NpdG9yeSB9IGZyb20gJ0BuZXN0anMvdHlwZW9ybSc7XHJcbmltcG9ydCB7IFJlcG9zaXRvcnksIEluIH0gZnJvbSAndHlwZW9ybSc7XHJcbmltcG9ydCB7IExlYXJuaW5nUGF0aCwgTGVhcm5pbmdQYXRoU3RlcCwgTGVhcm5pbmdQYXRoU3RhdHVzLCBTdGVwVHlwZSB9IGZyb20gJy4uL2VudGl0aWVzL2xlYXJuaW5nLXBhdGguZW50aXR5JztcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uLy4uL3VzZXJzL2VudGl0aWVzL3VzZXIuZW50aXR5JztcclxuaW1wb3J0IHsgQ291cnNlIH0gZnJvbSAnLi4vLi4vY291cnNlcy9lbnRpdGllcy9jb3Vyc2UuZW50aXR5JztcclxuaW1wb3J0IHsgVXNlckludGVyYWN0aW9uLCBJbnRlcmFjdGlvblR5cGUgfSBmcm9tICcuLi9lbnRpdGllcy91c2VyLWludGVyYWN0aW9uLmVudGl0eSc7XHJcbmltcG9ydCB7IENyZWF0ZUxlYXJuaW5nUGF0aER0bywgVXBkYXRlTGVhcm5pbmdQYXRoRHRvLCBHZXRMZWFybmluZ1BhdGhzUXVlcnlEdG8gfSBmcm9tICcuLi9kdG8vbGVhcm5pbmctcGF0aC5kdG8nO1xyXG5pbXBvcnQgeyBSZWNvbW1lbmRhdGlvbkFuYWx5dGljc1NlcnZpY2UgfSBmcm9tICcuL3JlY29tbWVuZGF0aW9uLWFuYWx5dGljcy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ29udGVudFNpbWlsYXJpdHlTZXJ2aWNlIH0gZnJvbSAnLi9jb250ZW50LXNpbWlsYXJpdHkuc2VydmljZSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nR29hbCB7XHJcbiAgdGFyZ2V0U2tpbGxzOiBzdHJpbmdbXTtcclxuICBjdXJyZW50TGV2ZWw6ICdiZWdpbm5lcicgfCAnaW50ZXJtZWRpYXRlJyB8ICdhZHZhbmNlZCc7XHJcbiAgdGFyZ2V0TGV2ZWw6ICdiZWdpbm5lcicgfCAnaW50ZXJtZWRpYXRlJyB8ICdhZHZhbmNlZCc7XHJcbiAgdGltZWZyYW1lOiBudW1iZXI7IC8vIHdlZWtzXHJcbiAgcHJlZmVyZW5jZXM6IHtcclxuICAgIG1heENvdXJzZXNQZXJXZWVrPzogbnVtYmVyO1xyXG4gICAgcHJlZmVycmVkRGlmZmljdWx0eT86IHN0cmluZ1tdO1xyXG4gICAgcHJlZmVycmVkRHVyYXRpb24/OiBudW1iZXI7IC8vIG1pbnV0ZXNcclxuICAgIGV4Y2x1ZGVUb3BpY3M/OiBzdHJpbmdbXTtcclxuICAgIGluY2x1ZGVUb3BpY3M/OiBzdHJpbmdbXTtcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBhdGhHZW5lcmF0aW9uT3B0aW9ucyB7XHJcbiAgbWF4Q291cnNlczogbnVtYmVyO1xyXG4gIGluY2x1ZGVBc3Nlc3NtZW50czogYm9vbGVhbjtcclxuICBpbmNsdWRlUHJvamVjdHM6IGJvb2xlYW47XHJcbiAgYWRhcHRUb1Byb2dyZXNzOiBib29sZWFuO1xyXG4gIGNvbnNpZGVyUHJlcmVxdWlzaXRlczogYm9vbGVhbjtcclxufVxyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgTGVhcm5pbmdQYXRoU2VydmljZSB7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBsb2dnZXIgPSBuZXcgTG9nZ2VyKExlYXJuaW5nUGF0aFNlcnZpY2UubmFtZSk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgQEluamVjdFJlcG9zaXRvcnkoTGVhcm5pbmdQYXRoKVxyXG4gICAgcHJpdmF0ZSBsZWFybmluZ1BhdGhSZXBvc2l0b3J5OiBSZXBvc2l0b3J5PExlYXJuaW5nUGF0aD4sXHJcbiAgICBASW5qZWN0UmVwb3NpdG9yeShMZWFybmluZ1BhdGhTdGVwKVxyXG4gICAgcHJpdmF0ZSBzdGVwUmVwb3NpdG9yeTogUmVwb3NpdG9yeTxMZWFybmluZ1BhdGhTdGVwPixcclxuICAgIEBJbmplY3RSZXBvc2l0b3J5KFVzZXIpXHJcbiAgICBwcml2YXRlIHVzZXJSZXBvc2l0b3J5OiBSZXBvc2l0b3J5PFVzZXI+LFxyXG4gICAgQEluamVjdFJlcG9zaXRvcnkoQ291cnNlKVxyXG4gICAgcHJpdmF0ZSBjb3Vyc2VSZXBvc2l0b3J5OiBSZXBvc2l0b3J5PENvdXJzZT4sXHJcbiAgICBASW5qZWN0UmVwb3NpdG9yeShVc2VySW50ZXJhY3Rpb24pXHJcbiAgICBwcml2YXRlIGludGVyYWN0aW9uUmVwb3NpdG9yeTogUmVwb3NpdG9yeTxVc2VySW50ZXJhY3Rpb24+LFxyXG4gICAgcHJpdmF0ZSBhbmFseXRpY3NTZXJ2aWNlOiBSZWNvbW1lbmRhdGlvbkFuYWx5dGljc1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIHNpbWlsYXJpdHlTZXJ2aWNlOiBDb250ZW50U2ltaWxhcml0eVNlcnZpY2UsXHJcbiAgKSB7fVxyXG5cclxuICAvKipcclxuICAgKiBHZW5lcmF0ZSBhIHBlcnNvbmFsaXplZCBsZWFybmluZyBwYXRoIGZvciBhIHVzZXJcclxuICAgKi9cclxuICBhc3luYyBnZW5lcmF0ZUxlYXJuaW5nUGF0aChcclxuICAgIHVzZXJJZDogc3RyaW5nLFxyXG4gICAgZ29hbDogTGVhcm5pbmdHb2FsLFxyXG4gICAgb3B0aW9uczogUGF0aEdlbmVyYXRpb25PcHRpb25zID0ge1xyXG4gICAgICBtYXhDb3Vyc2VzOiAxMCxcclxuICAgICAgaW5jbHVkZUFzc2Vzc21lbnRzOiB0cnVlLFxyXG4gICAgICBpbmNsdWRlUHJvamVjdHM6IHRydWUsXHJcbiAgICAgIGFkYXB0VG9Qcm9ncmVzczogdHJ1ZSxcclxuICAgICAgY29uc2lkZXJQcmVyZXF1aXNpdGVzOiB0cnVlLFxyXG4gICAgfSxcclxuICApOiBQcm9taXNlPExlYXJuaW5nUGF0aD4ge1xyXG4gICAgdGhpcy5sb2dnZXIubG9nKGBHZW5lcmF0aW5nIGxlYXJuaW5nIHBhdGggZm9yIHVzZXIgJHt1c2VySWR9YCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQW5hbHl6ZSB1c2VyJ3MgY3VycmVudCBza2lsbHMgYW5kIHByb2dyZXNzXHJcbiAgICAgIGNvbnN0IHVzZXJQcm9maWxlID0gYXdhaXQgdGhpcy5hbmFseXplVXNlclByb2ZpbGUodXNlcklkKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEZpbmQgcmVsZXZhbnQgY291cnNlcyBmb3IgdGhlIHRhcmdldCBza2lsbHNcclxuICAgICAgY29uc3QgY2FuZGlkYXRlQ291cnNlcyA9IGF3YWl0IHRoaXMuZmluZFJlbGV2YW50Q291cnNlcyhnb2FsLnRhcmdldFNraWxscywgZ29hbC5wcmVmZXJlbmNlcyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBGaWx0ZXIgYW5kIHNlcXVlbmNlIGNvdXJzZXMgYmFzZWQgb24gcHJlcmVxdWlzaXRlcyBhbmQgZGlmZmljdWx0eVxyXG4gICAgICBjb25zdCBzZXF1ZW5jZWRDb3Vyc2VzID0gYXdhaXQgdGhpcy5zZXF1ZW5jZUNvdXJzZXMoY2FuZGlkYXRlQ291cnNlcywgdXNlclByb2ZpbGUsIGdvYWwsIG9wdGlvbnMpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ3JlYXRlIGxlYXJuaW5nIHBhdGggZW50aXR5XHJcbiAgICAgIGNvbnN0IGxlYXJuaW5nUGF0aCA9IGF3YWl0IHRoaXMuY3JlYXRlTGVhcm5pbmdQYXRoRW50aXR5KHVzZXJJZCwgZ29hbCwgc2VxdWVuY2VkQ291cnNlcyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBHZW5lcmF0ZSBsZWFybmluZyBwYXRoIHN0ZXBzXHJcbiAgICAgIGNvbnN0IHN0ZXBzID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUxlYXJuaW5nUGF0aFN0ZXBzKGxlYXJuaW5nUGF0aC5pZCwgc2VxdWVuY2VkQ291cnNlcywgZ29hbCwgb3B0aW9ucyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTYXZlIHRoZSBjb21wbGV0ZSBsZWFybmluZyBwYXRoXHJcbiAgICAgIGxlYXJuaW5nUGF0aC5zdGVwcyA9IHN0ZXBzO1xyXG4gICAgICBsZWFybmluZ1BhdGgudG90YWxTdGVwcyA9IHN0ZXBzLmxlbmd0aDtcclxuICAgICAgbGVhcm5pbmdQYXRoLmVzdGltYXRlZER1cmF0aW9uID0gdGhpcy5jYWxjdWxhdGVFc3RpbWF0ZWREdXJhdGlvbihzdGVwcyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzYXZlZFBhdGggPSBhd2FpdCB0aGlzLmxlYXJuaW5nUGF0aFJlcG9zaXRvcnkuc2F2ZShsZWFybmluZ1BhdGgpO1xyXG4gICAgICBcclxuICAgICAgLy8gVHJhY2sgYW5hbHl0aWNzXHJcbiAgICAgIGF3YWl0IHRoaXMuYW5hbHl0aWNzU2VydmljZS50cmFja1JlY29tbWVuZGF0aW9uR2VuZXJhdGlvbih7XHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIHJlY29tbWVuZGF0aW9uSWRzOiBbc2F2ZWRQYXRoLmlkXSxcclxuICAgICAgICBhbGdvcml0aG1WZXJzaW9uOiAnbGVhcm5pbmdfcGF0aF92MS4wJyxcclxuICAgICAgICBnZW5lcmF0aW9uVGltZU1zOiBEYXRlLm5vdygpLFxyXG4gICAgICAgIGNvbnRleHQ6IHsgZ29hbCwgb3B0aW9ucyB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMubG9nZ2VyLmxvZyhgR2VuZXJhdGVkIGxlYXJuaW5nIHBhdGggd2l0aCAke3N0ZXBzLmxlbmd0aH0gc3RlcHMgZm9yIHVzZXIgJHt1c2VySWR9YCk7XHJcbiAgICAgIHJldHVybiBzYXZlZFBhdGg7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEVycm9yIGdlbmVyYXRpbmcgbGVhcm5pbmcgcGF0aCBmb3IgdXNlciAke3VzZXJJZH06YCwgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBsZWFybmluZyBwYXRocyBmb3IgYSB1c2VyXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0VXNlckxlYXJuaW5nUGF0aHModXNlcklkOiBzdHJpbmcsIHF1ZXJ5OiBHZXRMZWFybmluZ1BhdGhzUXVlcnlEdG8pOiBQcm9taXNlPHtcclxuICAgIHBhdGhzOiBMZWFybmluZ1BhdGhbXTtcclxuICAgIHRvdGFsOiBudW1iZXI7XHJcbiAgfT4ge1xyXG4gICAgY29uc3QgcXVlcnlCdWlsZGVyID0gdGhpcy5sZWFybmluZ1BhdGhSZXBvc2l0b3J5XHJcbiAgICAgIC5jcmVhdGVRdWVyeUJ1aWxkZXIoJ3BhdGgnKVxyXG4gICAgICAubGVmdEpvaW5BbmRTZWxlY3QoJ3BhdGguc3RlcHMnLCAnc3RlcHMnKVxyXG4gICAgICAubGVmdEpvaW5BbmRTZWxlY3QoJ3N0ZXBzLmNvdXJzZScsICdjb3Vyc2UnKVxyXG4gICAgICAud2hlcmUoJ3BhdGgudXNlcklkID0gOnVzZXJJZCcsIHsgdXNlcklkIH0pO1xyXG5cclxuICAgIC8vIEFwcGx5IGZpbHRlcnNcclxuICAgIGlmIChxdWVyeS5zdGF0dXMpIHtcclxuICAgICAgcXVlcnlCdWlsZGVyLmFuZFdoZXJlKCdwYXRoLnN0YXR1cyA9IDpzdGF0dXMnLCB7IHN0YXR1czogcXVlcnkuc3RhdHVzIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChxdWVyeS5za2lsbEFyZWEpIHtcclxuICAgICAgcXVlcnlCdWlsZGVyLmFuZFdoZXJlKCdwYXRoLnRhcmdldFNraWxscyBAPiA6c2tpbGxBcmVhJywgeyBza2lsbEFyZWE6IFtxdWVyeS5za2lsbEFyZWFdIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFwcGx5IHNvcnRpbmdcclxuICAgIHF1ZXJ5QnVpbGRlci5vcmRlckJ5KGBwYXRoLiR7cXVlcnkuc29ydEJ5fWAsIHF1ZXJ5LnNvcnRPcmRlcik7XHJcblxyXG4gICAgLy8gR2V0IHRvdGFsIGNvdW50XHJcbiAgICBjb25zdCB0b3RhbCA9IGF3YWl0IHF1ZXJ5QnVpbGRlci5nZXRDb3VudCgpO1xyXG5cclxuICAgIC8vIEFwcGx5IHBhZ2luYXRpb25cclxuICAgIHF1ZXJ5QnVpbGRlci5za2lwKHF1ZXJ5Lm9mZnNldCkudGFrZShxdWVyeS5saW1pdCk7XHJcblxyXG4gICAgY29uc3QgcGF0aHMgPSBhd2FpdCBxdWVyeUJ1aWxkZXIuZ2V0TWFueSgpO1xyXG5cclxuICAgIHJldHVybiB7IHBhdGhzLCB0b3RhbCB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIGxlYXJuaW5nIHBhdGggcHJvZ3Jlc3NcclxuICAgKi9cclxuICBhc3luYyB1cGRhdGVQcm9ncmVzcyhwYXRoSWQ6IHN0cmluZywgc3RlcElkOiBzdHJpbmcsIGNvbXBsZXRlZDogYm9vbGVhbik6IFByb21pc2U8TGVhcm5pbmdQYXRoPiB7XHJcbiAgICBjb25zdCBwYXRoID0gYXdhaXQgdGhpcy5sZWFybmluZ1BhdGhSZXBvc2l0b3J5LmZpbmRPbmUoe1xyXG4gICAgICB3aGVyZTogeyBpZDogcGF0aElkIH0sXHJcbiAgICAgIHJlbGF0aW9uczogWydzdGVwcyddLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCFwYXRoKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTGVhcm5pbmcgcGF0aCAke3BhdGhJZH0gbm90IGZvdW5kYCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3RlcCA9IHBhdGguc3RlcHMuZmluZChzID0+IHMuaWQgPT09IHN0ZXBJZCk7XHJcbiAgICBpZiAoIXN0ZXApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTdGVwICR7c3RlcElkfSBub3QgZm91bmQgaW4gbGVhcm5pbmcgcGF0aGApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBzdGVwIGNvbXBsZXRpb25cclxuICAgIHN0ZXAuY29tcGxldGVkID0gY29tcGxldGVkO1xyXG4gICAgc3RlcC5jb21wbGV0ZWRBdCA9IGNvbXBsZXRlZCA/IG5ldyBEYXRlKCkgOiBudWxsO1xyXG4gICAgYXdhaXQgdGhpcy5zdGVwUmVwb3NpdG9yeS5zYXZlKHN0ZXApO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBwYXRoIHByb2dyZXNzXHJcbiAgICBjb25zdCBjb21wbGV0ZWRTdGVwcyA9IHBhdGguc3RlcHMuZmlsdGVyKHMgPT4gcy5jb21wbGV0ZWQpLmxlbmd0aDtcclxuICAgIHBhdGguY29tcGxldGVkU3RlcHMgPSBjb21wbGV0ZWRTdGVwcztcclxuICAgIHBhdGgucHJvZ3Jlc3NQZXJjZW50YWdlID0gKGNvbXBsZXRlZFN0ZXBzIC8gcGF0aC50b3RhbFN0ZXBzKSAqIDEwMDtcclxuXHJcbiAgICAvLyBVcGRhdGUgcGF0aCBzdGF0dXNcclxuICAgIGlmIChwYXRoLnByb2dyZXNzUGVyY2VudGFnZSA9PT0gMTAwKSB7XHJcbiAgICAgIHBhdGguc3RhdHVzID0gTGVhcm5pbmdQYXRoU3RhdHVzLkNPTVBMRVRFRDtcclxuICAgICAgcGF0aC5jb21wbGV0ZWRBdCA9IG5ldyBEYXRlKCk7XHJcbiAgICB9IGVsc2UgaWYgKHBhdGgucHJvZ3Jlc3NQZXJjZW50YWdlID4gMCAmJiBwYXRoLnN0YXR1cyA9PT0gTGVhcm5pbmdQYXRoU3RhdHVzLk5PVF9TVEFSVEVEKSB7XHJcbiAgICAgIHBhdGguc3RhdHVzID0gTGVhcm5pbmdQYXRoU3RhdHVzLklOX1BST0dSRVNTO1xyXG4gICAgICBwYXRoLnN0YXJ0ZWRBdCA9IG5ldyBEYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMubGVhcm5pbmdQYXRoUmVwb3NpdG9yeS5zYXZlKHBhdGgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRhcHQgbGVhcm5pbmcgcGF0aCBiYXNlZCBvbiB1c2VyIHByb2dyZXNzIGFuZCBwZXJmb3JtYW5jZVxyXG4gICAqL1xyXG4gIGFzeW5jIGFkYXB0TGVhcm5pbmdQYXRoKHBhdGhJZDogc3RyaW5nKTogUHJvbWlzZTxMZWFybmluZ1BhdGg+IHtcclxuICAgIGNvbnN0IHBhdGggPSBhd2FpdCB0aGlzLmxlYXJuaW5nUGF0aFJlcG9zaXRvcnkuZmluZE9uZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiBwYXRoSWQgfSxcclxuICAgICAgcmVsYXRpb25zOiBbJ3N0ZXBzJywgJ3N0ZXBzLmNvdXJzZScsICd1c2VyJ10sXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXBhdGgpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBMZWFybmluZyBwYXRoICR7cGF0aElkfSBub3QgZm91bmRgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmxvZ2dlci5sb2coYEFkYXB0aW5nIGxlYXJuaW5nIHBhdGggJHtwYXRoSWR9IGJhc2VkIG9uIHVzZXIgcHJvZ3Jlc3NgKTtcclxuXHJcbiAgICAvLyBBbmFseXplIHVzZXIncyByZWNlbnQgcGVyZm9ybWFuY2VcclxuICAgIGNvbnN0IHVzZXJQZXJmb3JtYW5jZSA9IGF3YWl0IHRoaXMuYW5hbHl6ZVVzZXJQZXJmb3JtYW5jZShwYXRoLnVzZXJJZCwgcGF0aC5zdGVwcyk7XHJcbiAgICBcclxuICAgIC8vIElkZW50aWZ5IGFyZWFzIHdoZXJlIHVzZXIgaXMgc3RydWdnbGluZyBvciBleGNlbGxpbmdcclxuICAgIGNvbnN0IGFkYXB0YXRpb25zID0gYXdhaXQgdGhpcy5pZGVudGlmeUFkYXB0YXRpb25zKHBhdGgsIHVzZXJQZXJmb3JtYW5jZSk7XHJcbiAgICBcclxuICAgIC8vIEFwcGx5IGFkYXB0YXRpb25zXHJcbiAgICBpZiAoYWRhcHRhdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBhd2FpdCB0aGlzLmFwcGx5QWRhcHRhdGlvbnMocGF0aCwgYWRhcHRhdGlvbnMpO1xyXG4gICAgICBcclxuICAgICAgLy8gVXBkYXRlIHBhdGggbWV0YWRhdGFcclxuICAgICAgcGF0aC5tZXRhZGF0YSA9IHtcclxuICAgICAgICAuLi5wYXRoLm1ldGFkYXRhLFxyXG4gICAgICAgIGFkYXB0YXRpb25zOiBhZGFwdGF0aW9ucy5tYXAoYSA9PiAoe1xyXG4gICAgICAgICAgdHlwZTogYS50eXBlLFxyXG4gICAgICAgICAgcmVhc29uOiBhLnJlYXNvbixcclxuICAgICAgICAgIGFwcGxpZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB9KSksXHJcbiAgICAgICAgbGFzdEFkYXB0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIGF3YWl0IHRoaXMubGVhcm5pbmdQYXRoUmVwb3NpdG9yeS5zYXZlKHBhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwYXRoO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGxlYXJuaW5nIHBhdGggcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIHVzZXIncyBpbnRlcmVzdHMgYW5kIGdvYWxzXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0UGF0aFJlY29tbWVuZGF0aW9ucyh1c2VySWQ6IHN0cmluZywgbGltaXQ6IG51bWJlciA9IDUpOiBQcm9taXNlPHtcclxuICAgIHNraWxsQmFzZWRQYXRoczogTGVhcm5pbmdHb2FsW107XHJcbiAgICB0cmVuZGluZ1BhdGhzOiBMZWFybmluZ0dvYWxbXTtcclxuICAgIGNvbnRpbnVhdGlvblBhdGhzOiBMZWFybmluZ0dvYWxbXTtcclxuICB9PiB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy51c2VyUmVwb3NpdG9yeS5maW5kT25lKHsgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9IH0pO1xyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVXNlciAke3VzZXJJZH0gbm90IGZvdW5kYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IHVzZXIncyBpbnRlcmFjdGlvbiBoaXN0b3J5XHJcbiAgICBjb25zdCBpbnRlcmFjdGlvbnMgPSBhd2FpdCB0aGlzLmludGVyYWN0aW9uUmVwb3NpdG9yeS5maW5kKHtcclxuICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXHJcbiAgICAgIG9yZGVyOiB7IGNyZWF0ZWRBdDogJ0RFU0MnIH0sXHJcbiAgICAgIHRha2U6IDEwMCxcclxuICAgICAgcmVsYXRpb25zOiBbJ2NvdXJzZSddLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgc2tpbGwtYmFzZWQgcGF0aCByZWNvbW1lbmRhdGlvbnNcclxuICAgIGNvbnN0IHNraWxsQmFzZWRQYXRocyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVTa2lsbEJhc2VkUGF0aFJlY29tbWVuZGF0aW9ucyh1c2VyLCBpbnRlcmFjdGlvbnMsIGxpbWl0KTtcclxuICAgIFxyXG4gICAgLy8gR2VuZXJhdGUgdHJlbmRpbmcgcGF0aCByZWNvbW1lbmRhdGlvbnNcclxuICAgIGNvbnN0IHRyZW5kaW5nUGF0aHMgPSBhd2FpdCB0aGlzLmdlbmVyYXRlVHJlbmRpbmdQYXRoUmVjb21tZW5kYXRpb25zKGxpbWl0KTtcclxuICAgIFxyXG4gICAgLy8gR2VuZXJhdGUgY29udGludWF0aW9uIHBhdGggcmVjb21tZW5kYXRpb25zXHJcbiAgICBjb25zdCBjb250aW51YXRpb25QYXRocyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVDb250aW51YXRpb25QYXRoUmVjb21tZW5kYXRpb25zKHVzZXIsIGludGVyYWN0aW9ucywgbGltaXQpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHNraWxsQmFzZWRQYXRocyxcclxuICAgICAgdHJlbmRpbmdQYXRocyxcclxuICAgICAgY29udGludWF0aW9uUGF0aHMsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQW5hbHl6ZSB1c2VyJ3MgY3VycmVudCBza2lsbHMgYW5kIGxlYXJuaW5nIHByb2ZpbGVcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGFuYWx5emVVc2VyUHJvZmlsZSh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8e1xyXG4gICAgY3VycmVudFNraWxsczogc3RyaW5nW107XHJcbiAgICBza2lsbExldmVsczogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcclxuICAgIGxlYXJuaW5nU3R5bGU6IHN0cmluZztcclxuICAgIGNvbXBsZXRpb25SYXRlOiBudW1iZXI7XHJcbiAgICBhdmVyYWdlU2Vzc2lvblRpbWU6IG51bWJlcjtcclxuICAgIHByZWZlcnJlZERpZmZpY3VsdHk6IHN0cmluZztcclxuICB9PiB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy51c2VyUmVwb3NpdG9yeS5maW5kT25lKHsgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9IH0pO1xyXG4gICAgY29uc3QgaW50ZXJhY3Rpb25zID0gYXdhaXQgdGhpcy5pbnRlcmFjdGlvblJlcG9zaXRvcnkuZmluZCh7XHJcbiAgICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxyXG4gICAgICBvcmRlcjogeyBjcmVhdGVkQXQ6ICdERVNDJyB9LFxyXG4gICAgICB0YWtlOiAyMDAsXHJcbiAgICAgIHJlbGF0aW9uczogWydjb3Vyc2UnXSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEV4dHJhY3QgY3VycmVudCBza2lsbHMgZnJvbSBjb21wbGV0ZWQgY291cnNlc1xyXG4gICAgY29uc3QgY3VycmVudFNraWxscyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgY29uc3Qgc2tpbGxMZXZlbHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcclxuICAgIFxyXG4gICAgaW50ZXJhY3Rpb25zXHJcbiAgICAgIC5maWx0ZXIoaSA9PiBpLmludGVyYWN0aW9uVHlwZSA9PT0gSW50ZXJhY3Rpb25UeXBlLkNPTVBMRVRFICYmIGkuY291cnNlKVxyXG4gICAgICAuZm9yRWFjaChpID0+IHtcclxuICAgICAgICBpZiAoaS5jb3Vyc2U/LnNraWxscykge1xyXG4gICAgICAgICAgaS5jb3Vyc2Uuc2tpbGxzLmZvckVhY2goc2tpbGwgPT4ge1xyXG4gICAgICAgICAgICBjdXJyZW50U2tpbGxzLmFkZChza2lsbCk7XHJcbiAgICAgICAgICAgIHNraWxsTGV2ZWxzW3NraWxsXSA9IChza2lsbExldmVsc1tza2lsbF0gfHwgMCkgKyAxO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgY29tcGxldGlvbiByYXRlXHJcbiAgICBjb25zdCBlbnJvbGxtZW50cyA9IGludGVyYWN0aW9ucy5maWx0ZXIoaSA9PiBpLmludGVyYWN0aW9uVHlwZSA9PT0gSW50ZXJhY3Rpb25UeXBlLkVOUk9MTCkubGVuZ3RoO1xyXG4gICAgY29uc3QgY29tcGxldGlvbnMgPSBpbnRlcmFjdGlvbnMuZmlsdGVyKGkgPT4gaS5pbnRlcmFjdGlvblR5cGUgPT09IEludGVyYWN0aW9uVHlwZS5DT01QTEVURSkubGVuZ3RoO1xyXG4gICAgY29uc3QgY29tcGxldGlvblJhdGUgPSBlbnJvbGxtZW50cyA+IDAgPyBjb21wbGV0aW9ucyAvIGVucm9sbG1lbnRzIDogMDtcclxuXHJcbiAgICAvLyBBbmFseXplIGxlYXJuaW5nIHN0eWxlIGJhc2VkIG9uIGludGVyYWN0aW9uIHBhdHRlcm5zXHJcbiAgICBjb25zdCBsZWFybmluZ1N0eWxlID0gdGhpcy5kZXRlcm1pbmVMZWFybmluZ1N0eWxlKGludGVyYWN0aW9ucyk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIGF2ZXJhZ2Ugc2Vzc2lvbiB0aW1lIChwbGFjZWhvbGRlcilcclxuICAgIGNvbnN0IGF2ZXJhZ2VTZXNzaW9uVGltZSA9IDQ1OyAvLyBtaW51dGVzXHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIHByZWZlcnJlZCBkaWZmaWN1bHR5XHJcbiAgICBjb25zdCBwcmVmZXJyZWREaWZmaWN1bHR5ID0gdGhpcy5kZXRlcm1pbmVQcmVmZXJyZWREaWZmaWN1bHR5KGludGVyYWN0aW9ucyk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY3VycmVudFNraWxsczogQXJyYXkuZnJvbShjdXJyZW50U2tpbGxzKSxcclxuICAgICAgc2tpbGxMZXZlbHMsXHJcbiAgICAgIGxlYXJuaW5nU3R5bGUsXHJcbiAgICAgIGNvbXBsZXRpb25SYXRlLFxyXG4gICAgICBhdmVyYWdlU2Vzc2lvblRpbWUsXHJcbiAgICAgIHByZWZlcnJlZERpZmZpY3VsdHksXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmluZCBjb3Vyc2VzIHJlbGV2YW50IHRvIHRhcmdldCBza2lsbHNcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGZpbmRSZWxldmFudENvdXJzZXMoXHJcbiAgICB0YXJnZXRTa2lsbHM6IHN0cmluZ1tdLFxyXG4gICAgcHJlZmVyZW5jZXM6IExlYXJuaW5nR29hbFsncHJlZmVyZW5jZXMnXSxcclxuICApOiBQcm9taXNlPENvdXJzZVtdPiB7XHJcbiAgICBjb25zdCBxdWVyeUJ1aWxkZXIgPSB0aGlzLmNvdXJzZVJlcG9zaXRvcnkuY3JlYXRlUXVlcnlCdWlsZGVyKCdjb3Vyc2UnKVxyXG4gICAgICAud2hlcmUoJ2NvdXJzZS5pc0FjdGl2ZSA9IDppc0FjdGl2ZScsIHsgaXNBY3RpdmU6IHRydWUgfSk7XHJcblxyXG4gICAgLy8gRmlsdGVyIGJ5IHNraWxsc1xyXG4gICAgaWYgKHRhcmdldFNraWxscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHF1ZXJ5QnVpbGRlci5hbmRXaGVyZSgnY291cnNlLnNraWxscyAmJiA6dGFyZ2V0U2tpbGxzJywgeyB0YXJnZXRTa2lsbHMgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXBwbHkgcHJlZmVyZW5jZXNcclxuICAgIGlmIChwcmVmZXJlbmNlcy5wcmVmZXJyZWREaWZmaWN1bHR5Py5sZW5ndGgpIHtcclxuICAgICAgcXVlcnlCdWlsZGVyLmFuZFdoZXJlKCdjb3Vyc2UuZGlmZmljdWx0eSBJTiAoOi4uLmRpZmZpY3VsdGllcyknLCB7XHJcbiAgICAgICAgZGlmZmljdWx0aWVzOiBwcmVmZXJlbmNlcy5wcmVmZXJyZWREaWZmaWN1bHR5LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocHJlZmVyZW5jZXMucHJlZmVycmVkRHVyYXRpb24pIHtcclxuICAgICAgcXVlcnlCdWlsZGVyLmFuZFdoZXJlKCdjb3Vyc2UuZHVyYXRpb24gPD0gOm1heER1cmF0aW9uJywge1xyXG4gICAgICAgIG1heER1cmF0aW9uOiBwcmVmZXJlbmNlcy5wcmVmZXJyZWREdXJhdGlvbiAqIDEuNSwgLy8gQWxsb3cgNTAlIGZsZXhpYmlsaXR5XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChwcmVmZXJlbmNlcy5leGNsdWRlVG9waWNzPy5sZW5ndGgpIHtcclxuICAgICAgcXVlcnlCdWlsZGVyLmFuZFdoZXJlKCdOT1QgKGNvdXJzZS50YWdzICYmIDpleGNsdWRlVG9waWNzKScsIHtcclxuICAgICAgICBleGNsdWRlVG9waWNzOiBwcmVmZXJlbmNlcy5leGNsdWRlVG9waWNzLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocHJlZmVyZW5jZXMuaW5jbHVkZVRvcGljcz8ubGVuZ3RoKSB7XHJcbiAgICAgIHF1ZXJ5QnVpbGRlci5hbmRXaGVyZSgnY291cnNlLnRhZ3MgJiYgOmluY2x1ZGVUb3BpY3MnLCB7XHJcbiAgICAgICAgaW5jbHVkZVRvcGljczogcHJlZmVyZW5jZXMuaW5jbHVkZVRvcGljcyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT3JkZXIgYnkgcmF0aW5nIGFuZCByZWxldmFuY2VcclxuICAgIHF1ZXJ5QnVpbGRlci5vcmRlckJ5KCdjb3Vyc2UucmF0aW5nJywgJ0RFU0MnKTtcclxuXHJcbiAgICByZXR1cm4gYXdhaXQgcXVlcnlCdWlsZGVyLmdldE1hbnkoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNlcXVlbmNlIGNvdXJzZXMgYmFzZWQgb24gcHJlcmVxdWlzaXRlcyBhbmQgZGlmZmljdWx0eSBwcm9ncmVzc2lvblxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgc2VxdWVuY2VDb3Vyc2VzKFxyXG4gICAgY291cnNlczogQ291cnNlW10sXHJcbiAgICB1c2VyUHJvZmlsZTogYW55LFxyXG4gICAgZ29hbDogTGVhcm5pbmdHb2FsLFxyXG4gICAgb3B0aW9uczogUGF0aEdlbmVyYXRpb25PcHRpb25zLFxyXG4gICk6IFByb21pc2U8Q291cnNlW10+IHtcclxuICAgIC8vIEdyb3VwIGNvdXJzZXMgYnkgZGlmZmljdWx0eSBsZXZlbFxyXG4gICAgY29uc3QgY291cnNlc0J5RGlmZmljdWx0eSA9IHtcclxuICAgICAgYmVnaW5uZXI6IGNvdXJzZXMuZmlsdGVyKGMgPT4gYy5kaWZmaWN1bHR5ID09PSAnYmVnaW5uZXInKSxcclxuICAgICAgaW50ZXJtZWRpYXRlOiBjb3Vyc2VzLmZpbHRlcihjID0+IGMuZGlmZmljdWx0eSA9PT0gJ2ludGVybWVkaWF0ZScpLFxyXG4gICAgICBhZHZhbmNlZDogY291cnNlcy5maWx0ZXIoYyA9PiBjLmRpZmZpY3VsdHkgPT09ICdhZHZhbmNlZCcpLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBzZXF1ZW5jZWRDb3Vyc2VzOiBDb3Vyc2VbXSA9IFtdO1xyXG4gICAgY29uc3QgdXNlckN1cnJlbnRMZXZlbCA9IGdvYWwuY3VycmVudExldmVsO1xyXG4gICAgY29uc3QgdXNlclRhcmdldExldmVsID0gZ29hbC50YXJnZXRMZXZlbDtcclxuXHJcbiAgICAvLyBTdGFydCB3aXRoIGFwcHJvcHJpYXRlIGRpZmZpY3VsdHkgbGV2ZWxcclxuICAgIGxldCBjdXJyZW50RGlmZmljdWx0eSA9IHVzZXJDdXJyZW50TGV2ZWw7XHJcbiAgICBcclxuICAgIC8vIEFkZCBjb3Vyc2VzIHByb2dyZXNzaXZlbHlcclxuICAgIHdoaWxlIChzZXF1ZW5jZWRDb3Vyc2VzLmxlbmd0aCA8IG9wdGlvbnMubWF4Q291cnNlcyAmJiBjdXJyZW50RGlmZmljdWx0eSkge1xyXG4gICAgICBjb25zdCBhdmFpbGFibGVDb3Vyc2VzID0gY291cnNlc0J5RGlmZmljdWx0eVtjdXJyZW50RGlmZmljdWx0eV07XHJcbiAgICAgIFxyXG4gICAgICBpZiAoYXZhaWxhYmxlQ291cnNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gU2VsZWN0IGJlc3QgY291cnNlcyBmb3IgY3VycmVudCBsZXZlbFxyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkQ291cnNlcyA9IHRoaXMuc2VsZWN0QmVzdENvdXJzZXNGb3JMZXZlbChcclxuICAgICAgICAgIGF2YWlsYWJsZUNvdXJzZXMsXHJcbiAgICAgICAgICB1c2VyUHJvZmlsZSxcclxuICAgICAgICAgIGdvYWwsXHJcbiAgICAgICAgICBNYXRoLm1pbigzLCBvcHRpb25zLm1heENvdXJzZXMgLSBzZXF1ZW5jZWRDb3Vyc2VzLmxlbmd0aClcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHNlcXVlbmNlZENvdXJzZXMucHVzaCguLi5zZWxlY3RlZENvdXJzZXMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBQcm9ncmVzcyB0byBuZXh0IGRpZmZpY3VsdHkgbGV2ZWxcclxuICAgICAgaWYgKGN1cnJlbnREaWZmaWN1bHR5ID09PSAnYmVnaW5uZXInICYmIHVzZXJUYXJnZXRMZXZlbCAhPT0gJ2JlZ2lubmVyJykge1xyXG4gICAgICAgIGN1cnJlbnREaWZmaWN1bHR5ID0gJ2ludGVybWVkaWF0ZSc7XHJcbiAgICAgIH0gZWxzZSBpZiAoY3VycmVudERpZmZpY3VsdHkgPT09ICdpbnRlcm1lZGlhdGUnICYmIHVzZXJUYXJnZXRMZXZlbCA9PT0gJ2FkdmFuY2VkJykge1xyXG4gICAgICAgIGN1cnJlbnREaWZmaWN1bHR5ID0gJ2FkdmFuY2VkJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzZXF1ZW5jZWRDb3Vyc2VzLnNsaWNlKDAsIG9wdGlvbnMubWF4Q291cnNlcyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZWxlY3QgYmVzdCBjb3Vyc2VzIGZvciBhIHNwZWNpZmljIGRpZmZpY3VsdHkgbGV2ZWxcclxuICAgKi9cclxuICBwcml2YXRlIHNlbGVjdEJlc3RDb3Vyc2VzRm9yTGV2ZWwoXHJcbiAgICBjb3Vyc2VzOiBDb3Vyc2VbXSxcclxuICAgIHVzZXJQcm9maWxlOiBhbnksXHJcbiAgICBnb2FsOiBMZWFybmluZ0dvYWwsXHJcbiAgICBtYXhDb3Vyc2VzOiBudW1iZXIsXHJcbiAgKTogQ291cnNlW10ge1xyXG4gICAgLy8gU2NvcmUgY291cnNlcyBiYXNlZCBvbiByZWxldmFuY2UgdG8gdXNlcidzIGdvYWxzIGFuZCBwcm9maWxlXHJcbiAgICBjb25zdCBzY29yZWRDb3Vyc2VzID0gY291cnNlcy5tYXAoY291cnNlID0+ICh7XHJcbiAgICAgIGNvdXJzZSxcclxuICAgICAgc2NvcmU6IHRoaXMuY2FsY3VsYXRlQ291cnNlUmVsZXZhbmNlU2NvcmUoY291cnNlLCB1c2VyUHJvZmlsZSwgZ29hbCksXHJcbiAgICB9KSk7XHJcblxyXG4gICAgLy8gU29ydCBieSBzY29yZSBhbmQgcmV0dXJuIHRvcCBjb3Vyc2VzXHJcbiAgICByZXR1cm4gc2NvcmVkQ291cnNlc1xyXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpXHJcbiAgICAgIC5zbGljZSgwLCBtYXhDb3Vyc2VzKVxyXG4gICAgICAubWFwKHNjID0+IHNjLmNvdXJzZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWxjdWxhdGUgY291cnNlIHJlbGV2YW5jZSBzY29yZSBmb3IgbGVhcm5pbmcgcGF0aFxyXG4gICAqL1xyXG4gIHByaXZhdGUgY2FsY3VsYXRlQ291cnNlUmVsZXZhbmNlU2NvcmUoXHJcbiAgICBjb3Vyc2U6IENvdXJzZSxcclxuICAgIHVzZXJQcm9maWxlOiBhbnksXHJcbiAgICBnb2FsOiBMZWFybmluZ0dvYWwsXHJcbiAgKTogbnVtYmVyIHtcclxuICAgIGxldCBzY29yZSA9IDA7XHJcblxyXG4gICAgLy8gU2tpbGwgYWxpZ25tZW50ICg0MCUgd2VpZ2h0KVxyXG4gICAgY29uc3Qgc2tpbGxPdmVybGFwID0gY291cnNlLnNraWxscz8uZmlsdGVyKHNraWxsID0+IFxyXG4gICAgICBnb2FsLnRhcmdldFNraWxscy5pbmNsdWRlcyhza2lsbClcclxuICAgICkubGVuZ3RoIHx8IDA7XHJcbiAgICBjb25zdCBza2lsbFNjb3JlID0gc2tpbGxPdmVybGFwIC8gTWF0aC5tYXgoZ29hbC50YXJnZXRTa2lsbHMubGVuZ3RoLCAxKTtcclxuICAgIHNjb3JlICs9IHNraWxsU2NvcmUgKiAwLjQ7XHJcblxyXG4gICAgLy8gQ291cnNlIHJhdGluZyAoMjAlIHdlaWdodClcclxuICAgIGNvbnN0IHJhdGluZ1Njb3JlID0gKGNvdXJzZS5yYXRpbmcgfHwgMCkgLyA1O1xyXG4gICAgc2NvcmUgKz0gcmF0aW5nU2NvcmUgKiAwLjI7XHJcblxyXG4gICAgLy8gVXNlcidzIGN1cnJlbnQgc2tpbGwgbGV2ZWwgYWxpZ25tZW50ICgyMCUgd2VpZ2h0KVxyXG4gICAgY29uc3QgdXNlckhhc1ByZXJlcXMgPSBjb3Vyc2UucHJlcmVxdWlzaXRlcz8uZXZlcnkocHJlcmVxID0+IFxyXG4gICAgICB1c2VyUHJvZmlsZS5jdXJyZW50U2tpbGxzLmluY2x1ZGVzKHByZXJlcSlcclxuICAgICkgPz8gdHJ1ZTtcclxuICAgIHNjb3JlICs9IHVzZXJIYXNQcmVyZXFzID8gMC4yIDogMDtcclxuXHJcbiAgICAvLyBEdXJhdGlvbiBwcmVmZXJlbmNlICgxMCUgd2VpZ2h0KVxyXG4gICAgaWYgKGdvYWwucHJlZmVyZW5jZXMucHJlZmVycmVkRHVyYXRpb24pIHtcclxuICAgICAgY29uc3QgZHVyYXRpb25EaWZmID0gTWF0aC5hYnMoKGNvdXJzZS5kdXJhdGlvbiB8fCAwKSAtIGdvYWwucHJlZmVyZW5jZXMucHJlZmVycmVkRHVyYXRpb24pO1xyXG4gICAgICBjb25zdCBkdXJhdGlvblNjb3JlID0gTWF0aC5tYXgoMCwgMSAtIGR1cmF0aW9uRGlmZiAvIGdvYWwucHJlZmVyZW5jZXMucHJlZmVycmVkRHVyYXRpb24pO1xyXG4gICAgICBzY29yZSArPSBkdXJhdGlvblNjb3JlICogMC4xO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFBvcHVsYXJpdHkvZW5yb2xsbWVudCBjb3VudCAoMTAlIHdlaWdodClcclxuICAgIGNvbnN0IHBvcHVsYXJpdHlTY29yZSA9IE1hdGgubWluKChjb3Vyc2UuZW5yb2xsbWVudENvdW50IHx8IDApIC8gMTAwMCwgMSk7XHJcbiAgICBzY29yZSArPSBwb3B1bGFyaXR5U2NvcmUgKiAwLjE7XHJcblxyXG4gICAgcmV0dXJuIHNjb3JlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGxlYXJuaW5nIHBhdGggZW50aXR5XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVMZWFybmluZ1BhdGhFbnRpdHkoXHJcbiAgICB1c2VySWQ6IHN0cmluZyxcclxuICAgIGdvYWw6IExlYXJuaW5nR29hbCxcclxuICAgIGNvdXJzZXM6IENvdXJzZVtdLFxyXG4gICk6IFByb21pc2U8TGVhcm5pbmdQYXRoPiB7XHJcbiAgICBjb25zdCBsZWFybmluZ1BhdGggPSBuZXcgTGVhcm5pbmdQYXRoKCk7XHJcbiAgICBsZWFybmluZ1BhdGgudXNlcklkID0gdXNlcklkO1xyXG4gICAgbGVhcm5pbmdQYXRoLnRpdGxlID0gYCR7Z29hbC50YXJnZXRTa2lsbHMuc2xpY2UoMCwgMikuam9pbignICYgJyl9IExlYXJuaW5nIFBhdGhgO1xyXG4gICAgbGVhcm5pbmdQYXRoLmRlc2NyaXB0aW9uID0gYFBlcnNvbmFsaXplZCBsZWFybmluZyBwYXRoIHRvIG1hc3RlciAke2dvYWwudGFyZ2V0U2tpbGxzLmpvaW4oJywgJyl9YDtcclxuICAgIGxlYXJuaW5nUGF0aC50YXJnZXRTa2lsbHMgPSBnb2FsLnRhcmdldFNraWxscztcclxuICAgIGxlYXJuaW5nUGF0aC5jdXJyZW50TGV2ZWwgPSBnb2FsLmN1cnJlbnRMZXZlbDtcclxuICAgIGxlYXJuaW5nUGF0aC50YXJnZXRMZXZlbCA9IGdvYWwudGFyZ2V0TGV2ZWw7XHJcbiAgICBsZWFybmluZ1BhdGguc3RhdHVzID0gTGVhcm5pbmdQYXRoU3RhdHVzLk5PVF9TVEFSVEVEO1xyXG4gICAgbGVhcm5pbmdQYXRoLnRvdGFsU3RlcHMgPSAwOyAvLyBXaWxsIGJlIHVwZGF0ZWQgYWZ0ZXIgc3RlcHMgYXJlIGNyZWF0ZWRcclxuICAgIGxlYXJuaW5nUGF0aC5jb21wbGV0ZWRTdGVwcyA9IDA7XHJcbiAgICBsZWFybmluZ1BhdGgucHJvZ3Jlc3NQZXJjZW50YWdlID0gMDtcclxuICAgIGxlYXJuaW5nUGF0aC5lc3RpbWF0ZWREdXJhdGlvbiA9IDA7IC8vIFdpbGwgYmUgY2FsY3VsYXRlZCBhZnRlciBzdGVwcyBhcmUgY3JlYXRlZFxyXG4gICAgbGVhcm5pbmdQYXRoLm1ldGFkYXRhID0ge1xyXG4gICAgICBnZW5lcmF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgZ29hbCxcclxuICAgICAgYWxnb3JpdGhtVmVyc2lvbjogJ3YxLjAnLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5sZWFybmluZ1BhdGhSZXBvc2l0b3J5LnNhdmUobGVhcm5pbmdQYXRoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlIGxlYXJuaW5nIHBhdGggc3RlcHNcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlTGVhcm5pbmdQYXRoU3RlcHMoXHJcbiAgICBwYXRoSWQ6IHN0cmluZyxcclxuICAgIGNvdXJzZXM6IENvdXJzZVtdLFxyXG4gICAgZ29hbDogTGVhcm5pbmdHb2FsLFxyXG4gICAgb3B0aW9uczogUGF0aEdlbmVyYXRpb25PcHRpb25zLFxyXG4gICk6IFByb21pc2U8TGVhcm5pbmdQYXRoU3RlcFtdPiB7XHJcbiAgICBjb25zdCBzdGVwczogTGVhcm5pbmdQYXRoU3RlcFtdID0gW107XHJcbiAgICBsZXQgc3RlcE9yZGVyID0gMTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGNvdXJzZSBvZiBjb3Vyc2VzKSB7XHJcbiAgICAgIC8vIEFkZCBjb3Vyc2Ugc3RlcFxyXG4gICAgICBjb25zdCBjb3Vyc2VTdGVwID0gbmV3IExlYXJuaW5nUGF0aFN0ZXAoKTtcclxuICAgICAgY291cnNlU3RlcC5sZWFybmluZ1BhdGhJZCA9IHBhdGhJZDtcclxuICAgICAgY291cnNlU3RlcC5jb3Vyc2VJZCA9IGNvdXJzZS5pZDtcclxuICAgICAgY291cnNlU3RlcC5zdGVwVHlwZSA9IFN0ZXBUeXBlLkNPVVJTRTtcclxuICAgICAgY291cnNlU3RlcC50aXRsZSA9IGNvdXJzZS50aXRsZTtcclxuICAgICAgY291cnNlU3RlcC5kZXNjcmlwdGlvbiA9IGNvdXJzZS5kZXNjcmlwdGlvbjtcclxuICAgICAgY291cnNlU3RlcC5zdGVwT3JkZXIgPSBzdGVwT3JkZXIrKztcclxuICAgICAgY291cnNlU3RlcC5lc3RpbWF0ZWREdXJhdGlvbiA9IGNvdXJzZS5kdXJhdGlvbiB8fCA2MDtcclxuICAgICAgY291cnNlU3RlcC5jb21wbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgY291cnNlU3RlcC5tZXRhZGF0YSA9IHtcclxuICAgICAgICBjb3Vyc2VJZDogY291cnNlLmlkLFxyXG4gICAgICAgIGRpZmZpY3VsdHk6IGNvdXJzZS5kaWZmaWN1bHR5LFxyXG4gICAgICAgIHNraWxsczogY291cnNlLnNraWxscyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHN0ZXBzLnB1c2goY291cnNlU3RlcCk7XHJcblxyXG4gICAgICAvLyBBZGQgYXNzZXNzbWVudCBzdGVwIGlmIGVuYWJsZWRcclxuICAgICAgaWYgKG9wdGlvbnMuaW5jbHVkZUFzc2Vzc21lbnRzICYmIHN0ZXBPcmRlciA8PSBjb3Vyc2VzLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IGFzc2Vzc21lbnRTdGVwID0gbmV3IExlYXJuaW5nUGF0aFN0ZXAoKTtcclxuICAgICAgICBhc3Nlc3NtZW50U3RlcC5sZWFybmluZ1BhdGhJZCA9IHBhdGhJZDtcclxuICAgICAgICBhc3Nlc3NtZW50U3RlcC5zdGVwVHlwZSA9IFN0ZXBUeXBlLkFTU0VTU01FTlQ7XHJcbiAgICAgICAgYXNzZXNzbWVudFN0ZXAudGl0bGUgPSBgJHtjb3Vyc2UudGl0bGV9IC0gS25vd2xlZGdlIENoZWNrYDtcclxuICAgICAgICBhc3Nlc3NtZW50U3RlcC5kZXNjcmlwdGlvbiA9IGBBc3Nlc3MgeW91ciB1bmRlcnN0YW5kaW5nIG9mICR7Y291cnNlLnRpdGxlfWA7XHJcbiAgICAgICAgYXNzZXNzbWVudFN0ZXAuc3RlcE9yZGVyID0gc3RlcE9yZGVyKys7XHJcbiAgICAgICAgYXNzZXNzbWVudFN0ZXAuZXN0aW1hdGVkRHVyYXRpb24gPSAzMDtcclxuICAgICAgICBhc3Nlc3NtZW50U3RlcC5jb21wbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICBhc3Nlc3NtZW50U3RlcC5tZXRhZGF0YSA9IHtcclxuICAgICAgICAgIHJlbGF0ZWRDb3Vyc2VJZDogY291cnNlLmlkLFxyXG4gICAgICAgICAgYXNzZXNzbWVudFR5cGU6ICdrbm93bGVkZ2VfY2hlY2snLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHN0ZXBzLnB1c2goYXNzZXNzbWVudFN0ZXApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBBZGQgcHJvamVjdCBzdGVwIGZvciBhZHZhbmNlZCBjb3Vyc2VzIGlmIGVuYWJsZWRcclxuICAgICAgaWYgKG9wdGlvbnMuaW5jbHVkZVByb2plY3RzICYmIGNvdXJzZS5kaWZmaWN1bHR5ID09PSAnYWR2YW5jZWQnKSB7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdFN0ZXAgPSBuZXcgTGVhcm5pbmdQYXRoU3RlcCgpO1xyXG4gICAgICAgIHByb2plY3RTdGVwLmxlYXJuaW5nUGF0aElkID0gcGF0aElkO1xyXG4gICAgICAgIHByb2plY3RTdGVwLnN0ZXBUeXBlID0gU3RlcFR5cGUuUFJPSkVDVDtcclxuICAgICAgICBwcm9qZWN0U3RlcC50aXRsZSA9IGAke2NvdXJzZS50aXRsZX0gLSBQcmFjdGljYWwgUHJvamVjdGA7XHJcbiAgICAgICAgcHJvamVjdFN0ZXAuZGVzY3JpcHRpb24gPSBgQXBwbHkgeW91ciBrbm93bGVkZ2Ugd2l0aCBhIGhhbmRzLW9uIHByb2plY3RgO1xyXG4gICAgICAgIHByb2plY3RTdGVwLnN0ZXBPcmRlciA9IHN0ZXBPcmRlcisrO1xyXG4gICAgICAgIHByb2plY3RTdGVwLmVzdGltYXRlZER1cmF0aW9uID0gMTIwO1xyXG4gICAgICAgIHByb2plY3RTdGVwLmNvbXBsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHByb2plY3RTdGVwLm1ldGFkYXRhID0ge1xyXG4gICAgICAgICAgcmVsYXRlZENvdXJzZUlkOiBjb3Vyc2UuaWQsXHJcbiAgICAgICAgICBwcm9qZWN0VHlwZTogJ2NhcHN0b25lJyxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzdGVwcy5wdXNoKHByb2plY3RTdGVwKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFNhdmUgYWxsIHN0ZXBzXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zdGVwUmVwb3NpdG9yeS5zYXZlKHN0ZXBzKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGN1bGF0ZSBlc3RpbWF0ZWQgZHVyYXRpb24gZm9yIGxlYXJuaW5nIHBhdGhcclxuICAgKi9cclxuICBwcml2YXRlIGNhbGN1bGF0ZUVzdGltYXRlZER1cmF0aW9uKHN0ZXBzOiBMZWFybmluZ1BhdGhTdGVwW10pOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHN0ZXBzLnJlZHVjZSgodG90YWwsIHN0ZXApID0+IHRvdGFsICsgc3RlcC5lc3RpbWF0ZWREdXJhdGlvbiwgMCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBbmFseXplIHVzZXIgcGVyZm9ybWFuY2UgZm9yIGFkYXB0YXRpb25cclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGFuYWx5emVVc2VyUGVyZm9ybWFuY2UodXNlcklkOiBzdHJpbmcsIHN0ZXBzOiBMZWFybmluZ1BhdGhTdGVwW10pOiBQcm9taXNlPHtcclxuICAgIHN0cnVnZ2xpbmdBcmVhczogc3RyaW5nW107XHJcbiAgICBleGNlbGxpbmdBcmVhczogc3RyaW5nW107XHJcbiAgICBhdmVyYWdlQ29tcGxldGlvblRpbWU6IG51bWJlcjtcclxuICAgIGNvbXBsZXRpb25SYXRlOiBudW1iZXI7XHJcbiAgfT4ge1xyXG4gICAgLy8gQW5hbHl6ZSBjb21wbGV0aW9uIHBhdHRlcm5zIGFuZCB0aW1lc1xyXG4gICAgY29uc3QgY29tcGxldGVkU3RlcHMgPSBzdGVwcy5maWx0ZXIocyA9PiBzLmNvbXBsZXRlZCk7XHJcbiAgICBjb25zdCB0b3RhbFN0ZXBzID0gc3RlcHMubGVuZ3RoO1xyXG4gICAgY29uc3QgY29tcGxldGlvblJhdGUgPSB0b3RhbFN0ZXBzID4gMCA/IGNvbXBsZXRlZFN0ZXBzLmxlbmd0aCAvIHRvdGFsU3RlcHMgOiAwO1xyXG5cclxuICAgIC8vIElkZW50aWZ5IHN0cnVnZ2xpbmcgYW5kIGV4Y2VsbGluZyBhcmVhcyBiYXNlZCBvbiBjb21wbGV0aW9uIHRpbWVzIGFuZCBwYXR0ZXJuc1xyXG4gICAgY29uc3Qgc3RydWdnbGluZ0FyZWFzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgY29uc3QgZXhjZWxsaW5nQXJlYXM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIGF2ZXJhZ2UgY29tcGxldGlvbiB0aW1lXHJcbiAgICBjb25zdCBhdmVyYWdlQ29tcGxldGlvblRpbWUgPSBjb21wbGV0ZWRTdGVwcy5sZW5ndGggPiAwXHJcbiAgICAgID8gY29tcGxldGVkU3RlcHMucmVkdWNlKChzdW0sIHN0ZXApID0+IHtcclxuICAgICAgICAgIGlmIChzdGVwLmNvbXBsZXRlZEF0ICYmIHN0ZXAuY3JlYXRlZEF0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdW0gKyAoc3RlcC5jb21wbGV0ZWRBdC5nZXRUaW1lKCkgLSBzdGVwLmNyZWF0ZWRBdC5nZXRUaW1lKCkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHN1bTtcclxuICAgICAgICB9LCAwKSAvIGNvbXBsZXRlZFN0ZXBzLmxlbmd0aFxyXG4gICAgICA6IDA7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3RydWdnbGluZ0FyZWFzLFxyXG4gICAgICBleGNlbGxpbmdBcmVhcyxcclxuICAgICAgYXZlcmFnZUNvbXBsZXRpb25UaW1lOiBhdmVyYWdlQ29tcGxldGlvblRpbWUgLyAoMTAwMCAqIDYwICogNjApLCAvLyBDb252ZXJ0IHRvIGhvdXJzXHJcbiAgICAgIGNvbXBsZXRpb25SYXRlLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIElkZW50aWZ5IGFkYXB0YXRpb25zIG5lZWRlZCBmb3IgbGVhcm5pbmcgcGF0aFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgaWRlbnRpZnlBZGFwdGF0aW9ucyhwYXRoOiBMZWFybmluZ1BhdGgsIHBlcmZvcm1hbmNlOiBhbnkpOiBQcm9taXNlPEFycmF5PHtcclxuICAgIHR5cGU6ICdhZGRfc3VwcG9ydCcgfCAnc2tpcF9yZWR1bmRhbnQnIHwgJ2FkanVzdF9wYWNlJyB8ICdjaGFuZ2VfZGlmZmljdWx0eSc7XHJcbiAgICByZWFzb246IHN0cmluZztcclxuICAgIHN0ZXBJZD86IHN0cmluZztcclxuICAgIG5ld1N0ZXBzPzogUGFydGlhbDxMZWFybmluZ1BhdGhTdGVwPltdO1xyXG4gIH0+PiB7XHJcbiAgICBjb25zdCBhZGFwdGF0aW9uczogYW55W10gPSBbXTtcclxuXHJcbiAgICAvLyBJZiBjb21wbGV0aW9uIHJhdGUgaXMgbG93LCBhZGQgc3VwcG9ydCBtYXRlcmlhbHNcclxuICAgIGlmIChwZXJmb3JtYW5jZS5jb21wbGV0aW9uUmF0ZSA8IDAuNSkge1xyXG4gICAgICBhZGFwdGF0aW9ucy5wdXNoKHtcclxuICAgICAgICB0eXBlOiAnYWRkX3N1cHBvcnQnLFxyXG4gICAgICAgIHJlYXNvbjogJ0xvdyBjb21wbGV0aW9uIHJhdGUgZGV0ZWN0ZWQsIGFkZGluZyBzdXBwb3J0IG1hdGVyaWFscycsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHVzZXIgaXMgZXhjZWxsaW5nLCBza2lwIHJlZHVuZGFudCBjb250ZW50XHJcbiAgICBpZiAocGVyZm9ybWFuY2UuZXhjZWxsaW5nQXJlYXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBhZGFwdGF0aW9ucy5wdXNoKHtcclxuICAgICAgICB0eXBlOiAnc2tpcF9yZWR1bmRhbnQnLFxyXG4gICAgICAgIHJlYXNvbjogJ1VzZXIgZXhjZWxsaW5nIGluIGNlcnRhaW4gYXJlYXMsIG9wdGltaXppbmcgcGF0aCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhZGFwdGF0aW9ucztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFwcGx5IGFkYXB0YXRpb25zIHRvIGxlYXJuaW5nIHBhdGhcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGFwcGx5QWRhcHRhdGlvbnMocGF0aDogTGVhcm5pbmdQYXRoLCBhZGFwdGF0aW9uczogYW55W10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGZvciAoY29uc3QgYWRhcHRhdGlvbiBvZiBhZGFwdGF0aW9ucykge1xyXG4gICAgICBzd2l0Y2ggKGFkYXB0YXRpb24udHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ2FkZF9zdXBwb3J0JzpcclxuICAgICAgICAgIC8vIEFkZCBzdXBwb3J0IG1hdGVyaWFscyBvciBlYXNpZXIgcHJlcmVxdWlzaXRlIGNvdXJzZXNcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3NraXBfcmVkdW5kYW50JzpcclxuICAgICAgICAgIC8vIE1hcmsgY2VydGFpbiBzdGVwcyBhcyBvcHRpb25hbCBvciBjb21wbGV0ZWRcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2FkanVzdF9wYWNlJzpcclxuICAgICAgICAgIC8vIE1vZGlmeSBlc3RpbWF0ZWQgZHVyYXRpb25zXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdjaGFuZ2VfZGlmZmljdWx0eSc6XHJcbiAgICAgICAgICAvLyBSZXBsYWNlIGNvdXJzZXMgd2l0aCBlYXNpZXIvaGFyZGVyIGFsdGVybmF0aXZlc1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlIHNraWxsLWJhc2VkIHBhdGggcmVjb21tZW5kYXRpb25zXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVNraWxsQmFzZWRQYXRoUmVjb21tZW5kYXRpb25zKFxyXG4gICAgdXNlcjogVXNlcixcclxuICAgIGludGVyYWN0aW9uczogVXNlckludGVyYWN0aW9uW10sXHJcbiAgICBsaW1pdDogbnVtYmVyLFxyXG4gICk6IFByb21pc2U8TGVhcm5pbmdHb2FsW10+IHtcclxuICAgIC8vIEFuYWx5emUgdXNlcidzIHNraWxsIGdhcHMgYW5kIGludGVyZXN0c1xyXG4gICAgY29uc3QgdXNlclNraWxscyA9IHVzZXIuc2tpbGxzIHx8IFtdO1xyXG4gICAgY29uc3QgZGVzaXJlZFNraWxscyA9IHVzZXIuZGVzaXJlZFNraWxscyB8fCBbXTtcclxuICAgIGNvbnN0IHNraWxsR2FwcyA9IGRlc2lyZWRTa2lsbHMuZmlsdGVyKHNraWxsID0+ICF1c2VyU2tpbGxzLmluY2x1ZGVzKHNraWxsKSk7XHJcblxyXG4gICAgcmV0dXJuIHNraWxsR2Fwcy5zbGljZSgwLCBsaW1pdCkubWFwKHNraWxsID0+ICh7XHJcbiAgICAgIHRhcmdldFNraWxsczogW3NraWxsXSxcclxuICAgICAgY3VycmVudExldmVsOiAnYmVnaW5uZXInIGFzIGNvbnN0LFxyXG4gICAgICB0YXJnZXRMZXZlbDogJ2ludGVybWVkaWF0ZScgYXMgY29uc3QsXHJcbiAgICAgIHRpbWVmcmFtZTogOCxcclxuICAgICAgcHJlZmVyZW5jZXM6IHtcclxuICAgICAgICBtYXhDb3Vyc2VzUGVyV2VlazogMixcclxuICAgICAgICBwcmVmZXJyZWREdXJhdGlvbjogNjAsXHJcbiAgICAgIH0sXHJcbiAgICB9KSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZW5lcmF0ZSB0cmVuZGluZyBwYXRoIHJlY29tbWVuZGF0aW9uc1xyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVUcmVuZGluZ1BhdGhSZWNvbW1lbmRhdGlvbnMobGltaXQ6IG51bWJlcik6IFByb21pc2U8TGVhcm5pbmdHb2FsW10+IHtcclxuICAgIC8vIEdldCB0cmVuZGluZyBza2lsbHMvdG9waWNzIGZyb20gcmVjZW50IGNvdXJzZSBlbnJvbGxtZW50c1xyXG4gICAgY29uc3QgdHJlbmRpbmdTa2lsbHMgPSBbJ1JlYWN0JywgJ1B5dGhvbicsICdNYWNoaW5lIExlYXJuaW5nJywgJ0Rldk9wcycsICdDbG91ZCBDb21wdXRpbmcnXTtcclxuXHJcbiAgICByZXR1cm4gdHJlbmRpbmdTa2lsbHMuc2xpY2UoMCwgbGltaXQpLm1hcChza2lsbCA9PiAoe1xyXG4gICAgICB0YXJnZXRTa2lsbHM6IFtza2lsbF0sXHJcbiAgICAgIGN1cnJlbnRMZXZlbDogJ2JlZ2lubmVyJyBhcyBjb25zdCxcclxuICAgICAgdGFyZ2V0TGV2ZWw6ICdhZHZhbmNlZCcgYXMgY29uc3QsXHJcbiAgICAgIHRpbWVmcmFtZTogMTIsXHJcbiAgICAgIHByZWZlcmVuY2VzOiB7XHJcbiAgICAgICAgbWF4Q291cnNlc1BlcldlZWs6IDEsXHJcbiAgICAgICAgcHJlZmVycmVkRHVyYXRpb246IDkwLFxyXG4gICAgICB9LFxyXG4gICAgfSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGUgY29udGludWF0aW9uIHBhdGggcmVjb21tZW5kYXRpb25zXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUNvbnRpbnVhdGlvblBhdGhSZWNvbW1lbmRhdGlvbnMoXHJcbiAgICB1c2VyOiBVc2VyLFxyXG4gICAgaW50ZXJhY3Rpb25zOiBVc2VySW50ZXJhY3Rpb25bXSxcclxuICAgIGxpbWl0OiBudW1iZXIsXHJcbiAgKTogUHJvbWlzZTxMZWFybmluZ0dvYWxbXT4ge1xyXG4gICAgLy8gRmluZCBza2lsbHMgdXNlciBoYXMgc3RhcnRlZCBsZWFybmluZyBidXQgbm90IG1hc3RlcmVkXHJcbiAgICBjb25zdCBpblByb2dyZXNzU2tpbGxzID0gaW50ZXJhY3Rpb25zXHJcbiAgICAgIC5maWx0ZXIoaSA9PiBpLmludGVyYWN0aW9uVHlwZSA9PT0gSW50ZXJhY3Rpb25UeXBlLlNUQVJUICYmIGkuY291cnNlPy5za2lsbHMpXHJcbiAgICAgIC5mbGF0TWFwKGkgPT4gaS5jb3Vyc2UhLnNraWxscyEpXHJcbiAgICAgIC5maWx0ZXIoKHNraWxsLCBpbmRleCwgYXJyKSA9PiBhcnIuaW5kZXhPZihza2lsbCkgPT09IGluZGV4KVxyXG4gICAgICAuc2xpY2UoMCwgbGltaXQpO1xyXG5cclxuICAgIHJldHVybiBpblByb2dyZXNzU2tpbGxzLm1hcChza2lsbCA9PiAoe1xyXG4gICAgICB0YXJnZXRTa2lsbHM6IFtza2lsbF0sXHJcbiAgICAgIGN1cnJlbnRMZXZlbDogJ2ludGVybWVkaWF0ZScgYXMgY29uc3QsXHJcbiAgICAgIHRhcmdldExldmVsOiAnYWR2YW5jZWQnIGFzIGNvbnN0LFxyXG4gICAgICB0aW1lZnJhbWU6IDYsXHJcbiAgICAgIHByZWZlcmVuY2VzOiB7XHJcbiAgICAgICAgbWF4Q291cnNlc1BlcldlZWs6IDIsXHJcbiAgICAgICAgcHJlZmVycmVkRHVyYXRpb246IDc1LFxyXG4gICAgICB9LFxyXG4gICAgfSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXRpbGl0eSBtZXRob2RzXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBkZXRlcm1pbmVMZWFybmluZ1N0eWxlKGludGVyYWN0aW9uczogVXNlckludGVyYWN0aW9uW10pOiBzdHJpbmcge1xyXG4gICAgLy8gQW5hbHl6ZSBpbnRlcmFjdGlvbiBwYXR0ZXJucyB0byBkZXRlcm1pbmUgbGVhcm5pbmcgc3R5bGVcclxuICAgIGNvbnN0IHZpZGVvSW50ZXJhY3Rpb25zID0gaW50ZXJhY3Rpb25zLmZpbHRlcihpID0+IGkubWV0YWRhdGE/LmNvbnRlbnRUeXBlID09PSAndmlkZW8nKS5sZW5ndGg7XHJcbiAgICBjb25zdCB0ZXh0SW50ZXJhY3Rpb25zID0gaW50ZXJhY3Rpb25zLmZpbHRlcihpID0+IGkubWV0YWRhdGE/LmNvbnRlbnRUeXBlID09PSAndGV4dCcpLmxlbmd0aDtcclxuICAgIGNvbnN0IHByYWN0aWNlSW50ZXJhY3Rpb25zID0gaW50ZXJhY3Rpb25zLmZpbHRlcihpID0+IGkubWV0YWRhdGE/LmNvbnRlbnRUeXBlID09PSAncHJhY3RpY2UnKS5sZW5ndGg7XHJcblxyXG4gICAgaWYgKHZpZGVvSW50ZXJhY3Rpb25zID4gdGV4dEludGVyYWN0aW9ucyAmJiB2aWRlb0ludGVyYWN0aW9ucyA+IHByYWN0aWNlSW50ZXJhY3Rpb25zKSB7XHJcbiAgICAgIHJldHVybiAndmlzdWFsJztcclxuICAgIH0gZWxzZSBpZiAocHJhY3RpY2VJbnRlcmFjdGlvbnMgPiB2aWRlb0ludGVyYWN0aW9ucyAmJiBwcmFjdGljZUludGVyYWN0aW9ucyA+IHRleHRJbnRlcmFjdGlvbnMpIHtcclxuICAgICAgcmV0dXJuICdraW5lc3RoZXRpYyc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gJ3JlYWRpbmcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBkZXRlcm1pbmVQcmVmZXJyZWREaWZmaWN1bHR5KGludGVyYWN0aW9uczogVXNlckludGVyYWN0aW9uW10pOiBzdHJpbmcge1xyXG4gICAgLy8gQW5hbHl6ZSBjb21wbGV0aW9uIHJhdGVzIGJ5IGRpZmZpY3VsdHkgdG8gZGV0ZXJtaW5lIHByZWZlcmVuY2VcclxuICAgIGNvbnN0IGNvbXBsZXRlZENvdXJzZXMgPSBpbnRlcmFjdGlvbnNcclxuICAgICAgLmZpbHRlcihpID0+IGkuaW50ZXJhY3Rpb25UeXBlID09PSBJbnRlcmFjdGlvblR5cGUuQ09NUExFVEUgJiYgaS5jb3Vyc2UpXHJcbiAgICAgIC5tYXAoaSA9PiBpLmNvdXJzZSEpO1xyXG5cclxuICAgIGNvbnN0IGRpZmZpY3VsdHlDb21wbGV0aW9ucyA9IHtcclxuICAgICAgYmVnaW5uZXI6IGNvbXBsZXRlZENvdXJzZXMuZmlsdGVyKGMgPT4gYy5kaWZmaWN1bHR5ID09PSAnYmVnaW5uZXInKS5sZW5ndGgsXHJcbiAgICAgIGludGVybWVkaWF0ZTogY29tcGxldGVkQ291cnNlcy5maWx0ZXIoYyA9PiBjLmRpZmZpY3VsdHkgPT09ICdpbnRlcm1lZGlhdGUnKS5sZW5ndGgsXHJcbiAgICAgIGFkdmFuY2VkOiBjb21wbGV0ZWRDb3Vyc2VzLmZpbHRlcihjID0+IGMuZGlmZmljdWx0eSA9PT0gJ2FkdmFuY2VkJykubGVuZ3RoLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBtYXhDb21wbGV0aW9ucyA9IE1hdGgubWF4KC4uLk9iamVjdC52YWx1ZXMoZGlmZmljdWx0eUNvbXBsZXRpb25zKSk7XHJcbiAgICBjb25zdCBwcmVmZXJyZWREaWZmaWN1bHR5ID0gT2JqZWN0LmVudHJpZXMoZGlmZmljdWx0eUNvbXBsZXRpb25zKVxyXG4gICAgICAuZmluZCgoW18sIGNvdW50XSkgPT4gY291bnQgPT09IG1heENvbXBsZXRpb25zKT8uWzBdIHx8ICdiZWdpbm5lcic7XHJcblxyXG4gICAgcmV0dXJuIHByZWZlcnJlZERpZmZpY3VsdHk7XHJcbiAgfVxyXG59XHJcbiJdLCJ2ZXJzaW9uIjozfQ==