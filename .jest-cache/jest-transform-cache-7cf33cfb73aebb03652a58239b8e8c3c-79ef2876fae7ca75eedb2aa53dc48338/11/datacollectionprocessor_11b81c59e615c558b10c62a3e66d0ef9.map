{"file":"C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\analytic\\processors\\data-collection.processor.ts","mappings":";;;;;;;;;;;;;AAAA,uCAAiD;AAEjD,2CAAuC;AAMhC,IAAM,uBAAuB,+BAA7B,MAAM,uBAAuB;IAGlC,YAA6B,qBAA4C;QAA5C,0BAAqB,GAArB,qBAAqB,CAAuB;QAFxD,WAAM,GAAG,IAAI,eAAM,CAAC,yBAAuB,CAAC,IAAI,CAAC,CAAA;IAEU,CAAC;IAGvE,AAAN,KAAK,CAAC,YAAY,CAAC,GAAwB;QACzC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,qBAAqB,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAA;QAE1D,IAAI,CAAC;YACH,MAAM,IAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;YACvD,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,iCAAiC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAA;QACxE,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,4BAA4B,KAAK,CAAC,OAAO,EAAE,EAAE,KAAK,CAAC,KAAK,CAAC,CAAA;YAC3E,MAAM,KAAK,CAAA;QACb,CAAC;IACH,CAAC;CACF,CAAA;AAjBY,0DAAuB;AAM5B;IADL,IAAA,cAAO,EAAC,eAAe,CAAC;;;;2DAWxB;kCAhBU,uBAAuB;IADnC,IAAA,gBAAS,EAAC,iBAAiB,CAAC;;GAChB,uBAAuB,CAiBnC","names":[],"sources":["C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\analytic\\processors\\data-collection.processor.ts"],"sourcesContent":["import { Processor, Process } from \"@nestjs/bull\"\r\nimport type { Job } from \"bull\"\r\nimport { Logger } from \"@nestjs/common\"\r\n\r\nimport type { DataProcessingService } from \"../services/data-processing.service\"\r\nimport type { AnalyticsEvent } from \"../entities/analytics-event.entity\"\r\n\r\n@Processor(\"data-collection\")\r\nexport class DataCollectionProcessor {\r\n  private readonly logger = new Logger(DataCollectionProcessor.name)\r\n\r\n  constructor(private readonly dataProcessingService: DataProcessingService) {}\r\n\r\n  @Process(\"process-event\")\r\n  async processEvent(job: Job<AnalyticsEvent>) {\r\n    this.logger.log(`Processing event: ${job.data.eventName}`)\r\n\r\n    try {\r\n      await this.dataProcessingService.processEvent(job.data)\r\n      this.logger.log(`Successfully processed event: ${job.data.eventName}`)\r\n    } catch (error) {\r\n      this.logger.error(`Failed to process event: ${error.message}`, error.stack)\r\n      throw error\r\n    }\r\n  }\r\n}\r\n"],"version":3}