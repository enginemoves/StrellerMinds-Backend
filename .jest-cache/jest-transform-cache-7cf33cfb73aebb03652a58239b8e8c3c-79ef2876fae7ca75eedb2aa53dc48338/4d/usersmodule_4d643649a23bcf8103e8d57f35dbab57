66e06213f8a788e252ceff61730a75bf
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.UsersModule = void 0;
/**
 * UsersModule provides user management, authentication, and progress tracking features.
 *
 * @module Users
 */
const common_1 = require("@nestjs/common");
const typeorm_1 = require("@nestjs/typeorm");
const config_1 = require("@nestjs/config");
const users_controller_1 = require("./users.controller");
const users_service_1 = require("./services/users.service");
const account_deletion_confirmation_service_1 = require("./services/account.deletion.confirmation.service");
const progress_service_1 = require("./services/progress.service");
const progress_controller_1 = require("./controllers/progress.controller");
const admin_users_controller_1 = require("./admin.users.controller");
const user_entity_1 = require("./entities/user.entity");
const wallet_info_entity_1 = require("./entities/wallet-info.entity");
const user_settings_entity_1 = require("./entities/user-settings.entity");
const user_progress_entity_1 = require("./entities/user-progress.entity");
const course_entity_1 = require("../courses/entities/course.entity");
const lesson_entity_1 = require("../lesson/entity/lesson.entity");
// Import the CourseModule ENTITY (not the module)
const course_module_entity_1 = require("../courses/entities/course-module.entity");
const audit_log_entity_1 = require("src/audit/entities/audit.log.entity");
const audit_log_module_1 = require("src/audit/audit.log.module");
const cloudinary_module_1 = require("src/cloudinary/cloudinary.module");
const cloudinary_service_1 = require("src/cloudinary/cloudinary.service");
const email_module_1 = require("src/email/email.module");
const shared_module_1 = require("src/shared/shared.module");
const common_module_1 = require("../common/common.module");
let UsersModule = class UsersModule {
};
exports.UsersModule = UsersModule;
exports.UsersModule = UsersModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([
                user_entity_1.User,
                wallet_info_entity_1.WalletInfo,
                audit_log_entity_1.AuditLog,
                user_settings_entity_1.UserSettings,
                user_progress_entity_1.UserProgress,
                course_entity_1.Course,
                lesson_entity_1.Lesson,
                course_module_entity_1.CourseModule, // Add the CourseModule entity here
            ]),
            audit_log_module_1.AuditLogModule,
            config_1.ConfigModule,
            email_module_1.EmailModule,
            cloudinary_module_1.CloudinaryModule,
            shared_module_1.SharedModule,
            common_module_1.CommonModule, // Import CommonModule for shared services
        ],
        controllers: [users_controller_1.UsersController, progress_controller_1.ProgressController, admin_users_controller_1.AdminUsersController],
        providers: [
            users_service_1.UsersService,
            account_deletion_confirmation_service_1.AccountDeletionConfirmationService,
            progress_service_1.ProgressService,
            cloudinary_service_1.CloudinaryService,
        ],
        exports: [users_service_1.UsersService, account_deletion_confirmation_service_1.AccountDeletionConfirmationService],
    })
], UsersModule);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxvam9zZXBoXFxEb2N1bWVudHNcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFx1c2Vyc1xcdXNlcnMubW9kdWxlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOzs7O0dBSUc7QUFDSCwyQ0FBd0M7QUFDeEMsNkNBQWdEO0FBQ2hELDJDQUE4QztBQUc5Qyx5REFBcUQ7QUFDckQsNERBQXdEO0FBQ3hELDRHQUFzRztBQUN0RyxrRUFBOEQ7QUFDOUQsMkVBQXVFO0FBQ3ZFLHFFQUFnRTtBQUVoRSx3REFBOEM7QUFDOUMsc0VBQTJEO0FBQzNELDBFQUErRDtBQUMvRCwwRUFBK0Q7QUFFL0QscUVBQTJEO0FBQzNELGtFQUF3RDtBQUN4RCxrREFBa0Q7QUFDbEQsbUZBQThGO0FBRTlGLDBFQUErRDtBQUMvRCxpRUFBNEQ7QUFFNUQsd0VBQW9FO0FBQ3BFLDBFQUFzRTtBQUV0RSx5REFBcUQ7QUFDckQsNERBQXdEO0FBQ3hELDJEQUF1RDtBQThCaEQsSUFBTSxXQUFXLEdBQWpCLE1BQU0sV0FBVztDQUFHLENBQUE7QUFBZCxrQ0FBVztzQkFBWCxXQUFXO0lBNUJ2QixJQUFBLGVBQU0sRUFBQztRQUNOLE9BQU8sRUFBRTtZQUNQLHVCQUFhLENBQUMsVUFBVSxDQUFDO2dCQUN2QixrQkFBSTtnQkFDSiwrQkFBVTtnQkFDViwyQkFBUTtnQkFDUixtQ0FBWTtnQkFDWixtQ0FBWTtnQkFDWixzQkFBTTtnQkFDTixzQkFBTTtnQkFDTixtQ0FBa0IsRUFBRSxtQ0FBbUM7YUFDeEQsQ0FBQztZQUNGLGlDQUFjO1lBQ2QscUJBQVk7WUFDWiwwQkFBVztZQUNYLG9DQUFnQjtZQUNoQiw0QkFBWTtZQUNaLDRCQUFZLEVBQUUsMENBQTBDO1NBQ3pEO1FBQ0QsV0FBVyxFQUFFLENBQUMsa0NBQWUsRUFBRSx3Q0FBa0IsRUFBRSw2Q0FBb0IsQ0FBQztRQUN4RSxTQUFTLEVBQUU7WUFDVCw0QkFBWTtZQUNaLDBFQUFrQztZQUNsQyxrQ0FBZTtZQUNmLHNDQUFpQjtTQUNsQjtRQUNELE9BQU8sRUFBRSxDQUFDLDRCQUFZLEVBQUUsMEVBQWtDLENBQUM7S0FDNUQsQ0FBQztHQUNXLFdBQVcsQ0FBRyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXG9qb3NlcGhcXERvY3VtZW50c1xcU3RyZWxsZXJNaW5kcy1CYWNrZW5kXFxzcmNcXHVzZXJzXFx1c2Vycy5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFVzZXJzTW9kdWxlIHByb3ZpZGVzIHVzZXIgbWFuYWdlbWVudCwgYXV0aGVudGljYXRpb24sIGFuZCBwcm9ncmVzcyB0cmFja2luZyBmZWF0dXJlcy5cclxuICpcclxuICogQG1vZHVsZSBVc2Vyc1xyXG4gKi9cclxuaW1wb3J0IHsgTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xyXG5pbXBvcnQgeyBUeXBlT3JtTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy90eXBlb3JtJztcclxuaW1wb3J0IHsgQ29uZmlnTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy9jb25maWcnO1xyXG5pbXBvcnQgeyBBcGlUYWdzIH0gZnJvbSAnQG5lc3Rqcy9zd2FnZ2VyJztcclxuXHJcbmltcG9ydCB7IFVzZXJzQ29udHJvbGxlciB9IGZyb20gJy4vdXNlcnMuY29udHJvbGxlcic7XHJcbmltcG9ydCB7IFVzZXJzU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvdXNlcnMuc2VydmljZSc7XHJcbmltcG9ydCB7IEFjY291bnREZWxldGlvbkNvbmZpcm1hdGlvblNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL2FjY291bnQuZGVsZXRpb24uY29uZmlybWF0aW9uLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBQcm9ncmVzc1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3Byb2dyZXNzLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBQcm9ncmVzc0NvbnRyb2xsZXIgfSBmcm9tICcuL2NvbnRyb2xsZXJzL3Byb2dyZXNzLmNvbnRyb2xsZXInO1xyXG5pbXBvcnQgeyBBZG1pblVzZXJzQ29udHJvbGxlciB9IGZyb20gJy4vYWRtaW4udXNlcnMuY29udHJvbGxlcic7XHJcblxyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi9lbnRpdGllcy91c2VyLmVudGl0eSc7XHJcbmltcG9ydCB7IFdhbGxldEluZm8gfSBmcm9tICcuL2VudGl0aWVzL3dhbGxldC1pbmZvLmVudGl0eSc7XHJcbmltcG9ydCB7IFVzZXJTZXR0aW5ncyB9IGZyb20gJy4vZW50aXRpZXMvdXNlci1zZXR0aW5ncy5lbnRpdHknO1xyXG5pbXBvcnQgeyBVc2VyUHJvZ3Jlc3MgfSBmcm9tICcuL2VudGl0aWVzL3VzZXItcHJvZ3Jlc3MuZW50aXR5JztcclxuXHJcbmltcG9ydCB7IENvdXJzZSB9IGZyb20gJy4uL2NvdXJzZXMvZW50aXRpZXMvY291cnNlLmVudGl0eSc7XHJcbmltcG9ydCB7IExlc3NvbiB9IGZyb20gJy4uL2xlc3Nvbi9lbnRpdHkvbGVzc29uLmVudGl0eSc7XHJcbi8vIEltcG9ydCB0aGUgQ291cnNlTW9kdWxlIEVOVElUWSAobm90IHRoZSBtb2R1bGUpXHJcbmltcG9ydCB7IENvdXJzZU1vZHVsZSBhcyBDb3Vyc2VNb2R1bGVFbnRpdHkgfSBmcm9tICcuLi9jb3Vyc2VzL2VudGl0aWVzL2NvdXJzZS1tb2R1bGUuZW50aXR5JztcclxuXHJcbmltcG9ydCB7IEF1ZGl0TG9nIH0gZnJvbSAnc3JjL2F1ZGl0L2VudGl0aWVzL2F1ZGl0LmxvZy5lbnRpdHknO1xyXG5pbXBvcnQgeyBBdWRpdExvZ01vZHVsZSB9IGZyb20gJ3NyYy9hdWRpdC9hdWRpdC5sb2cubW9kdWxlJztcclxuXHJcbmltcG9ydCB7IENsb3VkaW5hcnlNb2R1bGUgfSBmcm9tICdzcmMvY2xvdWRpbmFyeS9jbG91ZGluYXJ5Lm1vZHVsZSc7XHJcbmltcG9ydCB7IENsb3VkaW5hcnlTZXJ2aWNlIH0gZnJvbSAnc3JjL2Nsb3VkaW5hcnkvY2xvdWRpbmFyeS5zZXJ2aWNlJztcclxuXHJcbmltcG9ydCB7IEVtYWlsTW9kdWxlIH0gZnJvbSAnc3JjL2VtYWlsL2VtYWlsLm1vZHVsZSc7XHJcbmltcG9ydCB7IFNoYXJlZE1vZHVsZSB9IGZyb20gJ3NyYy9zaGFyZWQvc2hhcmVkLm1vZHVsZSc7XHJcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJy4uL2NvbW1vbi9jb21tb24ubW9kdWxlJztcclxuXHJcbkBNb2R1bGUoe1xyXG4gIGltcG9ydHM6IFtcclxuICAgIFR5cGVPcm1Nb2R1bGUuZm9yRmVhdHVyZShbXHJcbiAgICAgIFVzZXIsXHJcbiAgICAgIFdhbGxldEluZm8sXHJcbiAgICAgIEF1ZGl0TG9nLFxyXG4gICAgICBVc2VyU2V0dGluZ3MsXHJcbiAgICAgIFVzZXJQcm9ncmVzcyxcclxuICAgICAgQ291cnNlLFxyXG4gICAgICBMZXNzb24sXHJcbiAgICAgIENvdXJzZU1vZHVsZUVudGl0eSwgLy8gQWRkIHRoZSBDb3Vyc2VNb2R1bGUgZW50aXR5IGhlcmVcclxuICAgIF0pLFxyXG4gICAgQXVkaXRMb2dNb2R1bGUsXHJcbiAgICBDb25maWdNb2R1bGUsXHJcbiAgICBFbWFpbE1vZHVsZSxcclxuICAgIENsb3VkaW5hcnlNb2R1bGUsXHJcbiAgICBTaGFyZWRNb2R1bGUsXHJcbiAgICBDb21tb25Nb2R1bGUsIC8vIEltcG9ydCBDb21tb25Nb2R1bGUgZm9yIHNoYXJlZCBzZXJ2aWNlc1xyXG4gIF0sXHJcbiAgY29udHJvbGxlcnM6IFtVc2Vyc0NvbnRyb2xsZXIsIFByb2dyZXNzQ29udHJvbGxlciwgQWRtaW5Vc2Vyc0NvbnRyb2xsZXJdLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgVXNlcnNTZXJ2aWNlLFxyXG4gICAgQWNjb3VudERlbGV0aW9uQ29uZmlybWF0aW9uU2VydmljZSxcclxuICAgIFByb2dyZXNzU2VydmljZSxcclxuICAgIENsb3VkaW5hcnlTZXJ2aWNlLFxyXG4gIF0sXHJcbiAgZXhwb3J0czogW1VzZXJzU2VydmljZSwgQWNjb3VudERlbGV0aW9uQ29uZmlybWF0aW9uU2VydmljZV0sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBVc2Vyc01vZHVsZSB7fVxyXG4iXSwidmVyc2lvbiI6M30=