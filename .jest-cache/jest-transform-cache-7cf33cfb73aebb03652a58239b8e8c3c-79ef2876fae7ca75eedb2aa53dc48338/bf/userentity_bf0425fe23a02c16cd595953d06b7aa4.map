{"file":"C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\users\\entities\\user.entity.ts","mappings":"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","names":[],"sources":["C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\users\\entities\\user.entity.ts"],"sourcesContent":["/**\r\n * User entity representing a platform user.\r\n */\r\nimport {\r\n  Entity,\r\n  PrimaryGeneratedColumn,\r\n  Column,\r\n  OneToMany,\r\n  OneToOne,\r\n  CreateDateColumn,\r\n  UpdateDateColumn,\r\n  DeleteDateColumn,\r\n  Index,\r\n} from 'typeorm';\r\nimport * as bcrypt from 'bcryptjs';\r\nimport { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\r\nimport { UserProgress } from './user-progress.entity';\r\nimport { WalletInfo } from './wallet-info.entity';\r\nimport { UserRole } from '../enums/userRole.enum';\r\nimport { AccountStatus } from '../enums/accountStatus.enum';\r\nimport { AuthToken } from '../../auth/entities/auth-token.entity';\r\nimport { Course } from '../../courses/entities/course.entity';\r\nimport { CourseReview } from '../../courses/entities/course-review.entity';\r\nimport { Certificate } from '../../certificate/entity/certificate.entity';\r\nimport { UserProfile } from 'src/user-profiles/entities/user-profile.entity';\r\nimport { UserSettings } from './user-settings.entity';\r\nimport { CoursesAdvance } from 'src/courses-advances/entities/courses-advance.entity';\r\n\r\n@Entity('users')\r\nexport class User {\r\n  @ApiProperty({ description: 'Unique user ID', example: 'uuid-v4' })\r\n  @PrimaryGeneratedColumn('uuid')\r\n  id: string;\r\n\r\n  @ApiProperty({ description: 'First name', example: 'John' })\r\n  @Column()\r\n  firstName: string;\r\n\r\n  @ApiProperty({ description: 'Last name', example: 'Doe' })\r\n  @Column()\r\n  lastName: string;\r\n\r\n  @ApiProperty({ description: 'Email address', example: 'user@example.com' })\r\n  @Column({ unique: true })\r\n  @Index()\r\n  email: string;\r\n\r\n  @ApiProperty({ description: 'Password hash', example: 'hashed-password', writeOnly: true })\r\n  @Column({ select: false })\r\n  password: string;\r\n\r\n  @ApiProperty({ description: 'Is user an instructor', example: false })\r\n  @Column({ default: false })\r\n  isInstructor: boolean;\r\n\r\n  @ApiPropertyOptional({ description: 'User biography', example: 'A short bio' })\r\n  @Column({ nullable: true, type: 'text' })\r\n  bio: string;\r\n\r\n  @ApiProperty({ enum: UserRole, description: 'User role', example: UserRole.STUDENT })\r\n  @Column({ type: 'enum', enum: UserRole, default: UserRole.STUDENT })\r\n  @Index()\r\n  role: UserRole;\r\n\r\n  @ApiPropertyOptional({ description: 'Profile image URL', example: 'https://cdn.com/profile.jpg' })\r\n  @OneToMany(() => CoursesAdvance, (course) => course.instructor)\r\n  courses: CoursesAdvance;\r\n  @Column({ nullable: true })\r\n  profileImageUrl?: string;\r\n\r\n  @ApiPropertyOptional({ description: 'Preferred language', example: 'en' })\r\n  @Column({ nullable: true })\r\n  preferredLanguage: string;\r\n\r\n  @ApiProperty({ description: 'Date created', example: '2024-01-01T00:00:00Z' })\r\n  @CreateDateColumn()\r\n  @Index()\r\n  createdAt: Date;\r\n\r\n  @ApiProperty({ description: 'Date updated', example: '2024-01-01T00:00:00Z' })\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n\r\n  @ApiProperty({ enum: AccountStatus, description: 'Account status', example: AccountStatus.ACTIVE })\r\n  @Column({ type: 'enum', enum: AccountStatus, default: AccountStatus.ACTIVE })\r\n  @Index()\r\n  status: AccountStatus;\r\n\r\n  @ApiPropertyOptional({ description: 'Date deactivated', example: '2024-01-01T00:00:00Z' })\r\n  @Column({ nullable: true })\r\n  deactivatedAt: Date;\r\n\r\n  @ApiPropertyOptional({ description: 'Date deletion requested', example: '2024-01-01T00:00:00Z' })\r\n  @Column({ nullable: true })\r\n  deletionRequestedAt: Date;\r\n\r\n  @ApiPropertyOptional({ description: 'Date deleted', example: '2024-01-01T00:00:00Z' })\r\n  @DeleteDateColumn({ nullable: true })\r\n  deletedAt: Date;\r\n\r\n  @OneToMany(() => UserProgress, (progress) => progress.user)\r\n  progress: Promise<UserProgress[]>;\r\n\r\n  @OneToMany(() => Course, (course) => course.instructor)\r\n  instructorCourses: Course[];\r\n\r\n  @OneToMany(() => Certificate, (certificate) => certificate.user)\r\n  certificates: Certificate[];\r\n\r\n  @OneToMany(() => CourseReview, (courseReview) => courseReview.user)\r\n  reviews: CourseReview[];\r\n\r\n  @OneToMany(() => AuthToken, (authToken) => authToken.user)\r\n  authTokens: Promise<AuthToken[]>;\r\n\r\n  @OneToOne(() => WalletInfo, (walletInfo) => walletInfo.user)\r\n  walletInfo: WalletInfo;\r\n\r\n  @Column({ nullable: true })\r\n  refreshToken?: string;\r\n\r\n  @Column({ default: false })\r\n  isEmailVerified: boolean;\r\n\r\n  @OneToOne(() => UserProfile, (profile) => profile.user, { cascade: true })\r\n  profile: UserProfile;\r\n\r\n  @OneToOne(() => UserSettings, (settings) => settings.user, {\r\n    cascade: true,\r\n    eager: true,\r\n  })\r\n  settings: UserSettings;\r\n\r\n  @ApiProperty({ description: 'Username', example: 'johndoe', uniqueItems: true })\r\n  @Column({ unique: true, nullable: false })\r\n  username: string;\r\n\r\n  gradesGiven: any;\r\n  gradesReceived: any;\r\n  reputation: number;\r\n\r\n  async setPassword(password: string): Promise<void> {\r\n    const salt = await bcrypt.genSalt();\r\n    this.password = await bcrypt.hash(password, salt);\r\n  }\r\n\r\n  async validatePassword(password: string): Promise<boolean> {\r\n    return bcrypt.compare(password, this.password);\r\n  }\r\n}\r\n"],"version":3}