{"file":"C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\payment\\entities\\payment.entity.ts","mappings":";;;;;;;;;;;;;AAAA,qCASiB;AACjB,kEAAwD;AACxD,qDAAiD;AAEjD,IAAY,aAOX;AAPD,WAAY,aAAa;IACvB,oCAAmB,CAAA;IACnB,0CAAyB,CAAA;IACzB,wCAAuB,CAAA;IACvB,kCAAiB,CAAA;IACjB,wCAAuB,CAAA;IACvB,sCAAqB,CAAA;AACvB,CAAC,EAPW,aAAa,6BAAb,aAAa,QAOxB;AAED,IAAY,WAMX;AAND,WAAY,WAAW;IACrB,kDAAmC,CAAA;IACnC,4CAA6B,CAAA;IAC7B,kCAAmB,CAAA;IACnB,kCAAmB,CAAA;IACnB,gCAAiB,CAAA;AACnB,CAAC,EANW,WAAW,2BAAX,WAAW,QAMtB;AAGM,IAAM,aAAa,GAAnB,MAAM,aAAa;CAoFzB,CAAA;AApFY,sCAAa;AAExB;IADC,IAAA,gCAAsB,EAAC,MAAM,CAAC;;yCACpB;AAGX;IADC,IAAA,gBAAM,GAAE;;6CACM;AAGf;IADC,IAAA,gBAAM,GAAE;;4DACqB;AAG9B;IADC,IAAA,gBAAM,GAAE;;6CACM;AAGf;IADC,IAAA,gBAAM,GAAE;;+CACQ;AAOjB;IALC,IAAA,gBAAM,EAAC;QACN,IAAI,EAAE,MAAM;QACZ,IAAI,EAAE,aAAa;QACnB,OAAO,EAAE,aAAa,CAAC,OAAO;KAC/B,CAAC;;6CACoB;AAMtB;IAJC,IAAA,gBAAM,EAAC;QACN,IAAI,EAAE,MAAM;QACZ,IAAI,EAAE,WAAW;KAClB,CAAC;;2CACgB;AAGlB;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;+CACT;AAGlB;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;qDACH;AAGxB;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;kDACP;AAGpB;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;oDACL;AAGtB;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;mDACN;AAGrB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;kDAChC,MAAM,oBAAN,MAAM;+CAAc;AAG9B;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;oDACL;AAGtB;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;mDACN;AAGrB;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;qDACJ;AAGvB;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;gDACT;AAGlB;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;qDACJ;AAGvB;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;iDACR;AAGnB;IADC,IAAA,0BAAgB,GAAE;kDACR,IAAI,oBAAJ,IAAI;gDAAC;AAGhB;IADC,IAAA,0BAAgB,GAAE;kDACR,IAAI,oBAAJ,IAAI;gDAAC;AAGhB;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;kDACd,IAAI,oBAAJ,IAAI;kDAAC;AAGlB;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;kDACf,IAAI,oBAAJ,IAAI;iDAAC;AAKjB;IAFC,IAAA,mBAAS,EAAC,GAAG,EAAE,CAAC,kBAAI,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC;IAC9C,IAAA,oBAAU,EAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC;kDACzB,kBAAI,oBAAJ,kBAAI;2CAAC;AAGX;IADC,IAAA,mBAAS,EAAC,GAAG,EAAE,CAAC,8BAAa,EAAE,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC;;+CACnC;wBAnFf,aAAa;IADzB,IAAA,gBAAM,EAAC,UAAU,CAAC;GACN,aAAa,CAoFzB","names":[],"sources":["C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\payment\\entities\\payment.entity.ts"],"sourcesContent":["import {\r\n  Entity,\r\n  PrimaryGeneratedColumn,\r\n  Column,\r\n  CreateDateColumn,\r\n  UpdateDateColumn,\r\n  ManyToOne,\r\n  JoinColumn,\r\n  OneToMany,\r\n} from 'typeorm';\r\nimport { User } from '../../users/entities/user.entity';\r\nimport { InvoiceEntity } from './invoice.entity';\r\n\r\nexport enum PaymentStatus {\r\n  PENDING = 'pending',\r\n  PROCESSING = 'processing',\r\n  COMPLETED = 'completed',\r\n  FAILED = 'failed',\r\n  CANCELLED = 'cancelled',\r\n  REFUNDED = 'refunded',\r\n}\r\n\r\nexport enum PaymentType {\r\n  COURSE_PURCHASE = 'course_purchase',\r\n  SUBSCRIPTION = 'subscription',\r\n  RENEWAL = 'renewal',\r\n  UPGRADE = 'upgrade',\r\n  REFUND = 'refund',\r\n}\r\n\r\n@Entity('payments')\r\nexport class PaymentEntity {\r\n  @PrimaryGeneratedColumn('uuid')\r\n  id: string;\r\n\r\n  @Column()\r\n  userId: string;\r\n\r\n  @Column()\r\n  stripePaymentIntentId: string;\r\n\r\n  @Column()\r\n  amount: number; // Amount in cents\r\n\r\n  @Column()\r\n  currency: string;\r\n\r\n  @Column({\r\n    type: 'enum',\r\n    enum: PaymentStatus,\r\n    default: PaymentStatus.PENDING,\r\n  })\r\n  status: PaymentStatus;\r\n\r\n  @Column({\r\n    type: 'enum',\r\n    enum: PaymentType,\r\n  })\r\n  type: PaymentType;\r\n\r\n  @Column({ nullable: true })\r\n  courseId?: string;\r\n\r\n  @Column({ nullable: true })\r\n  subscriptionId?: string;\r\n\r\n  @Column({ nullable: true })\r\n  description: string;\r\n\r\n  @Column({ nullable: true })\r\n  failureReason: string;\r\n\r\n  @Column({ nullable: true })\r\n  refundReason: string;\r\n\r\n  @Column({ type: 'jsonb', nullable: true })\r\n  metadata: Record<string, any>;\r\n\r\n  @Column({ nullable: true })\r\n  customerEmail: string;\r\n\r\n  @Column({ nullable: true })\r\n  customerName: string;\r\n\r\n  @Column({ nullable: true })\r\n  billingAddress: string;\r\n\r\n  @Column({ nullable: true })\r\n  taxAmount: number;\r\n\r\n  @Column({ nullable: true })\r\n  discountAmount: number;\r\n\r\n  @Column({ nullable: true })\r\n  couponCode: string;\r\n\r\n  @CreateDateColumn()\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n\r\n  @Column({ nullable: true })\r\n  completedAt: Date;\r\n\r\n  @Column({ nullable: true })\r\n  refundedAt: Date;\r\n\r\n  // Relations\r\n  @ManyToOne(() => User, { onDelete: 'CASCADE' })\r\n  @JoinColumn({ name: 'userId' })\r\n  user: User;\r\n\r\n  @OneToMany(() => InvoiceEntity, (invoice) => invoice.payment)\r\n  invoices: InvoiceEntity[];\r\n} "],"version":3}