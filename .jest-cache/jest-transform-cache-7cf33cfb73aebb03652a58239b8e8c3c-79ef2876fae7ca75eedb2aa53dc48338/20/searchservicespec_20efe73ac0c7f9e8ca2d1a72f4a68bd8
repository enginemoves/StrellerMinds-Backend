ece1f9be96c1580ce550a14bfd2c094e
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals"); // Import jest to declare it
const testing_1 = require("@nestjs/testing");
const elasticsearch_1 = require("@nestjs/elasticsearch");
const typeorm_1 = require("@nestjs/typeorm");
const search_service_1 = require("./search.service");
const course_entity_1 = require("../courses/entities/course.entity");
const search_analytics_entity_1 = require("./entities/search-analytics.entity");
const common_1 = require("@nestjs/common");
describe("SearchService", () => {
    let service;
    let elasticsearchService;
    let courseRepository;
    let searchAnalyticsRepository;
    const mockElasticsearchService = {
        search: globals_1.jest.fn(),
        index: globals_1.jest.fn(),
        update: globals_1.jest.fn(),
        delete: globals_1.jest.fn(),
        indices: {
            create: globals_1.jest.fn(),
            exists: globals_1.jest.fn(),
            putMapping: globals_1.jest.fn(),
        },
        bulk: globals_1.jest.fn(),
    };
    const mockCourseRepository = {
        find: globals_1.jest.fn(),
        findOne: globals_1.jest.fn(),
        createQueryBuilder: globals_1.jest.fn(),
    };
    const mockSearchAnalyticsRepository = {
        save: globals_1.jest.fn(),
        find: globals_1.jest.fn(),
        createQueryBuilder: globals_1.jest.fn(),
    };
    const mockCourses = [
        {
            id: "1",
            title: "Introduction to Stellar Blockchain",
            description: "Learn the basics of Stellar blockchain technology",
            category: "blockchain",
            level: "beginner",
            duration: 120,
            price: 99.99,
            instructor: "John Doe",
            tags: ["stellar", "blockchain", "cryptocurrency"],
            createdAt: new Date("2024-01-01"),
            updatedAt: new Date("2024-01-01"),
        },
        {
            id: "2",
            title: "Advanced Smart Contracts on Stellar",
            description: "Master smart contract development on Stellar network",
            category: "development",
            level: "advanced",
            duration: 240,
            price: 199.99,
            instructor: "Jane Smith",
            tags: ["stellar", "smart-contracts", "development"],
            createdAt: new Date("2024-01-02"),
            updatedAt: new Date("2024-01-02"),
        },
    ];
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                search_service_1.SearchService,
                {
                    provide: elasticsearch_1.ElasticsearchService,
                    useValue: mockElasticsearchService,
                },
                {
                    provide: (0, typeorm_1.getRepositoryToken)(course_entity_1.Course),
                    useValue: mockCourseRepository,
                },
                {
                    provide: (0, typeorm_1.getRepositoryToken)(search_analytics_entity_1.SearchAnalytics),
                    useValue: mockSearchAnalyticsRepository,
                },
            ],
        }).compile();
        service = module.get(search_service_1.SearchService);
        elasticsearchService = module.get(elasticsearch_1.ElasticsearchService);
        courseRepository = module.get((0, typeorm_1.getRepositoryToken)(course_entity_1.Course));
        searchAnalyticsRepository = module.get((0, typeorm_1.getRepositoryToken)(search_analytics_entity_1.SearchAnalytics));
    });
    afterEach(() => {
        globals_1.jest.clearAllMocks();
    });
    describe("onModuleInit", () => {
        it("should initialize Elasticsearch index", async () => {
            mockElasticsearchService.indices.exists.mockResolvedValue({ body: false });
            mockElasticsearchService.indices.create.mockResolvedValue({ body: { acknowledged: true } });
            mockElasticsearchService.indices.putMapping.mockResolvedValue({ body: { acknowledged: true } });
            await service.onModuleInit();
            expect(mockElasticsearchService.indices.exists).toHaveBeenCalledWith({
                index: "courses",
            });
            expect(mockElasticsearchService.indices.create).toHaveBeenCalledWith({
                index: "courses",
                body: expect.objectContaining({
                    settings: expect.any(Object),
                }),
            });
        });
        it("should not create index if it already exists", async () => {
            mockElasticsearchService.indices.exists.mockResolvedValue({ body: true });
            await service.onModuleInit();
            expect(mockElasticsearchService.indices.create).not.toHaveBeenCalled();
        });
    });
    describe("indexCourse", () => {
        it("should index a course successfully", async () => {
            const course = mockCourses[0];
            mockElasticsearchService.index.mockResolvedValue({
                body: { _id: course.id, result: "created" },
            });
            const result = await service.indexCourse(course);
            expect(mockElasticsearchService.index).toHaveBeenCalledWith({
                index: "courses",
                id: course.id,
                body: {
                    title: course.title,
                    description: course.description,
                    category: course.category,
                    level: course.level,
                    duration: course.duration,
                    price: course.price,
                    instructor: course.instructor,
                    tags: course.tags,
                    createdAt: course.createdAt,
                    updatedAt: course.updatedAt,
                },
            });
            expect(result).toEqual({ _id: course.id, result: "created" });
        });
        it("should handle indexing errors", async () => {
            const course = mockCourses[0];
            mockElasticsearchService.index.mockRejectedValue(new Error("Elasticsearch error"));
            await expect(service.indexCourse(course)).rejects.toThrow(common_1.InternalServerErrorException);
        });
    });
    describe("search", () => {
        const searchDto = {
            query: "stellar blockchain",
            page: 1,
            limit: 10,
        };
        it("should perform full-text search successfully", async () => {
            const mockSearchResponse = {
                body: {
                    hits: {
                        total: { value: 2 },
                        hits: [
                            {
                                _id: "1",
                                _source: mockCourses[0],
                                _score: 1.5,
                            },
                            {
                                _id: "2",
                                _source: mockCourses[1],
                                _score: 1.2,
                            },
                        ],
                    },
                    aggregations: {
                        categories: {
                            buckets: [
                                { key: "blockchain", doc_count: 1 },
                                { key: "development", doc_count: 1 },
                            ],
                        },
                    },
                },
            };
            mockElasticsearchService.search.mockResolvedValue(mockSearchResponse);
            mockSearchAnalyticsRepository.save.mockResolvedValue({});
            const result = await service.search(searchDto, "user123");
            expect(mockElasticsearchService.search).toHaveBeenCalledWith({
                index: "courses",
                body: expect.objectContaining({
                    query: expect.objectContaining({
                        multi_match: expect.objectContaining({
                            query: "stellar blockchain",
                            fields: ["title^3", "description^2", "instructor", "tags"],
                        }),
                    }),
                    from: 0,
                    size: 10,
                }),
            });
            expect(result).toEqual({
                courses: mockCourses,
                total: 2,
                page: 1,
                limit: 10,
                totalPages: 1,
                aggregations: {
                    categories: [
                        { key: "blockchain", doc_count: 1 },
                        { key: "development", doc_count: 1 },
                    ],
                },
            });
            expect(mockSearchAnalyticsRepository.save).toHaveBeenCalledWith(expect.objectContaining({
                query: "stellar blockchain",
                userId: "user123",
                resultsCount: 2,
            }));
        });
        it("should handle empty search query", async () => {
            const emptySearchDto = {
                query: "",
                page: 1,
                limit: 10,
            };
            await expect(service.search(emptySearchDto, "user123")).rejects.toThrow(common_1.BadRequestException);
        });
        it("should handle search errors", async () => {
            mockElasticsearchService.search.mockRejectedValue(new Error("Search failed"));
            await expect(service.search(searchDto, "user123")).rejects.toThrow(common_1.InternalServerErrorException);
        });
    });
    describe("advancedSearch", () => {
        const advancedFilterDto = {
            query: "stellar",
            categories: ["blockchain", "development"],
            levels: ["beginner", "advanced"],
            priceRange: { min: 50, max: 200 },
            durationRange: { min: 60, max: 300 },
            instructors: ["John Doe"],
            tags: ["stellar"],
            sortBy: "relevance",
            sortOrder: "desc",
            page: 1,
            limit: 10,
        };
        it("should perform advanced search with filters", async () => {
            const mockSearchResponse = {
                body: {
                    hits: {
                        total: { value: 1 },
                        hits: [
                            {
                                _id: "1",
                                _source: mockCourses[0],
                                _score: 1.5,
                            },
                        ],
                    },
                },
            };
            mockElasticsearchService.search.mockResolvedValue(mockSearchResponse);
            mockSearchAnalyticsRepository.save.mockResolvedValue({});
            const result = await service.advancedSearch(advancedFilterDto, "user123");
            expect(mockElasticsearchService.search).toHaveBeenCalledWith({
                index: "courses",
                body: expect.objectContaining({
                    query: expect.objectContaining({
                        bool: expect.objectContaining({
                            must: expect.arrayContaining([
                                expect.objectContaining({
                                    multi_match: expect.objectContaining({
                                        query: "stellar",
                                    }),
                                }),
                            ]),
                            filter: expect.arrayContaining([
                                expect.objectContaining({
                                    terms: { category: ["blockchain", "development"] },
                                }),
                                expect.objectContaining({
                                    terms: { level: ["beginner", "advanced"] },
                                }),
                                expect.objectContaining({
                                    range: { price: { gte: 50, lte: 200 } },
                                }),
                            ]),
                        }),
                    }),
                }),
            });
            expect(result.courses).toHaveLength(1);
            expect(result.total).toBe(1);
        });
        it("should handle sorting options", async () => {
            const sortDto = { ...advancedFilterDto, sortBy: "price", sortOrder: "asc" };
            mockElasticsearchService.search.mockResolvedValue({
                body: { hits: { total: { value: 0 }, hits: [] } },
            });
            await service.advancedSearch(sortDto, "user123");
            expect(mockElasticsearchService.search).toHaveBeenCalledWith(expect.objectContaining({
                body: expect.objectContaining({
                    sort: [{ price: { order: "asc" } }],
                }),
            }));
        });
    });
    describe("getSuggestions", () => {
        const suggestionDto = {
            query: "stel",
            limit: 5,
        };
        it("should return search suggestions", async () => {
            const mockSuggestResponse = {
                body: {
                    suggest: {
                        title_suggest: [
                            {
                                options: [
                                    { text: "stellar", _score: 1.0 },
                                    { text: "stellar blockchain", _score: 0.8 },
                                ],
                            },
                        ],
                        description_suggest: [
                            {
                                options: [{ text: "stellar network", _score: 0.9 }],
                            },
                        ],
                    },
                },
            };
            mockElasticsearchService.search.mockResolvedValue(mockSuggestResponse);
            const result = await service.getSuggestions(suggestionDto);
            expect(mockElasticsearchService.search).toHaveBeenCalledWith({
                index: "courses",
                body: {
                    suggest: {
                        title_suggest: {
                            prefix: "stel",
                            completion: {
                                field: "title.suggest",
                                size: 5,
                            },
                        },
                        description_suggest: {
                            prefix: "stel",
                            completion: {
                                field: "description.suggest",
                                size: 5,
                            },
                        },
                    },
                },
            });
            expect(result).toEqual({
                suggestions: [
                    { text: "stellar", score: 1.0, source: "title" },
                    { text: "stellar blockchain", score: 0.8, source: "title" },
                    { text: "stellar network", score: 0.9, source: "description" },
                ],
            });
        });
        it("should handle empty suggestions", async () => {
            mockElasticsearchService.search.mockResolvedValue({
                body: {
                    suggest: {
                        title_suggest: [{ options: [] }],
                        description_suggest: [{ options: [] }],
                    },
                },
            });
            const result = await service.getSuggestions(suggestionDto);
            expect(result.suggestions).toHaveLength(0);
        });
    });
    describe("getSearchAnalytics", () => {
        it("should return search analytics", async () => {
            const mockAnalytics = [
                {
                    id: "1",
                    query: "stellar",
                    userId: "user123",
                    resultsCount: 5,
                    clickedResults: ["1", "2"],
                    searchedAt: new Date(),
                },
            ];
            const mockQueryBuilder = {
                where: globals_1.jest.fn().mockReturnThis(),
                andWhere: globals_1.jest.fn().mockReturnThis(),
                orderBy: globals_1.jest.fn().mockReturnThis(),
                limit: globals_1.jest.fn().mockReturnThis(),
                getMany: globals_1.jest.fn().mockResolvedValue(mockAnalytics),
                select: globals_1.jest.fn().mockReturnThis(),
                addSelect: globals_1.jest.fn().mockReturnThis(),
                groupBy: globals_1.jest.fn().mockReturnThis(),
                getRawMany: globals_1.jest.fn().mockResolvedValue([
                    { query: "stellar", count: "10" },
                    { query: "blockchain", count: "8" },
                ]),
            };
            mockSearchAnalyticsRepository.createQueryBuilder.mockReturnValue(mockQueryBuilder);
            const result = await service.getSearchAnalytics({
                startDate: new Date("2024-01-01"),
                endDate: new Date("2024-01-31"),
                userId: "user123",
            });
            expect(result).toEqual({
                recentSearches: mockAnalytics,
                popularQueries: [
                    { query: "stellar", count: 10 },
                    { query: "blockchain", count: 8 },
                ],
            });
        });
    });
    describe("updateCourse", () => {
        it("should update course in Elasticsearch", async () => {
            const courseId = "1";
            const updateData = { title: "Updated Title" };
            mockElasticsearchService.update.mockResolvedValue({
                body: { _id: courseId, result: "updated" },
            });
            const result = await service.updateCourse(courseId, updateData);
            expect(mockElasticsearchService.update).toHaveBeenCalledWith({
                index: "courses",
                id: courseId,
                body: {
                    doc: updateData,
                },
            });
            expect(result).toEqual({ _id: courseId, result: "updated" });
        });
    });
    describe("deleteCourse", () => {
        it("should delete course from Elasticsearch", async () => {
            const courseId = "1";
            mockElasticsearchService.delete.mockResolvedValue({
                body: { _id: courseId, result: "deleted" },
            });
            const result = await service.deleteCourse(courseId);
            expect(mockElasticsearchService.delete).toHaveBeenCalledWith({
                index: "courses",
                id: courseId,
            });
            expect(result).toEqual({ _id: courseId, result: "deleted" });
        });
    });
    describe("bulkIndexCourses", () => {
        it("should bulk index multiple courses", async () => {
            mockElasticsearchService.bulk.mockResolvedValue({
                body: {
                    errors: false,
                    items: [{ index: { _id: "1", result: "created" } }, { index: { _id: "2", result: "created" } }],
                },
            });
            const result = await service.bulkIndexCourses(mockCourses);
            expect(mockElasticsearchService.bulk).toHaveBeenCalledWith({
                body: expect.arrayContaining([
                    { index: { _index: "courses", _id: "1" } },
                    expect.objectContaining({ title: mockCourses[0].title }),
                    { index: { _index: "courses", _id: "2" } },
                    expect.objectContaining({ title: mockCourses[1].title }),
                ]),
            });
            expect(result.errors).toBe(false);
            expect(result.items).toHaveLength(2);
        });
        it("should handle bulk indexing errors", async () => {
            mockElasticsearchService.bulk.mockResolvedValue({
                body: {
                    errors: true,
                    items: [{ index: { _id: "1", error: { reason: "Document already exists" } } }],
                },
            });
            const result = await service.bulkIndexCourses([mockCourses[0]]);
            expect(result.errors).toBe(true);
            expect(result.items[0].index.error).toBeDefined();
        });
    });
    describe("getPopularSearchTerms", () => {
        it("should return popular search terms", async () => {
            const mockQueryBuilder = {
                select: globals_1.jest.fn().mockReturnThis(),
                addSelect: globals_1.jest.fn().mockReturnThis(),
                where: globals_1.jest.fn().mockReturnThis(),
                groupBy: globals_1.jest.fn().mockReturnThis(),
                orderBy: globals_1.jest.fn().mockReturnThis(),
                limit: globals_1.jest.fn().mockReturnThis(),
                getRawMany: globals_1.jest.fn().mockResolvedValue([
                    { query: "stellar", searchCount: "15" },
                    { query: "blockchain", searchCount: "12" },
                    { query: "smart contracts", searchCount: "8" },
                ]),
            };
            mockSearchAnalyticsRepository.createQueryBuilder.mockReturnValue(mockQueryBuilder);
            const result = await service.getPopularSearchTerms(10);
            expect(result).toEqual([
                { query: "stellar", searchCount: 15 },
                { query: "blockchain", searchCount: 12 },
                { query: "smart contracts", searchCount: 8 },
            ]);
            expect(mockQueryBuilder.limit).toHaveBeenCalledWith(10);
        });
    });
    describe("trackSearchClick", () => {
        it("should track search result click", async () => {
            const searchId = "search123";
            const courseId = "course456";
            const mockSearchAnalytic = {
                id: searchId,
                clickedResults: ["course123"],
                save: globals_1.jest.fn(),
            };
            mockSearchAnalyticsRepository.findOne.mockResolvedValue(mockSearchAnalytic);
            await service.trackSearchClick(searchId, courseId);
            expect(mockSearchAnalyticsRepository.findOne).toHaveBeenCalledWith({
                where: { id: searchId },
            });
            expect(mockSearchAnalytic.clickedResults).toContain(courseId);
            expect(mockSearchAnalytic.save).toHaveBeenCalled();
        });
        it("should handle non-existent search analytics", async () => {
            mockSearchAnalyticsRepository.findOne.mockResolvedValue(null);
            await expect(service.trackSearchClick("nonexistent", "course123")).rejects.toThrow(common_1.BadRequestException);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxvam9zZXBoXFxEb2N1bWVudHNcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFxzZWFyY2hcXHNlYXJjaC5zZXJ2aWNlLnNwZWMudHMiLCJtYXBwaW5ncyI6Ijs7QUFXQSwyQ0FBb0MsQ0FBQyw0QkFBNEI7QUFYakUsNkNBQTBEO0FBQzFELHlEQUE0RDtBQUM1RCw2Q0FBb0Q7QUFFcEQscURBQWdEO0FBQ2hELHFFQUEwRDtBQUMxRCxnRkFBb0U7QUFJcEUsMkNBQWtGO0FBR2xGLFFBQVEsQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFO0lBQzdCLElBQUksT0FBc0IsQ0FBQTtJQUMxQixJQUFJLG9CQUEwQyxDQUFBO0lBQzlDLElBQUksZ0JBQW9DLENBQUE7SUFDeEMsSUFBSSx5QkFBc0QsQ0FBQTtJQUUxRCxNQUFNLHdCQUF3QixHQUFHO1FBQy9CLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLEtBQUssRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2hCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLE9BQU8sRUFBRTtZQUNQLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLFVBQVUsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1NBQ3RCO1FBQ0QsSUFBSSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7S0FDaEIsQ0FBQTtJQUVELE1BQU0sb0JBQW9CLEdBQUc7UUFDM0IsSUFBSSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZixPQUFPLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNsQixrQkFBa0IsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0tBQzlCLENBQUE7SUFFRCxNQUFNLDZCQUE2QixHQUFHO1FBQ3BDLElBQUksRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FB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XFxvam9zZXBoXFxEb2N1bWVudHNcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFxzZWFyY2hcXHNlYXJjaC5zZXJ2aWNlLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGVzdCwgdHlwZSBUZXN0aW5nTW9kdWxlIH0gZnJvbSBcIkBuZXN0anMvdGVzdGluZ1wiXHJcbmltcG9ydCB7IEVsYXN0aWNzZWFyY2hTZXJ2aWNlIH0gZnJvbSBcIkBuZXN0anMvZWxhc3RpY3NlYXJjaFwiXHJcbmltcG9ydCB7IGdldFJlcG9zaXRvcnlUb2tlbiB9IGZyb20gXCJAbmVzdGpzL3R5cGVvcm1cIlxyXG5pbXBvcnQgdHlwZSB7IFJlcG9zaXRvcnkgfSBmcm9tIFwidHlwZW9ybVwiXHJcbmltcG9ydCB7IFNlYXJjaFNlcnZpY2UgfSBmcm9tIFwiLi9zZWFyY2guc2VydmljZVwiXHJcbmltcG9ydCB7IENvdXJzZSB9IGZyb20gXCIuLi9jb3Vyc2VzL2VudGl0aWVzL2NvdXJzZS5lbnRpdHlcIlxyXG5pbXBvcnQgeyBTZWFyY2hBbmFseXRpY3MgfSBmcm9tIFwiLi9lbnRpdGllcy9zZWFyY2gtYW5hbHl0aWNzLmVudGl0eVwiXHJcbmltcG9ydCB0eXBlIHsgU2VhcmNoRHRvIH0gZnJvbSBcIi4vZHRvL3NlYXJjaC5kdG9cIlxyXG5pbXBvcnQgdHlwZSB7IEFkdmFuY2VkRmlsdGVyRHRvIH0gZnJvbSBcIi4vZHRvL2FkdmFuY2VkLWZpbHRlci5kdG9cIlxyXG5pbXBvcnQgdHlwZSB7IFNlYXJjaFN1Z2dlc3Rpb25EdG8gfSBmcm9tIFwiLi9kdG8vc2VhcmNoLXN1Z2dlc3Rpb24uZHRvXCJcclxuaW1wb3J0IHsgQmFkUmVxdWVzdEV4Y2VwdGlvbiwgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbiB9IGZyb20gXCJAbmVzdGpzL2NvbW1vblwiXHJcbmltcG9ydCB7IGplc3QgfSBmcm9tIFwiQGplc3QvZ2xvYmFsc1wiIC8vIEltcG9ydCBqZXN0IHRvIGRlY2xhcmUgaXRcclxuXHJcbmRlc2NyaWJlKFwiU2VhcmNoU2VydmljZVwiLCAoKSA9PiB7XHJcbiAgbGV0IHNlcnZpY2U6IFNlYXJjaFNlcnZpY2VcclxuICBsZXQgZWxhc3RpY3NlYXJjaFNlcnZpY2U6IEVsYXN0aWNzZWFyY2hTZXJ2aWNlXHJcbiAgbGV0IGNvdXJzZVJlcG9zaXRvcnk6IFJlcG9zaXRvcnk8Q291cnNlPlxyXG4gIGxldCBzZWFyY2hBbmFseXRpY3NSZXBvc2l0b3J5OiBSZXBvc2l0b3J5PFNlYXJjaEFuYWx5dGljcz5cclxuXHJcbiAgY29uc3QgbW9ja0VsYXN0aWNzZWFyY2hTZXJ2aWNlID0ge1xyXG4gICAgc2VhcmNoOiBqZXN0LmZuKCksXHJcbiAgICBpbmRleDogamVzdC5mbigpLFxyXG4gICAgdXBkYXRlOiBqZXN0LmZuKCksXHJcbiAgICBkZWxldGU6IGplc3QuZm4oKSxcclxuICAgIGluZGljZXM6IHtcclxuICAgICAgY3JlYXRlOiBqZXN0LmZuKCksXHJcbiAgICAgIGV4aXN0czogamVzdC5mbigpLFxyXG4gICAgICBwdXRNYXBwaW5nOiBqZXN0LmZuKCksXHJcbiAgICB9LFxyXG4gICAgYnVsazogamVzdC5mbigpLFxyXG4gIH1cclxuXHJcbiAgY29uc3QgbW9ja0NvdXJzZVJlcG9zaXRvcnkgPSB7XHJcbiAgICBmaW5kOiBqZXN0LmZuKCksXHJcbiAgICBmaW5kT25lOiBqZXN0LmZuKCksXHJcbiAgICBjcmVhdGVRdWVyeUJ1aWxkZXI6IGplc3QuZm4oKSxcclxuICB9XHJcblxyXG4gIGNvbnN0IG1vY2tTZWFyY2hBbmFseXRpY3NSZXBvc2l0b3J5ID0ge1xyXG4gICAgc2F2ZTogamVzdC5mbigpLFxyXG4gICAgZmluZDogamVzdC5mbigpLFxyXG4gICAgY3JlYXRlUXVlcnlCdWlsZGVyOiBqZXN0LmZuKCksXHJcbiAgfVxyXG5cclxuICBjb25zdCBtb2NrQ291cnNlcyA9IFtcclxuICAgIHtcclxuICAgICAgaWQ6IFwiMVwiLFxyXG4gICAgICB0aXRsZTogXCJJbnRyb2R1Y3Rpb24gdG8gU3RlbGxhciBCbG9ja2NoYWluXCIsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkxlYXJuIHRoZSBiYXNpY3Mgb2YgU3RlbGxhciBibG9ja2NoYWluIHRlY2hub2xvZ3lcIixcclxuICAgICAgY2F0ZWdvcnk6IFwiYmxvY2tjaGFpblwiLFxyXG4gICAgICBsZXZlbDogXCJiZWdpbm5lclwiLFxyXG4gICAgICBkdXJhdGlvbjogMTIwLFxyXG4gICAgICBwcmljZTogOTkuOTksXHJcbiAgICAgIGluc3RydWN0b3I6IFwiSm9obiBEb2VcIixcclxuICAgICAgdGFnczogW1wic3RlbGxhclwiLCBcImJsb2NrY2hhaW5cIiwgXCJjcnlwdG9jdXJyZW5jeVwiXSxcclxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShcIjIwMjQtMDEtMDFcIiksXHJcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoXCIyMDI0LTAxLTAxXCIpLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgaWQ6IFwiMlwiLFxyXG4gICAgICB0aXRsZTogXCJBZHZhbmNlZCBTbWFydCBDb250cmFjdHMgb24gU3RlbGxhclwiLFxyXG4gICAgICBkZXNjcmlwdGlvbjogXCJNYXN0ZXIgc21hcnQgY29udHJhY3QgZGV2ZWxvcG1lbnQgb24gU3RlbGxhciBuZXR3b3JrXCIsXHJcbiAgICAgIGNhdGVnb3J5OiBcImRldmVsb3BtZW50XCIsXHJcbiAgICAgIGxldmVsOiBcImFkdmFuY2VkXCIsXHJcbiAgICAgIGR1cmF0aW9uOiAyNDAsXHJcbiAgICAgIHByaWNlOiAxOTkuOTksXHJcbiAgICAgIGluc3RydWN0b3I6IFwiSmFuZSBTbWl0aFwiLFxyXG4gICAgICB0YWdzOiBbXCJzdGVsbGFyXCIsIFwic21hcnQtY29udHJhY3RzXCIsIFwiZGV2ZWxvcG1lbnRcIl0sXHJcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoXCIyMDI0LTAxLTAyXCIpLFxyXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKFwiMjAyNC0wMS0wMlwiKSxcclxuICAgIH0sXHJcbiAgXVxyXG5cclxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IG1vZHVsZTogVGVzdGluZ01vZHVsZSA9IGF3YWl0IFRlc3QuY3JlYXRlVGVzdGluZ01vZHVsZSh7XHJcbiAgICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgIFNlYXJjaFNlcnZpY2UsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZTogRWxhc3RpY3NlYXJjaFNlcnZpY2UsXHJcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja0VsYXN0aWNzZWFyY2hTZXJ2aWNlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZTogZ2V0UmVwb3NpdG9yeVRva2VuKENvdXJzZSksXHJcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja0NvdXJzZVJlcG9zaXRvcnksXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcm92aWRlOiBnZXRSZXBvc2l0b3J5VG9rZW4oU2VhcmNoQW5hbHl0aWNzKSxcclxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrU2VhcmNoQW5hbHl0aWNzUmVwb3NpdG9yeSxcclxuICAgICAgICB9LFxyXG4gICAgICBdLFxyXG4gICAgfSkuY29tcGlsZSgpXHJcblxyXG4gICAgc2VydmljZSA9IG1vZHVsZS5nZXQ8U2VhcmNoU2VydmljZT4oU2VhcmNoU2VydmljZSlcclxuICAgIGVsYXN0aWNzZWFyY2hTZXJ2aWNlID0gbW9kdWxlLmdldDxFbGFzdGljc2VhcmNoU2VydmljZT4oRWxhc3RpY3NlYXJjaFNlcnZpY2UpXHJcbiAgICBjb3Vyc2VSZXBvc2l0b3J5ID0gbW9kdWxlLmdldDxSZXBvc2l0b3J5PENvdXJzZT4+KGdldFJlcG9zaXRvcnlUb2tlbihDb3Vyc2UpKVxyXG4gICAgc2VhcmNoQW5hbHl0aWNzUmVwb3NpdG9yeSA9IG1vZHVsZS5nZXQ8UmVwb3NpdG9yeTxTZWFyY2hBbmFseXRpY3M+PihnZXRSZXBvc2l0b3J5VG9rZW4oU2VhcmNoQW5hbHl0aWNzKSlcclxuICB9KVxyXG5cclxuICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKClcclxuICB9KVxyXG5cclxuICBkZXNjcmliZShcIm9uTW9kdWxlSW5pdFwiLCAoKSA9PiB7XHJcbiAgICBpdChcInNob3VsZCBpbml0aWFsaXplIEVsYXN0aWNzZWFyY2ggaW5kZXhcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBtb2NrRWxhc3RpY3NlYXJjaFNlcnZpY2UuaW5kaWNlcy5leGlzdHMubW9ja1Jlc29sdmVkVmFsdWUoeyBib2R5OiBmYWxzZSB9KVxyXG4gICAgICBtb2NrRWxhc3RpY3NlYXJjaFNlcnZpY2UuaW5kaWNlcy5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUoeyBib2R5OiB7IGFja25vd2xlZGdlZDogdHJ1ZSB9IH0pXHJcbiAgICAgIG1vY2tFbGFzdGljc2VhcmNoU2VydmljZS5pbmRpY2VzLnB1dE1hcHBpbmcubW9ja1Jlc29sdmVkVmFsdWUoeyBib2R5OiB7IGFja25vd2xlZGdlZDogdHJ1ZSB9IH0pXHJcblxyXG4gICAgICBhd2FpdCBzZXJ2aWNlLm9uTW9kdWxlSW5pdCgpXHJcblxyXG4gICAgICBleHBlY3QobW9ja0VsYXN0aWNzZWFyY2hTZXJ2aWNlLmluZGljZXMuZXhpc3RzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgaW5kZXg6IFwiY291cnNlc1wiLFxyXG4gICAgICB9KVxyXG4gICAgICBleHBlY3QobW9ja0VsYXN0aWNzZWFyY2hTZXJ2aWNlLmluZGljZXMuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgaW5kZXg6IFwiY291cnNlc1wiLFxyXG4gICAgICAgIGJvZHk6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIHNldHRpbmdzOiBleHBlY3QuYW55KE9iamVjdCksXHJcbiAgICAgICAgfSksXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KFwic2hvdWxkIG5vdCBjcmVhdGUgaW5kZXggaWYgaXQgYWxyZWFkeSBleGlzdHNcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBtb2NrRWxhc3RpY3NlYXJjaFNlcnZpY2UuaW5kaWNlcy5leGlzdHMubW9ja1Jlc29sdmVkVmFsdWUoeyBib2R5OiB0cnVlIH0pXHJcblxyXG4gICAgICBhd2FpdCBzZXJ2aWNlLm9uTW9kdWxlSW5pdCgpXHJcblxyXG4gICAgICBleHBlY3QobW9ja0VsYXN0aWNzZWFyY2hTZXJ2aWNlLmluZGljZXMuY3JlYXRlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKFwiaW5kZXhDb3Vyc2VcIiwgKCkgPT4ge1xyXG4gICAgaXQoXCJzaG91bGQgaW5kZXggYSBjb3Vyc2Ugc3VjY2Vzc2Z1bGx5XCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY291cnNlID0gbW9ja0NvdXJzZXNbMF1cclxuICAgICAgbW9ja0VsYXN0aWNzZWFyY2hTZXJ2aWNlLmluZGV4Lm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBib2R5OiB7IF9pZDogY291cnNlLmlkLCByZXN1bHQ6IFwiY3JlYXRlZFwiIH0sXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmluZGV4Q291cnNlKGNvdXJzZSlcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrRWxhc3RpY3NlYXJjaFNlcnZpY2UuaW5kZXgpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBpbmRleDogXCJjb3Vyc2VzXCIsXHJcbiAgICAgICAgaWQ6IGNvdXJzZS5pZCxcclxuICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICB0aXRsZTogY291cnNlLnRpdGxlLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IGNvdXJzZS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgIGNhdGVnb3J5OiBjb3Vyc2UuY2F0ZWdvcnksXHJcbiAgICAgICAgICBsZXZlbDogY291cnNlLmxldmVsLFxyXG4gICAgICAgICAgZHVyYXRpb246IGNvdXJzZS5kdXJhdGlvbixcclxuICAgICAgICAgIHByaWNlOiBjb3Vyc2UucHJpY2UsXHJcbiAgICAgICAgICBpbnN0cnVjdG9yOiBjb3Vyc2UuaW5zdHJ1Y3RvcixcclxuICAgICAgICAgIHRhZ3M6IGNvdXJzZS50YWdzLFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBjb3Vyc2UuY3JlYXRlZEF0LFxyXG4gICAgICAgICAgdXBkYXRlZEF0OiBjb3Vyc2UudXBkYXRlZEF0LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoeyBfaWQ6IGNvdXJzZS5pZCwgcmVzdWx0OiBcImNyZWF0ZWRcIiB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBpdChcInNob3VsZCBoYW5kbGUgaW5kZXhpbmcgZXJyb3JzXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY291cnNlID0gbW9ja0NvdXJzZXNbMF1cclxuICAgICAgbW9ja0VsYXN0aWNzZWFyY2hTZXJ2aWNlLmluZGV4Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcihcIkVsYXN0aWNzZWFyY2ggZXJyb3JcIikpXHJcblxyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5pbmRleENvdXJzZShjb3Vyc2UpKS5yZWplY3RzLnRvVGhyb3coSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbilcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgZGVzY3JpYmUoXCJzZWFyY2hcIiwgKCkgPT4ge1xyXG4gICAgY29uc3Qgc2VhcmNoRHRvOiBTZWFyY2hEdG8gPSB7XHJcbiAgICAgIHF1ZXJ5OiBcInN0ZWxsYXIgYmxvY2tjaGFpblwiLFxyXG4gICAgICBwYWdlOiAxLFxyXG4gICAgICBsaW1pdDogMTAsXHJcbiAgICB9XHJcblxyXG4gICAgaXQoXCJzaG91bGQgcGVyZm9ybSBmdWxsLXRleHQgc2VhcmNoIHN1Y2Nlc3NmdWxseVwiLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tTZWFyY2hSZXNwb25zZSA9IHtcclxuICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICBoaXRzOiB7XHJcbiAgICAgICAgICAgIHRvdGFsOiB7IHZhbHVlOiAyIH0sXHJcbiAgICAgICAgICAgIGhpdHM6IFtcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfaWQ6IFwiMVwiLFxyXG4gICAgICAgICAgICAgICAgX3NvdXJjZTogbW9ja0NvdXJzZXNbMF0sXHJcbiAgICAgICAgICAgICAgICBfc2NvcmU6IDEuNSxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9pZDogXCIyXCIsXHJcbiAgICAgICAgICAgICAgICBfc291cmNlOiBtb2NrQ291cnNlc1sxXSxcclxuICAgICAgICAgICAgICAgIF9zY29yZTogMS4yLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgYWdncmVnYXRpb25zOiB7XHJcbiAgICAgICAgICAgIGNhdGVnb3JpZXM6IHtcclxuICAgICAgICAgICAgICBidWNrZXRzOiBbXHJcbiAgICAgICAgICAgICAgICB7IGtleTogXCJibG9ja2NoYWluXCIsIGRvY19jb3VudDogMSB9LFxyXG4gICAgICAgICAgICAgICAgeyBrZXk6IFwiZGV2ZWxvcG1lbnRcIiwgZG9jX2NvdW50OiAxIH0sXHJcbiAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG5cclxuICAgICAgbW9ja0VsYXN0aWNzZWFyY2hTZXJ2aWNlLnNlYXJjaC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrU2VhcmNoUmVzcG9uc2UpXHJcbiAgICAgIG1vY2tTZWFyY2hBbmFseXRpY3NSZXBvc2l0b3J5LnNhdmUubW9ja1Jlc29sdmVkVmFsdWUoe30pXHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnNlYXJjaChzZWFyY2hEdG8sIFwidXNlcjEyM1wiKVxyXG5cclxuICAgICAgZXhwZWN0KG1vY2tFbGFzdGljc2VhcmNoU2VydmljZS5zZWFyY2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBpbmRleDogXCJjb3Vyc2VzXCIsXHJcbiAgICAgICAgYm9keTogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgcXVlcnk6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgbXVsdGlfbWF0Y2g6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgICAgICBxdWVyeTogXCJzdGVsbGFyIGJsb2NrY2hhaW5cIixcclxuICAgICAgICAgICAgICBmaWVsZHM6IFtcInRpdGxlXjNcIiwgXCJkZXNjcmlwdGlvbl4yXCIsIFwiaW5zdHJ1Y3RvclwiLCBcInRhZ3NcIl0sXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICBmcm9tOiAwLFxyXG4gICAgICAgICAgc2l6ZTogMTAsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcclxuICAgICAgICBjb3Vyc2VzOiBtb2NrQ291cnNlcyxcclxuICAgICAgICB0b3RhbDogMixcclxuICAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgIGxpbWl0OiAxMCxcclxuICAgICAgICB0b3RhbFBhZ2VzOiAxLFxyXG4gICAgICAgIGFnZ3JlZ2F0aW9uczoge1xyXG4gICAgICAgICAgY2F0ZWdvcmllczogW1xyXG4gICAgICAgICAgICB7IGtleTogXCJibG9ja2NoYWluXCIsIGRvY19jb3VudDogMSB9LFxyXG4gICAgICAgICAgICB7IGtleTogXCJkZXZlbG9wbWVudFwiLCBkb2NfY291bnQ6IDEgfSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrU2VhcmNoQW5hbHl0aWNzUmVwb3NpdG9yeS5zYXZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICBxdWVyeTogXCJzdGVsbGFyIGJsb2NrY2hhaW5cIixcclxuICAgICAgICAgIHVzZXJJZDogXCJ1c2VyMTIzXCIsXHJcbiAgICAgICAgICByZXN1bHRzQ291bnQ6IDIsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgaXQoXCJzaG91bGQgaGFuZGxlIGVtcHR5IHNlYXJjaCBxdWVyeVwiLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVtcHR5U2VhcmNoRHRvOiBTZWFyY2hEdG8gPSB7XHJcbiAgICAgICAgcXVlcnk6IFwiXCIsXHJcbiAgICAgICAgcGFnZTogMSxcclxuICAgICAgICBsaW1pdDogMTAsXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnNlYXJjaChlbXB0eVNlYXJjaER0bywgXCJ1c2VyMTIzXCIpKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEV4Y2VwdGlvbilcclxuICAgIH0pXHJcblxyXG4gICAgaXQoXCJzaG91bGQgaGFuZGxlIHNlYXJjaCBlcnJvcnNcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBtb2NrRWxhc3RpY3NlYXJjaFNlcnZpY2Uuc2VhcmNoLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcihcIlNlYXJjaCBmYWlsZWRcIikpXHJcblxyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5zZWFyY2goc2VhcmNoRHRvLCBcInVzZXIxMjNcIikpLnJlamVjdHMudG9UaHJvdyhJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBkZXNjcmliZShcImFkdmFuY2VkU2VhcmNoXCIsICgpID0+IHtcclxuICAgIGNvbnN0IGFkdmFuY2VkRmlsdGVyRHRvOiBBZHZhbmNlZEZpbHRlckR0byA9IHtcclxuICAgICAgcXVlcnk6IFwic3RlbGxhclwiLFxyXG4gICAgICBjYXRlZ29yaWVzOiBbXCJibG9ja2NoYWluXCIsIFwiZGV2ZWxvcG1lbnRcIl0sXHJcbiAgICAgIGxldmVsczogW1wiYmVnaW5uZXJcIiwgXCJhZHZhbmNlZFwiXSxcclxuICAgICAgcHJpY2VSYW5nZTogeyBtaW46IDUwLCBtYXg6IDIwMCB9LFxyXG4gICAgICBkdXJhdGlvblJhbmdlOiB7IG1pbjogNjAsIG1heDogMzAwIH0sXHJcbiAgICAgIGluc3RydWN0b3JzOiBbXCJKb2huIERvZVwiXSxcclxuICAgICAgdGFnczogW1wic3RlbGxhclwiXSxcclxuICAgICAgc29ydEJ5OiBcInJlbGV2YW5jZVwiLFxyXG4gICAgICBzb3J0T3JkZXI6IFwiZGVzY1wiLFxyXG4gICAgICBwYWdlOiAxLFxyXG4gICAgICBsaW1pdDogMTAsXHJcbiAgICB9XHJcblxyXG4gICAgaXQoXCJzaG91bGQgcGVyZm9ybSBhZHZhbmNlZCBzZWFyY2ggd2l0aCBmaWx0ZXJzXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1NlYXJjaFJlc3BvbnNlID0ge1xyXG4gICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgIGhpdHM6IHtcclxuICAgICAgICAgICAgdG90YWw6IHsgdmFsdWU6IDEgfSxcclxuICAgICAgICAgICAgaGl0czogW1xyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9pZDogXCIxXCIsXHJcbiAgICAgICAgICAgICAgICBfc291cmNlOiBtb2NrQ291cnNlc1swXSxcclxuICAgICAgICAgICAgICAgIF9zY29yZTogMS41LFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG1vY2tFbGFzdGljc2VhcmNoU2VydmljZS5zZWFyY2gubW9ja1Jlc29sdmVkVmFsdWUobW9ja1NlYXJjaFJlc3BvbnNlKVxyXG4gICAgICBtb2NrU2VhcmNoQW5hbHl0aWNzUmVwb3NpdG9yeS5zYXZlLm1vY2tSZXNvbHZlZFZhbHVlKHt9KVxyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5hZHZhbmNlZFNlYXJjaChhZHZhbmNlZEZpbHRlckR0bywgXCJ1c2VyMTIzXCIpXHJcblxyXG4gICAgICBleHBlY3QobW9ja0VsYXN0aWNzZWFyY2hTZXJ2aWNlLnNlYXJjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIGluZGV4OiBcImNvdXJzZXNcIixcclxuICAgICAgICBib2R5OiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICBxdWVyeTogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgICBib29sOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgbXVzdDogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgICAgIG11bHRpX21hdGNoOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IFwic3RlbGxhclwiLFxyXG4gICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICAgIGZpbHRlcjogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgICAgIHRlcm1zOiB7IGNhdGVnb3J5OiBbXCJibG9ja2NoYWluXCIsIFwiZGV2ZWxvcG1lbnRcIl0gfSxcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgICAgICAgICB0ZXJtczogeyBsZXZlbDogW1wiYmVnaW5uZXJcIiwgXCJhZHZhbmNlZFwiXSB9LFxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICAgICAgICAgIHJhbmdlOiB7IHByaWNlOiB7IGd0ZTogNTAsIGx0ZTogMjAwIH0gfSxcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICB9KVxyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb3Vyc2VzKS50b0hhdmVMZW5ndGgoMSlcclxuICAgICAgZXhwZWN0KHJlc3VsdC50b3RhbCkudG9CZSgxKVxyXG4gICAgfSlcclxuXHJcbiAgICBpdChcInNob3VsZCBoYW5kbGUgc29ydGluZyBvcHRpb25zXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgc29ydER0byA9IHsgLi4uYWR2YW5jZWRGaWx0ZXJEdG8sIHNvcnRCeTogXCJwcmljZVwiLCBzb3J0T3JkZXI6IFwiYXNjXCIgYXMgY29uc3QgfVxyXG5cclxuICAgICAgbW9ja0VsYXN0aWNzZWFyY2hTZXJ2aWNlLnNlYXJjaC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgYm9keTogeyBoaXRzOiB7IHRvdGFsOiB7IHZhbHVlOiAwIH0sIGhpdHM6IFtdIH0gfSxcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGF3YWl0IHNlcnZpY2UuYWR2YW5jZWRTZWFyY2goc29ydER0bywgXCJ1c2VyMTIzXCIpXHJcblxyXG4gICAgICBleHBlY3QobW9ja0VsYXN0aWNzZWFyY2hTZXJ2aWNlLnNlYXJjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgYm9keTogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgICBzb3J0OiBbeyBwcmljZTogeyBvcmRlcjogXCJhc2NcIiB9IH1dLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgfSksXHJcbiAgICAgIClcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgZGVzY3JpYmUoXCJnZXRTdWdnZXN0aW9uc1wiLCAoKSA9PiB7XHJcbiAgICBjb25zdCBzdWdnZXN0aW9uRHRvOiBTZWFyY2hTdWdnZXN0aW9uRHRvID0ge1xyXG4gICAgICBxdWVyeTogXCJzdGVsXCIsXHJcbiAgICAgIGxpbWl0OiA1LFxyXG4gICAgfVxyXG5cclxuICAgIGl0KFwic2hvdWxkIHJldHVybiBzZWFyY2ggc3VnZ2VzdGlvbnNcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrU3VnZ2VzdFJlc3BvbnNlID0ge1xyXG4gICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgIHN1Z2dlc3Q6IHtcclxuICAgICAgICAgICAgdGl0bGVfc3VnZ2VzdDogW1xyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtcclxuICAgICAgICAgICAgICAgICAgeyB0ZXh0OiBcInN0ZWxsYXJcIiwgX3Njb3JlOiAxLjAgfSxcclxuICAgICAgICAgICAgICAgICAgeyB0ZXh0OiBcInN0ZWxsYXIgYmxvY2tjaGFpblwiLCBfc2NvcmU6IDAuOCB9LFxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbl9zdWdnZXN0OiBbXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uczogW3sgdGV4dDogXCJzdGVsbGFyIG5ldHdvcmtcIiwgX3Njb3JlOiAwLjkgfV0sXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG5cclxuICAgICAgbW9ja0VsYXN0aWNzZWFyY2hTZXJ2aWNlLnNlYXJjaC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrU3VnZ2VzdFJlc3BvbnNlKVxyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRTdWdnZXN0aW9ucyhzdWdnZXN0aW9uRHRvKVxyXG5cclxuICAgICAgZXhwZWN0KG1vY2tFbGFzdGljc2VhcmNoU2VydmljZS5zZWFyY2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBpbmRleDogXCJjb3Vyc2VzXCIsXHJcbiAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgc3VnZ2VzdDoge1xyXG4gICAgICAgICAgICB0aXRsZV9zdWdnZXN0OiB7XHJcbiAgICAgICAgICAgICAgcHJlZml4OiBcInN0ZWxcIixcclxuICAgICAgICAgICAgICBjb21wbGV0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZDogXCJ0aXRsZS5zdWdnZXN0XCIsXHJcbiAgICAgICAgICAgICAgICBzaXplOiA1LFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uX3N1Z2dlc3Q6IHtcclxuICAgICAgICAgICAgICBwcmVmaXg6IFwic3RlbFwiLFxyXG4gICAgICAgICAgICAgIGNvbXBsZXRpb246IHtcclxuICAgICAgICAgICAgICAgIGZpZWxkOiBcImRlc2NyaXB0aW9uLnN1Z2dlc3RcIixcclxuICAgICAgICAgICAgICAgIHNpemU6IDUsXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xyXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXHJcbiAgICAgICAgICB7IHRleHQ6IFwic3RlbGxhclwiLCBzY29yZTogMS4wLCBzb3VyY2U6IFwidGl0bGVcIiB9LFxyXG4gICAgICAgICAgeyB0ZXh0OiBcInN0ZWxsYXIgYmxvY2tjaGFpblwiLCBzY29yZTogMC44LCBzb3VyY2U6IFwidGl0bGVcIiB9LFxyXG4gICAgICAgICAgeyB0ZXh0OiBcInN0ZWxsYXIgbmV0d29ya1wiLCBzY29yZTogMC45LCBzb3VyY2U6IFwiZGVzY3JpcHRpb25cIiB9LFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KFwic2hvdWxkIGhhbmRsZSBlbXB0eSBzdWdnZXN0aW9uc1wiLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tFbGFzdGljc2VhcmNoU2VydmljZS5zZWFyY2gubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgIHN1Z2dlc3Q6IHtcclxuICAgICAgICAgICAgdGl0bGVfc3VnZ2VzdDogW3sgb3B0aW9uczogW10gfV0sXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uX3N1Z2dlc3Q6IFt7IG9wdGlvbnM6IFtdIH1dLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KVxyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRTdWdnZXN0aW9ucyhzdWdnZXN0aW9uRHRvKVxyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWdnZXN0aW9ucykudG9IYXZlTGVuZ3RoKDApXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKFwiZ2V0U2VhcmNoQW5hbHl0aWNzXCIsICgpID0+IHtcclxuICAgIGl0KFwic2hvdWxkIHJldHVybiBzZWFyY2ggYW5hbHl0aWNzXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0FuYWx5dGljcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogXCIxXCIsXHJcbiAgICAgICAgICBxdWVyeTogXCJzdGVsbGFyXCIsXHJcbiAgICAgICAgICB1c2VySWQ6IFwidXNlcjEyM1wiLFxyXG4gICAgICAgICAgcmVzdWx0c0NvdW50OiA1LFxyXG4gICAgICAgICAgY2xpY2tlZFJlc3VsdHM6IFtcIjFcIiwgXCIyXCJdLFxyXG4gICAgICAgICAgc2VhcmNoZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICB9LFxyXG4gICAgICBdXHJcblxyXG4gICAgICBjb25zdCBtb2NrUXVlcnlCdWlsZGVyID0ge1xyXG4gICAgICAgIHdoZXJlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcclxuICAgICAgICBhbmRXaGVyZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXHJcbiAgICAgICAgb3JkZXJCeTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXHJcbiAgICAgICAgbGltaXQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICAgIGdldE1hbnk6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQW5hbHl0aWNzKSxcclxuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICAgIGFkZFNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXHJcbiAgICAgICAgZ3JvdXBCeTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXHJcbiAgICAgICAgZ2V0UmF3TWFueTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtcclxuICAgICAgICAgIHsgcXVlcnk6IFwic3RlbGxhclwiLCBjb3VudDogXCIxMFwiIH0sXHJcbiAgICAgICAgICB7IHF1ZXJ5OiBcImJsb2NrY2hhaW5cIiwgY291bnQ6IFwiOFwiIH0sXHJcbiAgICAgICAgXSksXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG1vY2tTZWFyY2hBbmFseXRpY3NSZXBvc2l0b3J5LmNyZWF0ZVF1ZXJ5QnVpbGRlci5tb2NrUmV0dXJuVmFsdWUobW9ja1F1ZXJ5QnVpbGRlcilcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0U2VhcmNoQW5hbHl0aWNzKHtcclxuICAgICAgICBzdGFydERhdGU6IG5ldyBEYXRlKFwiMjAyNC0wMS0wMVwiKSxcclxuICAgICAgICBlbmREYXRlOiBuZXcgRGF0ZShcIjIwMjQtMDEtMzFcIiksXHJcbiAgICAgICAgdXNlcklkOiBcInVzZXIxMjNcIixcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xyXG4gICAgICAgIHJlY2VudFNlYXJjaGVzOiBtb2NrQW5hbHl0aWNzLFxyXG4gICAgICAgIHBvcHVsYXJRdWVyaWVzOiBbXHJcbiAgICAgICAgICB7IHF1ZXJ5OiBcInN0ZWxsYXJcIiwgY291bnQ6IDEwIH0sXHJcbiAgICAgICAgICB7IHF1ZXJ5OiBcImJsb2NrY2hhaW5cIiwgY291bnQ6IDggfSxcclxuICAgICAgICBdLFxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBkZXNjcmliZShcInVwZGF0ZUNvdXJzZVwiLCAoKSA9PiB7XHJcbiAgICBpdChcInNob3VsZCB1cGRhdGUgY291cnNlIGluIEVsYXN0aWNzZWFyY2hcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb3Vyc2VJZCA9IFwiMVwiXHJcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7IHRpdGxlOiBcIlVwZGF0ZWQgVGl0bGVcIiB9XHJcblxyXG4gICAgICBtb2NrRWxhc3RpY3NlYXJjaFNlcnZpY2UudXBkYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBib2R5OiB7IF9pZDogY291cnNlSWQsIHJlc3VsdDogXCJ1cGRhdGVkXCIgfSxcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UudXBkYXRlQ291cnNlKGNvdXJzZUlkLCB1cGRhdGVEYXRhKVxyXG5cclxuICAgICAgZXhwZWN0KG1vY2tFbGFzdGljc2VhcmNoU2VydmljZS51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBpbmRleDogXCJjb3Vyc2VzXCIsXHJcbiAgICAgICAgaWQ6IGNvdXJzZUlkLFxyXG4gICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgIGRvYzogdXBkYXRlRGF0YSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KVxyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7IF9pZDogY291cnNlSWQsIHJlc3VsdDogXCJ1cGRhdGVkXCIgfSlcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgZGVzY3JpYmUoXCJkZWxldGVDb3Vyc2VcIiwgKCkgPT4ge1xyXG4gICAgaXQoXCJzaG91bGQgZGVsZXRlIGNvdXJzZSBmcm9tIEVsYXN0aWNzZWFyY2hcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb3Vyc2VJZCA9IFwiMVwiXHJcblxyXG4gICAgICBtb2NrRWxhc3RpY3NlYXJjaFNlcnZpY2UuZGVsZXRlLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBib2R5OiB7IF9pZDogY291cnNlSWQsIHJlc3VsdDogXCJkZWxldGVkXCIgfSxcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZGVsZXRlQ291cnNlKGNvdXJzZUlkKVxyXG5cclxuICAgICAgZXhwZWN0KG1vY2tFbGFzdGljc2VhcmNoU2VydmljZS5kZWxldGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICBpbmRleDogXCJjb3Vyc2VzXCIsXHJcbiAgICAgICAgaWQ6IGNvdXJzZUlkLFxyXG4gICAgICB9KVxyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7IF9pZDogY291cnNlSWQsIHJlc3VsdDogXCJkZWxldGVkXCIgfSlcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgZGVzY3JpYmUoXCJidWxrSW5kZXhDb3Vyc2VzXCIsICgpID0+IHtcclxuICAgIGl0KFwic2hvdWxkIGJ1bGsgaW5kZXggbXVsdGlwbGUgY291cnNlc1wiLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tFbGFzdGljc2VhcmNoU2VydmljZS5idWxrLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICBlcnJvcnM6IGZhbHNlLFxyXG4gICAgICAgICAgaXRlbXM6IFt7IGluZGV4OiB7IF9pZDogXCIxXCIsIHJlc3VsdDogXCJjcmVhdGVkXCIgfSB9LCB7IGluZGV4OiB7IF9pZDogXCIyXCIsIHJlc3VsdDogXCJjcmVhdGVkXCIgfSB9XSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KVxyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5idWxrSW5kZXhDb3Vyc2VzKG1vY2tDb3Vyc2VzKVxyXG5cclxuICAgICAgZXhwZWN0KG1vY2tFbGFzdGljc2VhcmNoU2VydmljZS5idWxrKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgYm9keTogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXHJcbiAgICAgICAgICB7IGluZGV4OiB7IF9pbmRleDogXCJjb3Vyc2VzXCIsIF9pZDogXCIxXCIgfSB9LFxyXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyB0aXRsZTogbW9ja0NvdXJzZXNbMF0udGl0bGUgfSksXHJcbiAgICAgICAgICB7IGluZGV4OiB7IF9pbmRleDogXCJjb3Vyc2VzXCIsIF9pZDogXCIyXCIgfSB9LFxyXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyB0aXRsZTogbW9ja0NvdXJzZXNbMV0udGl0bGUgfSksXHJcbiAgICAgICAgXSksXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmVycm9ycykudG9CZShmYWxzZSlcclxuICAgICAgZXhwZWN0KHJlc3VsdC5pdGVtcykudG9IYXZlTGVuZ3RoKDIpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KFwic2hvdWxkIGhhbmRsZSBidWxrIGluZGV4aW5nIGVycm9yc1wiLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tFbGFzdGljc2VhcmNoU2VydmljZS5idWxrLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICBlcnJvcnM6IHRydWUsXHJcbiAgICAgICAgICBpdGVtczogW3sgaW5kZXg6IHsgX2lkOiBcIjFcIiwgZXJyb3I6IHsgcmVhc29uOiBcIkRvY3VtZW50IGFscmVhZHkgZXhpc3RzXCIgfSB9IH1dLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmJ1bGtJbmRleENvdXJzZXMoW21vY2tDb3Vyc2VzWzBdXSlcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzKS50b0JlKHRydWUpXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXRlbXNbMF0uaW5kZXguZXJyb3IpLnRvQmVEZWZpbmVkKClcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgZGVzY3JpYmUoXCJnZXRQb3B1bGFyU2VhcmNoVGVybXNcIiwgKCkgPT4ge1xyXG4gICAgaXQoXCJzaG91bGQgcmV0dXJuIHBvcHVsYXIgc2VhcmNoIHRlcm1zXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja1F1ZXJ5QnVpbGRlciA9IHtcclxuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICAgIGFkZFNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXHJcbiAgICAgICAgd2hlcmU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICAgIGdyb3VwQnk6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICAgIG9yZGVyQnk6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICAgIGxpbWl0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcclxuICAgICAgICBnZXRSYXdNYW55OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW1xyXG4gICAgICAgICAgeyBxdWVyeTogXCJzdGVsbGFyXCIsIHNlYXJjaENvdW50OiBcIjE1XCIgfSxcclxuICAgICAgICAgIHsgcXVlcnk6IFwiYmxvY2tjaGFpblwiLCBzZWFyY2hDb3VudDogXCIxMlwiIH0sXHJcbiAgICAgICAgICB7IHF1ZXJ5OiBcInNtYXJ0IGNvbnRyYWN0c1wiLCBzZWFyY2hDb3VudDogXCI4XCIgfSxcclxuICAgICAgICBdKSxcclxuICAgICAgfVxyXG5cclxuICAgICAgbW9ja1NlYXJjaEFuYWx5dGljc1JlcG9zaXRvcnkuY3JlYXRlUXVlcnlCdWlsZGVyLm1vY2tSZXR1cm5WYWx1ZShtb2NrUXVlcnlCdWlsZGVyKVxyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRQb3B1bGFyU2VhcmNoVGVybXMoMTApXHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtcclxuICAgICAgICB7IHF1ZXJ5OiBcInN0ZWxsYXJcIiwgc2VhcmNoQ291bnQ6IDE1IH0sXHJcbiAgICAgICAgeyBxdWVyeTogXCJibG9ja2NoYWluXCIsIHNlYXJjaENvdW50OiAxMiB9LFxyXG4gICAgICAgIHsgcXVlcnk6IFwic21hcnQgY29udHJhY3RzXCIsIHNlYXJjaENvdW50OiA4IH0sXHJcbiAgICAgIF0pXHJcblxyXG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci5saW1pdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoMTApXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKFwidHJhY2tTZWFyY2hDbGlja1wiLCAoKSA9PiB7XHJcbiAgICBpdChcInNob3VsZCB0cmFjayBzZWFyY2ggcmVzdWx0IGNsaWNrXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgc2VhcmNoSWQgPSBcInNlYXJjaDEyM1wiXHJcbiAgICAgIGNvbnN0IGNvdXJzZUlkID0gXCJjb3Vyc2U0NTZcIlxyXG5cclxuICAgICAgY29uc3QgbW9ja1NlYXJjaEFuYWx5dGljID0ge1xyXG4gICAgICAgIGlkOiBzZWFyY2hJZCxcclxuICAgICAgICBjbGlja2VkUmVzdWx0czogW1wiY291cnNlMTIzXCJdLFxyXG4gICAgICAgIHNhdmU6IGplc3QuZm4oKSxcclxuICAgICAgfVxyXG5cclxuICAgICAgbW9ja1NlYXJjaEFuYWx5dGljc1JlcG9zaXRvcnkuZmluZE9uZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrU2VhcmNoQW5hbHl0aWMpXHJcblxyXG4gICAgICBhd2FpdCBzZXJ2aWNlLnRyYWNrU2VhcmNoQ2xpY2soc2VhcmNoSWQsIGNvdXJzZUlkKVxyXG5cclxuICAgICAgZXhwZWN0KG1vY2tTZWFyY2hBbmFseXRpY3NSZXBvc2l0b3J5LmZpbmRPbmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgICB3aGVyZTogeyBpZDogc2VhcmNoSWQgfSxcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrU2VhcmNoQW5hbHl0aWMuY2xpY2tlZFJlc3VsdHMpLnRvQ29udGFpbihjb3Vyc2VJZClcclxuICAgICAgZXhwZWN0KG1vY2tTZWFyY2hBbmFseXRpYy5zYXZlKS50b0hhdmVCZWVuQ2FsbGVkKClcclxuICAgIH0pXHJcblxyXG4gICAgaXQoXCJzaG91bGQgaGFuZGxlIG5vbi1leGlzdGVudCBzZWFyY2ggYW5hbHl0aWNzXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja1NlYXJjaEFuYWx5dGljc1JlcG9zaXRvcnkuZmluZE9uZS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKVxyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UudHJhY2tTZWFyY2hDbGljayhcIm5vbmV4aXN0ZW50XCIsIFwiY291cnNlMTIzXCIpKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEV4Y2VwdGlvbilcclxuICAgIH0pXHJcbiAgfSlcclxufSlcclxuIl0sInZlcnNpb24iOjN9