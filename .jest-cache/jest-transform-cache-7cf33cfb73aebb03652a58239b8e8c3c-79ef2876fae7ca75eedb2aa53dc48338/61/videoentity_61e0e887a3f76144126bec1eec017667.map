{"file":"C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\video-streaming\\entities\\video.entity.ts","mappings":"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","names":[],"sources":["C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\video-streaming\\entities\\video.entity.ts"],"sourcesContent":["import {\r\n  Entity,\r\n  PrimaryGeneratedColumn,\r\n  Column,\r\n  CreateDateColumn,\r\n  UpdateDateColumn,\r\n  ManyToOne,\r\n  OneToMany,\r\n  Index,\r\n  JoinColumn,\r\n} from 'typeorm';\r\nimport { ApiProperty } from '@nestjs/swagger';\r\nimport { User } from '../../users/entities/user.entity';\r\nimport { Lesson } from '../../lesson/entity/lesson.entity';\r\nimport { VideoQuality } from './video-quality.entity';\r\nimport { VideoAnalytics } from './video-analytics.entity';\r\n\r\nexport enum VideoStatus {\r\n  UPLOADING = 'uploading',\r\n  PROCESSING = 'processing',\r\n  READY = 'ready',\r\n  FAILED = 'failed',\r\n  ARCHIVED = 'archived',\r\n}\r\n\r\nexport enum VideoVisibility {\r\n  PUBLIC = 'public',\r\n  PRIVATE = 'private',\r\n  UNLISTED = 'unlisted',\r\n  COURSE_ONLY = 'course_only',\r\n}\r\n\r\nexport enum VideoFormat {\r\n  MP4 = 'mp4',\r\n  WEBM = 'webm',\r\n  HLS = 'hls',\r\n  DASH = 'dash',\r\n}\r\n\r\n@Entity('videos')\r\n@Index(['status'])\r\n@Index(['visibility'])\r\n@Index(['uploadedBy'])\r\n@Index(['createdAt'])\r\nexport class Video {\r\n  @ApiProperty({ description: 'Video ID' })\r\n  @PrimaryGeneratedColumn('uuid')\r\n  id: string;\r\n\r\n  @ApiProperty({ description: 'Video title' })\r\n  @Column({ length: 255 })\r\n  title: string;\r\n\r\n  @ApiProperty({ description: 'Video description' })\r\n  @Column({ type: 'text', nullable: true })\r\n  description: string;\r\n\r\n  @ApiProperty({ description: 'Original filename' })\r\n  @Column({ length: 255 })\r\n  originalFilename: string;\r\n\r\n  @ApiProperty({ description: 'Video status', enum: VideoStatus })\r\n  @Column({\r\n    type: 'enum',\r\n    enum: VideoStatus,\r\n    default: VideoStatus.UPLOADING,\r\n  })\r\n  status: VideoStatus;\r\n\r\n  @ApiProperty({ description: 'Video visibility', enum: VideoVisibility })\r\n  @Column({\r\n    type: 'enum',\r\n    enum: VideoVisibility,\r\n    default: VideoVisibility.PRIVATE,\r\n  })\r\n  visibility: VideoVisibility;\r\n\r\n  @ApiProperty({ description: 'Video duration in seconds' })\r\n  @Column({ type: 'int', default: 0 })\r\n  duration: number;\r\n\r\n  @ApiProperty({ description: 'Video file size in bytes' })\r\n  @Column({ type: 'bigint', default: 0 })\r\n  fileSize: number;\r\n\r\n  @ApiProperty({ description: 'Video width in pixels' })\r\n  @Column({ type: 'int', nullable: true })\r\n  width: number;\r\n\r\n  @ApiProperty({ description: 'Video height in pixels' })\r\n  @Column({ type: 'int', nullable: true })\r\n  height: number;\r\n\r\n  @ApiProperty({ description: 'Video frame rate' })\r\n  @Column({ type: 'float', nullable: true })\r\n  frameRate: number;\r\n\r\n  @ApiProperty({ description: 'Video bitrate in kbps' })\r\n  @Column({ type: 'int', nullable: true })\r\n  bitrate: number;\r\n\r\n  @ApiProperty({ description: 'Video codec' })\r\n  @Column({ length: 50, nullable: true })\r\n  codec: string;\r\n\r\n  @ApiProperty({ description: 'Audio codec' })\r\n  @Column({ length: 50, nullable: true })\r\n  audioCodec: string;\r\n\r\n  @ApiProperty({ description: 'Primary streaming URL' })\r\n  @Column({ type: 'text', nullable: true })\r\n  streamingUrl: string;\r\n\r\n  @ApiProperty({ description: 'HLS manifest URL' })\r\n  @Column({ type: 'text', nullable: true })\r\n  hlsUrl: string;\r\n\r\n  @ApiProperty({ description: 'DASH manifest URL' })\r\n  @Column({ type: 'text', nullable: true })\r\n  dashUrl: string;\r\n\r\n  @ApiProperty({ description: 'Thumbnail URL' })\r\n  @Column({ type: 'text', nullable: true })\r\n  thumbnailUrl: string;\r\n\r\n  @ApiProperty({ description: 'Preview GIF URL' })\r\n  @Column({ type: 'text', nullable: true })\r\n  previewUrl: string;\r\n\r\n  @ApiProperty({ description: 'CloudFront distribution domain' })\r\n  @Column({ length: 255, nullable: true })\r\n  cdnDomain: string;\r\n\r\n  @ApiProperty({ description: 'S3 bucket name' })\r\n  @Column({ length: 255, nullable: true })\r\n  s3Bucket: string;\r\n\r\n  @ApiProperty({ description: 'S3 object key' })\r\n  @Column({ length: 500, nullable: true })\r\n  s3Key: string;\r\n\r\n  @ApiProperty({ description: 'Video metadata' })\r\n  @Column({ type: 'jsonb', nullable: true })\r\n  metadata: {\r\n    originalFormat?: string;\r\n    uploadMethod?: 'direct' | 'chunked' | 'resumable';\r\n    processingStartedAt?: Date;\r\n    processingCompletedAt?: Date;\r\n    processingErrors?: string[];\r\n    qualityVariants?: string[];\r\n    subtitles?: Array<{\r\n      language: string;\r\n      url: string;\r\n      format: string;\r\n    }>;\r\n    chapters?: Array<{\r\n      title: string;\r\n      startTime: number;\r\n      endTime: number;\r\n    }>;\r\n    tags?: string[];\r\n    customData?: Record<string, any>;\r\n  };\r\n\r\n  @ApiProperty({ description: 'Security settings' })\r\n  @Column({ type: 'jsonb', nullable: true })\r\n  securitySettings: {\r\n    requireAuth?: boolean;\r\n    allowedDomains?: string[];\r\n    geoRestrictions?: {\r\n      allowedCountries?: string[];\r\n      blockedCountries?: string[];\r\n    };\r\n    drmEnabled?: boolean;\r\n    drmProvider?: string;\r\n    signedUrlExpiry?: number;\r\n    downloadEnabled?: boolean;\r\n    embedEnabled?: boolean;\r\n  };\r\n\r\n  @ApiProperty({ description: 'Processing settings' })\r\n  @Column({ type: 'jsonb', nullable: true })\r\n  processingSettings: {\r\n    generateThumbnails?: boolean;\r\n    thumbnailCount?: number;\r\n    generatePreview?: boolean;\r\n    adaptiveStreaming?: boolean;\r\n    qualityLevels?: string[];\r\n    watermark?: {\r\n      enabled: boolean;\r\n      url?: string;\r\n      position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right' | 'center';\r\n      opacity?: number;\r\n    };\r\n  };\r\n\r\n  @ApiProperty({ description: 'View count' })\r\n  @Column({ type: 'int', default: 0 })\r\n  viewCount: number;\r\n\r\n  @ApiProperty({ description: 'Like count' })\r\n  @Column({ type: 'int', default: 0 })\r\n  likeCount: number;\r\n\r\n  @ApiProperty({ description: 'Share count' })\r\n  @Column({ type: 'int', default: 0 })\r\n  shareCount: number;\r\n\r\n  @ApiProperty({ description: 'Average rating' })\r\n  @Column({ type: 'decimal', precision: 3, scale: 2, default: 0 })\r\n  averageRating: number;\r\n\r\n  @ApiProperty({ description: 'Total rating count' })\r\n  @Column({ type: 'int', default: 0 })\r\n  ratingCount: number;\r\n\r\n  @ApiProperty({ description: 'User who uploaded the video' })\r\n  @ManyToOne(() => User, { nullable: false })\r\n  @JoinColumn({ name: 'uploaded_by' })\r\n  uploadedBy: User;\r\n\r\n  @ApiProperty({ description: 'Associated lesson' })\r\n  @ManyToOne(() => Lesson, (lesson) => lesson.videoUrl, { nullable: true })\r\n  lesson: Lesson;\r\n\r\n  @ApiProperty({ description: 'Video quality variants' })\r\n  @OneToMany(() => VideoQuality, (quality) => quality.video, { cascade: true })\r\n  qualityVariants: VideoQuality[];\r\n\r\n  @ApiProperty({ description: 'Video analytics' })\r\n  @OneToMany(() => VideoAnalytics, (analytics) => analytics.video, { cascade: true })\r\n  analytics: VideoAnalytics[];\r\n\r\n  @ApiProperty({ description: 'Creation date' })\r\n  @CreateDateColumn()\r\n  createdAt: Date;\r\n\r\n  @ApiProperty({ description: 'Last update date' })\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n\r\n  // Computed properties\r\n  get isProcessed(): boolean {\r\n    return this.status === VideoStatus.READY;\r\n  }\r\n\r\n  get hasAdaptiveStreaming(): boolean {\r\n    return !!(this.hlsUrl || this.dashUrl);\r\n  }\r\n\r\n  get aspectRatio(): number | null {\r\n    if (this.width && this.height) {\r\n      return this.width / this.height;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  get formattedDuration(): string {\r\n    if (!this.duration) return '0:00';\r\n    \r\n    const hours = Math.floor(this.duration / 3600);\r\n    const minutes = Math.floor((this.duration % 3600) / 60);\r\n    const seconds = this.duration % 60;\r\n    \r\n    if (hours > 0) {\r\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n  }\r\n\r\n  get formattedFileSize(): string {\r\n    if (!this.fileSize) return '0 B';\r\n    \r\n    const units = ['B', 'KB', 'MB', 'GB', 'TB'];\r\n    let size = Number(this.fileSize);\r\n    let unitIndex = 0;\r\n    \r\n    while (size >= 1024 && unitIndex < units.length - 1) {\r\n      size /= 1024;\r\n      unitIndex++;\r\n    }\r\n    \r\n    return `${size.toFixed(1)} ${units[unitIndex]}`;\r\n  }\r\n}\r\n"],"version":3}