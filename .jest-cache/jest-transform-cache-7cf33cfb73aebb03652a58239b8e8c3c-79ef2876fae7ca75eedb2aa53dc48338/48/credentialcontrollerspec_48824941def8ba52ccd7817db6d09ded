f10e55e960be4777eb6d667bfcbd4a35
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const common_1 = require("@nestjs/common");
const credential_controller_1 = require("../credential.controller");
const credential_service_1 = require("../credential.service");
const credential_history_query_dto_1 = require("../dto/credential-history-query.dto");
describe('CredentialController', () => {
    let controller;
    let service;
    const mockCredentialService = {
        getUserCredentialHistory: jest.fn(),
        verifyCredential: jest.fn(),
    };
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            controllers: [credential_controller_1.CredentialController],
            providers: [
                {
                    provide: credential_service_1.CredentialService,
                    useValue: mockCredentialService,
                },
            ],
        }).compile();
        controller = module.get(credential_controller_1.CredentialController);
        service = module.get(credential_service_1.CredentialService);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    it('should be defined', () => {
        expect(controller).toBeDefined();
    });
    describe('getCredentialHistory', () => {
        it('should return credential history for the authenticated user', async () => {
            const user = { id: 'user-123' };
            const queryParams = {
                page: 1,
                limit: 10,
                status: credential_history_query_dto_1.CredentialStatus.ALL,
            };
            const expectedResponse = {
                data: [
                    {
                        id: '123e4567-e89b-12d3-a456-426614174000',
                        type: 'academic',
                        name: 'Computer Science Degree',
                        // other fields...
                    },
                ],
                meta: {
                    page: 1,
                    limit: 10,
                    totalItems: 1,
                    totalPages: 1,
                },
            };
            mockCredentialService.getUserCredentialHistory.mockResolvedValue(expectedResponse);
            const result = await controller.getCredentialHistory(user, queryParams);
            expect(service.getUserCredentialHistory).toHaveBeenCalledWith('user-123', queryParams);
            expect(result).toEqual(expectedResponse);
        });
        it('should handle errors from service', async () => {
            const user = { id: 'user-123' };
            const queryParams = {
                page: 1,
                limit: 10,
            };
            mockCredentialService.getUserCredentialHistory.mockRejectedValue(new Error('Database error'));
            await expect(controller.getCredentialHistory(user, queryParams)).rejects.toThrow(common_1.HttpException);
        });
    });
    describe('verifyCredential', () => {
        it('should verify a credential and return the result', async () => {
            const user = { id: 'user-123' };
            const credentialId = '123e4567-e89b-12d3-a456-426614174000';
            const expectedResponse = {
                verified: true,
                credential: {
                    id: credentialId,
                    // other fields...
                },
            };
            mockCredentialService.verifyCredential.mockResolvedValue(expectedResponse);
            const result = await controller.verifyCredential(user, credentialId);
            expect(service.verifyCredential).toHaveBeenCalledWith('user-123', credentialId);
            expect(result).toEqual(expectedResponse);
        });
        it('should handle not found errors', async () => {
            const user = { id: 'user-123' };
            const credentialId = 'non-existent-id';
            mockCredentialService.verifyCredential.mockRejectedValue(new common_1.HttpException('Credential not found', common_1.HttpStatus.NOT_FOUND));
            await expect(controller.verifyCredential(user, credentialId)).rejects.toThrow(common_1.HttpException);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxvam9zZXBoXFxEb2N1bWVudHNcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFxjcmVkZW50aWFsXFxjcmVkZW50aWFsLmNvbnRyb2xsZXIuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCwyQ0FBMkQ7QUFDM0Qsb0VBQWdFO0FBQ2hFLDhEQUEwRDtBQUMxRCxzRkFBdUU7QUFFdkUsUUFBUSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRTtJQUNwQyxJQUFJLFVBQWdDLENBQUM7SUFDckMsSUFBSSxPQUEwQixDQUFDO0lBRS9CLE1BQU0scUJBQXFCLEdBQUc7UUFDNUIsd0JBQXdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNuQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0tBQzVCLENBQUM7SUFFRixVQUFVLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDcEIsTUFBTSxNQUFNLEdBQWtCLE1BQU0sY0FBSSxDQUFDLG1CQUFtQixDQUFDO1lBQzNELFdBQVcsRUFBRSxDQUFDLDRDQUFvQixDQUFDO1lBQ25DLFNBQVMsRUFBRTtnQkFDVDtvQkFDRSxPQUFPLEVBQUUsc0NBQWlCO29CQUMxQixRQUFRLEVBQUUscUJBQXFCO2lCQUNoQzthQUNGO1NBQ0YsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRWIsVUFBVSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQXVCLDRDQUFvQixDQUFDLENBQUM7UUFDcEUsT0FBTyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQW9CLHNDQUFpQixDQUFDLENBQUM7SUFDN0QsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3ZCLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRTtRQUMzQixNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDbkMsQ0FB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RTtZQUM5QyxNQUFNLElBQUksR0FBRyxFQUFFLEVBQUUsRUFBRSxVQUFVLEVBQUUsQ0FBQztZQUNoQyxNQUFNLFlBQVksR0FBRyxpQkFBaUIsQ0FBQztZQUV2QyxxQkFBcUIsQ0FBQyxnQkFBZ0IsQ0FBQyxpQkFBaUIsQ0FDdEQsSUFBSSxzQkFBYSxDQUFDLHNCQUFzQixFQUFFLG1CQUFVLENBQUMsU0FBUyxDQUFDLENBQ2hFLENBQUM7WUFFRixNQUFNLE1BQU0sQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxzQkFBYSxDQUFDLENBQUM7UUFDL0YsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcb2pvc2VwaFxcRG9jdW1lbnRzXFxTdHJlbGxlck1pbmRzLUJhY2tlbmRcXHNyY1xcY3JlZGVudGlhbFxcY3JlZGVudGlhbC5jb250cm9sbGVyLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGVzdCwgVGVzdGluZ01vZHVsZSB9IGZyb20gJ0BuZXN0anMvdGVzdGluZyc7XHJcbmltcG9ydCB7IEh0dHBFeGNlcHRpb24sIEh0dHBTdGF0dXMgfSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XHJcbmltcG9ydCB7IENyZWRlbnRpYWxDb250cm9sbGVyIH0gZnJvbSAnLi4vY3JlZGVudGlhbC5jb250cm9sbGVyJztcclxuaW1wb3J0IHsgQ3JlZGVudGlhbFNlcnZpY2UgfSBmcm9tICcuLi9jcmVkZW50aWFsLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDcmVkZW50aWFsU3RhdHVzIH0gZnJvbSAnLi4vZHRvL2NyZWRlbnRpYWwtaGlzdG9yeS1xdWVyeS5kdG8nO1xyXG5cclxuZGVzY3JpYmUoJ0NyZWRlbnRpYWxDb250cm9sbGVyJywgKCkgPT4ge1xyXG4gIGxldCBjb250cm9sbGVyOiBDcmVkZW50aWFsQ29udHJvbGxlcjtcclxuICBsZXQgc2VydmljZTogQ3JlZGVudGlhbFNlcnZpY2U7XHJcblxyXG4gIGNvbnN0IG1vY2tDcmVkZW50aWFsU2VydmljZSA9IHtcclxuICAgIGdldFVzZXJDcmVkZW50aWFsSGlzdG9yeTogamVzdC5mbigpLFxyXG4gICAgdmVyaWZ5Q3JlZGVudGlhbDogamVzdC5mbigpLFxyXG4gIH07XHJcblxyXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgbW9kdWxlOiBUZXN0aW5nTW9kdWxlID0gYXdhaXQgVGVzdC5jcmVhdGVUZXN0aW5nTW9kdWxlKHtcclxuICAgICAgY29udHJvbGxlcnM6IFtDcmVkZW50aWFsQ29udHJvbGxlcl0sXHJcbiAgICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3ZpZGU6IENyZWRlbnRpYWxTZXJ2aWNlLFxyXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tDcmVkZW50aWFsU2VydmljZSxcclxuICAgICAgICB9LFxyXG4gICAgICBdLFxyXG4gICAgfSkuY29tcGlsZSgpO1xyXG5cclxuICAgIGNvbnRyb2xsZXIgPSBtb2R1bGUuZ2V0PENyZWRlbnRpYWxDb250cm9sbGVyPihDcmVkZW50aWFsQ29udHJvbGxlcik7XHJcbiAgICBzZXJ2aWNlID0gbW9kdWxlLmdldDxDcmVkZW50aWFsU2VydmljZT4oQ3JlZGVudGlhbFNlcnZpY2UpO1xyXG4gIH0pO1xyXG5cclxuICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgYmUgZGVmaW5lZCcsICgpID0+IHtcclxuICAgIGV4cGVjdChjb250cm9sbGVyKS50b0JlRGVmaW5lZCgpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZ2V0Q3JlZGVudGlhbEhpc3RvcnknLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjcmVkZW50aWFsIGhpc3RvcnkgZm9yIHRoZSBhdXRoZW50aWNhdGVkIHVzZXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVzZXIgPSB7IGlkOiAndXNlci0xMjMnIH07XHJcbiAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge1xyXG4gICAgICAgIHBhZ2U6IDEsXHJcbiAgICAgICAgbGltaXQ6IDEwLFxyXG4gICAgICAgIHN0YXR1czogQ3JlZGVudGlhbFN0YXR1cy5BTEwsXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGV4cGVjdGVkUmVzcG9uc2UgPSB7XHJcbiAgICAgICAgZGF0YTogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXHJcbiAgICAgICAgICAgIHR5cGU6ICdhY2FkZW1pYycsXHJcbiAgICAgICAgICAgIG5hbWU6ICdDb21wdXRlciBTY2llbmNlIERlZ3JlZScsXHJcbiAgICAgICAgICAgIC8vIG90aGVyIGZpZWxkcy4uLlxyXG4gICAgICAgICAgfSxcclxuICAgICAgICBdLFxyXG4gICAgICAgIG1ldGE6IHtcclxuICAgICAgICAgIHBhZ2U6IDEsXHJcbiAgICAgICAgICBsaW1pdDogMTAsXHJcbiAgICAgICAgICB0b3RhbEl0ZW1zOiAxLFxyXG4gICAgICAgICAgdG90YWxQYWdlczogMSxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbW9ja0NyZWRlbnRpYWxTZXJ2aWNlLmdldFVzZXJDcmVkZW50aWFsSGlzdG9yeS5tb2NrUmVzb2x2ZWRWYWx1ZShleHBlY3RlZFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIuZ2V0Q3JlZGVudGlhbEhpc3RvcnkodXNlciwgcXVlcnlQYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KHNlcnZpY2UuZ2V0VXNlckNyZWRlbnRpYWxIaXN0b3J5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgndXNlci0xMjMnLCBxdWVyeVBhcmFtcyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoZXhwZWN0ZWRSZXNwb25zZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlcnJvcnMgZnJvbSBzZXJ2aWNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB1c2VyID0geyBpZDogJ3VzZXItMTIzJyB9O1xyXG4gICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcclxuICAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgIGxpbWl0OiAxMCxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIG1vY2tDcmVkZW50aWFsU2VydmljZS5nZXRVc2VyQ3JlZGVudGlhbEhpc3RvcnkubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpKTtcclxuXHJcbiAgICAgIGF3YWl0IGV4cGVjdChjb250cm9sbGVyLmdldENyZWRlbnRpYWxIaXN0b3J5KHVzZXIsIHF1ZXJ5UGFyYW1zKSkucmVqZWN0cy50b1Rocm93KEh0dHBFeGNlcHRpb24pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCd2ZXJpZnlDcmVkZW50aWFsJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB2ZXJpZnkgYSBjcmVkZW50aWFsIGFuZCByZXR1cm4gdGhlIHJlc3VsdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdXNlciA9IHsgaWQ6ICd1c2VyLTEyMycgfTtcclxuICAgICAgY29uc3QgY3JlZGVudGlhbElkID0gJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCc7XHJcbiAgICAgIGNvbnN0IGV4cGVjdGVkUmVzcG9uc2UgPSB7XHJcbiAgICAgICAgdmVyaWZpZWQ6IHRydWUsXHJcbiAgICAgICAgY3JlZGVudGlhbDoge1xyXG4gICAgICAgICAgaWQ6IGNyZWRlbnRpYWxJZCxcclxuICAgICAgICAgIC8vIG90aGVyIGZpZWxkcy4uLlxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBtb2NrQ3JlZGVudGlhbFNlcnZpY2UudmVyaWZ5Q3JlZGVudGlhbC5tb2NrUmVzb2x2ZWRWYWx1ZShleHBlY3RlZFJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbnRyb2xsZXIudmVyaWZ5Q3JlZGVudGlhbCh1c2VyLCBjcmVkZW50aWFsSWQpO1xyXG5cclxuICAgICAgZXhwZWN0KHNlcnZpY2UudmVyaWZ5Q3JlZGVudGlhbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3VzZXItMTIzJywgY3JlZGVudGlhbElkKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChleHBlY3RlZFJlc3BvbnNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5vdCBmb3VuZCBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVzZXIgPSB7IGlkOiAndXNlci0xMjMnIH07XHJcbiAgICAgIGNvbnN0IGNyZWRlbnRpYWxJZCA9ICdub24tZXhpc3RlbnQtaWQnO1xyXG5cclxuICAgICAgbW9ja0NyZWRlbnRpYWxTZXJ2aWNlLnZlcmlmeUNyZWRlbnRpYWwubW9ja1JlamVjdGVkVmFsdWUoXHJcbiAgICAgICAgbmV3IEh0dHBFeGNlcHRpb24oJ0NyZWRlbnRpYWwgbm90IGZvdW5kJywgSHR0cFN0YXR1cy5OT1RfRk9VTkQpLFxyXG4gICAgICApO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KGNvbnRyb2xsZXIudmVyaWZ5Q3JlZGVudGlhbCh1c2VyLCBjcmVkZW50aWFsSWQpKS5yZWplY3RzLnRvVGhyb3coSHR0cEV4Y2VwdGlvbik7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7Il0sInZlcnNpb24iOjN9