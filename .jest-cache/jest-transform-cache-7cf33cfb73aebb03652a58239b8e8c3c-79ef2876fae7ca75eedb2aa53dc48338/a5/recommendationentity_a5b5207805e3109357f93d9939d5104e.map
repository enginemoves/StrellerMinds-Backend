{"file":"C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\recommendation\\entities\\recommendation.entity.ts","mappings":"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","names":[],"sources":["C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\recommendation\\entities\\recommendation.entity.ts"],"sourcesContent":["import {\r\n  Entity,\r\n  PrimaryGeneratedColumn,\r\n  Column,\r\n  ManyToOne,\r\n  CreateDateColumn,\r\n  UpdateDateColumn,\r\n  Index,\r\n  JoinColumn,\r\n} from 'typeorm';\r\nimport { User } from '../../users/entities/user.entity';\r\nimport { Course } from '../../courses/entities/course.entity';\r\n\r\nexport enum RecommendationType {\r\n  COURSE = 'course',\r\n  LEARNING_PATH = 'learning_path',\r\n  CONTENT = 'content',\r\n  SKILL_BASED = 'skill_based',\r\n  COLLABORATIVE = 'collaborative',\r\n  CONTENT_BASED = 'content_based',\r\n}\r\n\r\nexport enum RecommendationReason {\r\n  SIMILAR_USERS = 'similar_users',\r\n  SKILL_GAP = 'skill_gap',\r\n  LEARNING_HISTORY = 'learning_history',\r\n  TRENDING = 'trending',\r\n  PREREQUISITE = 'prerequisite',\r\n  CONTINUATION = 'continuation',\r\n  INTEREST_BASED = 'interest_based',\r\n  DIFFICULTY_MATCH = 'difficulty_match',\r\n}\r\n\r\nexport enum RecommendationStatus {\r\n  ACTIVE = 'active',\r\n  DISMISSED = 'dismissed',\r\n  COMPLETED = 'completed',\r\n  EXPIRED = 'expired',\r\n}\r\n\r\n@Entity('recommendations')\r\n@Index(['userId', 'status', 'createdAt'])\r\n@Index(['recommendationType', 'status'])\r\n@Index(['confidenceScore'])\r\nexport class Recommendation {\r\n  @PrimaryGeneratedColumn('uuid')\r\n  id: string;\r\n\r\n  @Column('uuid')\r\n  @Index()\r\n  userId: string;\r\n\r\n  @ManyToOne(() => User, { onDelete: 'CASCADE' })\r\n  @JoinColumn({ name: 'userId' })\r\n  user: User;\r\n\r\n  @Column('uuid', { nullable: true })\r\n  courseId?: string;\r\n\r\n  @ManyToOne(() => Course, { nullable: true, onDelete: 'CASCADE' })\r\n  @JoinColumn({ name: 'courseId' })\r\n  course?: Course;\r\n\r\n  @Column({\r\n    type: 'enum',\r\n    enum: RecommendationType,\r\n    default: RecommendationType.COURSE,\r\n  })\r\n  recommendationType: RecommendationType;\r\n\r\n  @Column({\r\n    type: 'enum',\r\n    enum: RecommendationReason,\r\n    default: RecommendationReason.LEARNING_HISTORY,\r\n  })\r\n  reason: RecommendationReason;\r\n\r\n  @Column({\r\n    type: 'enum',\r\n    enum: RecommendationStatus,\r\n    default: RecommendationStatus.ACTIVE,\r\n  })\r\n  status: RecommendationStatus;\r\n\r\n  @Column('decimal', { precision: 5, scale: 4, default: 0.5 })\r\n  confidenceScore: number;\r\n\r\n  @Column('decimal', { precision: 5, scale: 4, default: 0.0 })\r\n  relevanceScore: number;\r\n\r\n  @Column('int', { default: 0 })\r\n  priority: number;\r\n\r\n  @Column('text', { nullable: true })\r\n  explanation?: string;\r\n\r\n  @Column('jsonb', { nullable: true })\r\n  metadata?: {\r\n    algorithmUsed?: string;\r\n    features?: Record<string, any>;\r\n    similarUsers?: string[];\r\n    tags?: string[];\r\n    difficulty?: string;\r\n    estimatedDuration?: number;\r\n    prerequisites?: string[];\r\n    learningObjectives?: string[];\r\n  };\r\n\r\n  @Column('jsonb', { nullable: true })\r\n  mlFeatures?: {\r\n    userEmbedding?: number[];\r\n    contentEmbedding?: number[];\r\n    interactionHistory?: Record<string, any>;\r\n    skillVector?: number[];\r\n    preferenceVector?: number[];\r\n  };\r\n\r\n  @Column('timestamp', { nullable: true })\r\n  expiresAt?: Date;\r\n\r\n  @Column('timestamp', { nullable: true })\r\n  viewedAt?: Date;\r\n\r\n  @Column('timestamp', { nullable: true })\r\n  clickedAt?: Date;\r\n\r\n  @Column('timestamp', { nullable: true })\r\n  dismissedAt?: Date;\r\n\r\n  @CreateDateColumn()\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n\r\n  // Virtual properties\r\n  get isExpired(): boolean {\r\n    return this.expiresAt ? new Date() > this.expiresAt : false;\r\n  }\r\n\r\n  get isViewed(): boolean {\r\n    return !!this.viewedAt;\r\n  }\r\n\r\n  get isClicked(): boolean {\r\n    return !!this.clickedAt;\r\n  }\r\n\r\n  get isDismissed(): boolean {\r\n    return this.status === RecommendationStatus.DISMISSED;\r\n  }\r\n\r\n  get ageInDays(): number {\r\n    return Math.floor(\r\n      (Date.now() - this.createdAt.getTime()) / (1000 * 60 * 60 * 24),\r\n    );\r\n  }\r\n}\r\n"],"version":3}