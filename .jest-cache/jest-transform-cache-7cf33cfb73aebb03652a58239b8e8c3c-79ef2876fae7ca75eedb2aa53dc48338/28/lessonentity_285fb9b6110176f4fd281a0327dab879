127e51abd44912c5524022da6562fc8c
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", { value: true });
exports.Lesson = void 0;
/* eslint-disable prettier/prettier */
const course_entity_1 = require("src/courses/entities/course.entity");
const course_module_entity_1 = require("../../courses/entities/course-module.entity");
const user_progress_entity_1 = require("../../users/entities/user-progress.entity");
const typeorm_1 = require("typeorm");
const assignment_entity_1 = require("src/assignment/entities/assignment.entity");
const lesson_type_enum_1 = require("src/modules/lesson/enums/lesson-type.enum");
const swagger_1 = require("@nestjs/swagger");
/**
 * Entity representing a lesson within a course module.
 */
let Lesson = class Lesson {
};
exports.Lesson = Lesson;
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Unique lesson ID', example: 'uuid-lesson' }),
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Lesson.prototype, "id", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Lesson title', example: 'Introduction to Algebra' }),
    (0, typeorm_1.Column)({ length: 255 }),
    __metadata("design:type", String)
], Lesson.prototype, "title", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Lesson content', example: '<p>Welcome to Algebra!</p>' }),
    (0, typeorm_1.Column)({ type: 'text' }),
    __metadata("design:type", String)
], Lesson.prototype, "content", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Lesson type', enum: lesson_type_enum_1.LessonType, default: lesson_type_enum_1.LessonType.TEXT }),
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: lesson_type_enum_1.LessonType,
        default: lesson_type_enum_1.LessonType.TEXT,
    }),
    __metadata("design:type", typeof (_a = typeof lesson_type_enum_1.LessonType !== "undefined" && lesson_type_enum_1.LessonType) === "function" ? _a : Object)
], Lesson.prototype, "type", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Video URL', required: false }),
    (0, typeorm_1.Column)({ nullable: true }),
    __metadata("design:type", String)
], Lesson.prototype, "videoUrl", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Order of the lesson within the module', example: 1 }),
    (0, typeorm_1.Column)(),
    __metadata("design:type", Number)
], Lesson.prototype, "order", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Duration in minutes', example: 30 }),
    (0, typeorm_1.Column)({ default: 0 }),
    __metadata("design:type", Number)
], Lesson.prototype, "durationInMinutes", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Creation date' }),
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], Lesson.prototype, "createdAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Last update date' }),
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], Lesson.prototype, "updatedAt", void 0);
__decorate([
    (0, swagger_1.ApiProperty)({ description: 'Module this lesson belongs to', type: () => course_module_entity_1.CourseModule }),
    (0, typeorm_1.ManyToOne)(() => course_module_entity_1.CourseModule, (module) => module.lessons, {
        nullable: false,
        onDelete: 'CASCADE',
    }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", typeof (_d = typeof course_module_entity_1.CourseModule !== "undefined" && course_module_entity_1.CourseModule) === "function" ? _d : Object)
], Lesson.prototype, "module", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => user_progress_entity_1.UserProgress, (progress) => progress.lesson),
    __metadata("design:type", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], Lesson.prototype, "userProgress", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => course_entity_1.Course, (course) => course.lessons, { onDelete: 'CASCADE' }),
    __metadata("design:type", typeof (_f = typeof course_entity_1.Course !== "undefined" && course_entity_1.Course) === "function" ? _f : Object)
], Lesson.prototype, "course", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => assignment_entity_1.Assignment, (assignment) => assignment.lesson),
    __metadata("design:type", Array)
], Lesson.prototype, "assignments", void 0);
exports.Lesson = Lesson = __decorate([
    (0, typeorm_1.Entity)('lessons')
], Lesson);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxvam9zZXBoXFxEb2N1bWVudHNcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFxsZXNzb25cXGVudGl0eVxcbGVzc29uLmVudGl0eS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEsc0NBQXNDO0FBQ3RDLHNFQUE0RDtBQUM1RCxzRkFBMkU7QUFDM0Usb0ZBQXlFO0FBQ3pFLHFDQVNpQjtBQUNqQixpRkFBdUU7QUFDdkUsZ0ZBQXVFO0FBQ3ZFLDZDQUE4QztBQUU5Qzs7R0FFRztBQUVJLElBQU0sTUFBTSxHQUFaLE1BQU0sTUFBTTtDQW9FbEIsQ0FBQTtBQXBFWSx3QkFBTTtBQUlqQjtJQUZDLElBQUEscUJBQVcsRUFBQyxFQUFFLFdBQVcsRUFBRSxrQkFBa0IsRUFBRSxPQUFPLEVBQUUsYUFBYSxFQUFFLENBQUM7SUFDeEUsSUFBQSxnQ0FBc0IsRUFBQyxNQUFNLENBQUM7O2tDQUNwQjtBQUtYO0lBRkMsSUFBQSxxQkFBVyxFQUFDLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsQ0FBQztJQUNoRixJQUFBLGdCQUFNLEVBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUM7O3FDQUNWO0FBS2Q7SUFGQyxJQUFBLHFCQUFXLEVBQUMsRUFBRSxXQUFXLEVBQUUsZ0JBQWdCLEVBQUUsT0FBTyxFQUFFLDRCQUE0QixFQUFFLENBQUM7SUFDckYsSUFBQSxnQkFBTSxFQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDOzt1Q0FDVDtBQVNoQjtJQU5DLElBQUEscUJBQVcsRUFBQyxFQUFFLFdBQVcsRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLDZCQUFVLEVBQUUsT0FBTyxFQUFFLDZCQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDdkYsSUFBQSxnQkFBTSxFQUFDO1FBQ04sSUFBSSxFQUFFLE1BQU07UUFDWixJQUFJLEVBQUUsNkJBQVU7UUFDaEIsT0FBTyxFQUFFLDZCQUFVLENBQUMsSUFBSTtLQUN6QixDQUFDO2tEQUNJLDZCQUFVLG9CQUFWLDZCQUFVO29DQUFDO0FBS2pCO0lBRkMsSUFBQSxxQkFBVyxFQUFDLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLENBQUM7SUFDMUQsSUFBQSxnQkFBTSxFQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDOzt3Q0FDVjtBQUtqQjtJQUZDLElBQUEscUJBQVcsRUFBQyxFQUFFLFdBQVcsRUFBRSx1Q0FBdUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDakYsSUFBQSxnQkFBTSxHQUFFOztxQ0FDSztBQUtkO0lBRkMsSUFBQSxxQkFBVyxFQUFDLEVBQUUsV0FBVyxFQUFFLHFCQUFxQixFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNoRSxJQUFBLGdCQUFNLEVBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUM7O2lEQUNHO0FBSzFCO0lBRkMsSUFBQSxxQkFBVyxFQUFDLEVBQUUsV0FBVyxFQUFFLGVBQWUsRUFBRSxDQUFDO0lBQzdDLElBQUEsMEJBQWdCLEdBQUU7a0RBQ1IsSUFBSSxvQkFBSixJQUFJO3lDQUFDO0FBS2hCO0lBRkMsSUFBQSxxQkFBVyxFQUFDLEVBQUUsV0FBVyxFQUFFLGtCQUFrQixFQUFFLENBQUM7SUFDaEQsSUFBQSwwQkFBZ0IsR0FBRTtrREFDUixJQUFJLG9CQUFKLElBQUk7eUNBQUM7QUFTaEI7SUFOQyxJQUFBLHFCQUFXLEVBQUMsRUFBRSxXQUFXLEVBQUUsK0JBQStCLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLG1DQUFZLEVBQUUsQ0FBQztJQUN2RixJQUFBLG1CQUFTLEVBQUMsR0FBRyxFQUFFLENBQUMsbUNBQVksRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRTtRQUN6RCxRQUFRLEVBQUUsS0FBSztRQUNmLFFBQVEsRUFBRSxTQUFTO0tBQ3BCLENBQUM7SUFDRCxJQUFBLGVBQUssR0FBRTtrREFDQSxtQ0FBWSxvQkFBWixtQ0FBWTtzQ0FBQztBQUlyQjtJQURDLElBQUEsbUJBQVMsRUFBQyxHQUFHLEVBQUUsQ0FBQyxtQ0FBWSxFQUFFLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO2tEQUMvQyxPQUFPLG9CQUFQLE9BQU87NENBQWlCO0FBR3RDO0lBREMsSUFBQSxtQkFBUyxFQUFDLEdBQUcsRUFBRSxDQUFDLHNCQUFNLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLENBQUM7a0RBQ3JFLHNCQUFNLG9CQUFOLHNCQUFNO3NDQUFDO0FBR2Y7SUFEQyxJQUFBLG1CQUFTLEVBQUMsR0FBRyxFQUFFLENBQUMsOEJBQVUsRUFBRSxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQzs7MkNBQ3JDO2lCQW5FZixNQUFNO0lBRGxCLElBQUEsZ0JBQU0sRUFBQyxTQUFTLENBQUM7R0FDTCxNQUFNLENBb0VsQiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXG9qb3NlcGhcXERvY3VtZW50c1xcU3RyZWxsZXJNaW5kcy1CYWNrZW5kXFxzcmNcXGxlc3NvblxcZW50aXR5XFxsZXNzb24uZW50aXR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIHByZXR0aWVyL3ByZXR0aWVyICovXHJcbmltcG9ydCB7IENvdXJzZSB9IGZyb20gJ3NyYy9jb3Vyc2VzL2VudGl0aWVzL2NvdXJzZS5lbnRpdHknO1xyXG5pbXBvcnQgeyBDb3Vyc2VNb2R1bGUgfSBmcm9tICcuLi8uLi9jb3Vyc2VzL2VudGl0aWVzL2NvdXJzZS1tb2R1bGUuZW50aXR5JztcclxuaW1wb3J0IHsgVXNlclByb2dyZXNzIH0gZnJvbSAnLi4vLi4vdXNlcnMvZW50aXRpZXMvdXNlci1wcm9ncmVzcy5lbnRpdHknO1xyXG5pbXBvcnQge1xyXG4gIEVudGl0eSxcclxuICBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uLFxyXG4gIENvbHVtbixcclxuICBNYW55VG9PbmUsXHJcbiAgT25lVG9NYW55LFxyXG4gIEluZGV4LFxyXG4gIENyZWF0ZURhdGVDb2x1bW4sXHJcbiAgVXBkYXRlRGF0ZUNvbHVtbixcclxufSBmcm9tICd0eXBlb3JtJztcclxuaW1wb3J0IHsgQXNzaWdubWVudCB9IGZyb20gJ3NyYy9hc3NpZ25tZW50L2VudGl0aWVzL2Fzc2lnbm1lbnQuZW50aXR5JztcclxuaW1wb3J0IHsgTGVzc29uVHlwZSB9IGZyb20gJ3NyYy9tb2R1bGVzL2xlc3Nvbi9lbnVtcy9sZXNzb24tdHlwZS5lbnVtJztcclxuaW1wb3J0IHsgQXBpUHJvcGVydHkgfSBmcm9tICdAbmVzdGpzL3N3YWdnZXInO1xyXG5cclxuLyoqXHJcbiAqIEVudGl0eSByZXByZXNlbnRpbmcgYSBsZXNzb24gd2l0aGluIGEgY291cnNlIG1vZHVsZS5cclxuICovXHJcbkBFbnRpdHkoJ2xlc3NvbnMnKVxyXG5leHBvcnQgY2xhc3MgTGVzc29uIHtcclxuICAvKiogVW5pcXVlIGxlc3NvbiBJRCAqL1xyXG4gIEBBcGlQcm9wZXJ0eSh7IGRlc2NyaXB0aW9uOiAnVW5pcXVlIGxlc3NvbiBJRCcsIGV4YW1wbGU6ICd1dWlkLWxlc3NvbicgfSlcclxuICBAUHJpbWFyeUdlbmVyYXRlZENvbHVtbigndXVpZCcpXHJcbiAgaWQ6IHN0cmluZztcclxuXHJcbiAgLyoqIExlc3NvbiB0aXRsZSAqL1xyXG4gIEBBcGlQcm9wZXJ0eSh7IGRlc2NyaXB0aW9uOiAnTGVzc29uIHRpdGxlJywgZXhhbXBsZTogJ0ludHJvZHVjdGlvbiB0byBBbGdlYnJhJyB9KVxyXG4gIEBDb2x1bW4oeyBsZW5ndGg6IDI1NSB9KVxyXG4gIHRpdGxlOiBzdHJpbmc7XHJcblxyXG4gIC8qKiBMZXNzb24gY29udGVudCAodGV4dCwgSFRNTCwgZXRjLikgKi9cclxuICBAQXBpUHJvcGVydHkoeyBkZXNjcmlwdGlvbjogJ0xlc3NvbiBjb250ZW50JywgZXhhbXBsZTogJzxwPldlbGNvbWUgdG8gQWxnZWJyYSE8L3A+JyB9KVxyXG4gIEBDb2x1bW4oeyB0eXBlOiAndGV4dCcgfSlcclxuICBjb250ZW50OiBzdHJpbmc7XHJcblxyXG4gIC8qKiBMZXNzb24gdHlwZSAodGV4dCwgdmlkZW8sIHF1aXosIGV0Yy4pICovXHJcbiAgQEFwaVByb3BlcnR5KHsgZGVzY3JpcHRpb246ICdMZXNzb24gdHlwZScsIGVudW06IExlc3NvblR5cGUsIGRlZmF1bHQ6IExlc3NvblR5cGUuVEVYVCB9KVxyXG4gIEBDb2x1bW4oe1xyXG4gICAgdHlwZTogJ2VudW0nLFxyXG4gICAgZW51bTogTGVzc29uVHlwZSxcclxuICAgIGRlZmF1bHQ6IExlc3NvblR5cGUuVEVYVCxcclxuICB9KVxyXG4gIHR5cGU6IExlc3NvblR5cGU7XHJcblxyXG4gIC8qKiBWaWRlbyBVUkwgKGlmIGFwcGxpY2FibGUpICovXHJcbiAgQEFwaVByb3BlcnR5KHsgZGVzY3JpcHRpb246ICdWaWRlbyBVUkwnLCByZXF1aXJlZDogZmFsc2UgfSlcclxuICBAQ29sdW1uKHsgbnVsbGFibGU6IHRydWUgfSlcclxuICB2aWRlb1VybDogc3RyaW5nO1xyXG5cclxuICAvKiogT3JkZXIgb2YgdGhlIGxlc3NvbiB3aXRoaW4gdGhlIG1vZHVsZSAqL1xyXG4gIEBBcGlQcm9wZXJ0eSh7IGRlc2NyaXB0aW9uOiAnT3JkZXIgb2YgdGhlIGxlc3NvbiB3aXRoaW4gdGhlIG1vZHVsZScsIGV4YW1wbGU6IDEgfSlcclxuICBAQ29sdW1uKClcclxuICBvcmRlcjogbnVtYmVyO1xyXG5cclxuICAvKiogRHVyYXRpb24gb2YgdGhlIGxlc3NvbiBpbiBtaW51dGVzICovXHJcbiAgQEFwaVByb3BlcnR5KHsgZGVzY3JpcHRpb246ICdEdXJhdGlvbiBpbiBtaW51dGVzJywgZXhhbXBsZTogMzAgfSlcclxuICBAQ29sdW1uKHsgZGVmYXVsdDogMCB9KVxyXG4gIGR1cmF0aW9uSW5NaW51dGVzOiBudW1iZXI7XHJcblxyXG4gIC8qKiBEYXRlIGxlc3NvbiB3YXMgY3JlYXRlZCAqL1xyXG4gIEBBcGlQcm9wZXJ0eSh7IGRlc2NyaXB0aW9uOiAnQ3JlYXRpb24gZGF0ZScgfSlcclxuICBAQ3JlYXRlRGF0ZUNvbHVtbigpXHJcbiAgY3JlYXRlZEF0OiBEYXRlO1xyXG5cclxuICAvKiogRGF0ZSBsZXNzb24gd2FzIGxhc3QgdXBkYXRlZCAqL1xyXG4gIEBBcGlQcm9wZXJ0eSh7IGRlc2NyaXB0aW9uOiAnTGFzdCB1cGRhdGUgZGF0ZScgfSlcclxuICBAVXBkYXRlRGF0ZUNvbHVtbigpXHJcbiAgdXBkYXRlZEF0OiBEYXRlO1xyXG5cclxuICAvKiogTW9kdWxlIHRoaXMgbGVzc29uIGJlbG9uZ3MgdG8gKi9cclxuICBAQXBpUHJvcGVydHkoeyBkZXNjcmlwdGlvbjogJ01vZHVsZSB0aGlzIGxlc3NvbiBiZWxvbmdzIHRvJywgdHlwZTogKCkgPT4gQ291cnNlTW9kdWxlIH0pXHJcbiAgQE1hbnlUb09uZSgoKSA9PiBDb3Vyc2VNb2R1bGUsIChtb2R1bGUpID0+IG1vZHVsZS5sZXNzb25zLCB7XHJcbiAgICBudWxsYWJsZTogZmFsc2UsXHJcbiAgICBvbkRlbGV0ZTogJ0NBU0NBREUnLFxyXG4gIH0pXHJcbiAgQEluZGV4KClcclxuICBtb2R1bGU6IENvdXJzZU1vZHVsZTtcclxuXHJcbiAgLy8gT25lLXRvLU1hbnkgcmVsYXRpb25zaGlwXHJcbiAgQE9uZVRvTWFueSgoKSA9PiBVc2VyUHJvZ3Jlc3MsIChwcm9ncmVzcykgPT4gcHJvZ3Jlc3MubGVzc29uKVxyXG4gIHVzZXJQcm9ncmVzczogUHJvbWlzZTxVc2VyUHJvZ3Jlc3NbXT47XHJcblxyXG4gIEBNYW55VG9PbmUoKCkgPT4gQ291cnNlLCAoY291cnNlKSA9PiBjb3Vyc2UubGVzc29ucywgeyBvbkRlbGV0ZTogJ0NBU0NBREUnIH0pXHJcbiAgY291cnNlOiBDb3Vyc2U7XHJcblxyXG4gIEBPbmVUb01hbnkoKCkgPT4gQXNzaWdubWVudCwgKGFzc2lnbm1lbnQpID0+IGFzc2lnbm1lbnQubGVzc29uKVxyXG4gIGFzc2lnbm1lbnRzOiBBc3NpZ25tZW50W107XHJcbn1cclxuIl0sInZlcnNpb24iOjN9