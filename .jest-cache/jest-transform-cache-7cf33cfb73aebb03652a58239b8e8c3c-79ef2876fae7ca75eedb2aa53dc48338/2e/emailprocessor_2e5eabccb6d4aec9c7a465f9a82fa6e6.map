{"file":"C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\email\\email.processor.ts","mappings":";;;;;;;;;;;;;;AAAA,uCAAkD;AAClD,2CAAwC;AACxC,+BAA2B;AAC3B,mDAA6D;AAGtD,IAAM,cAAc,sBAApB,MAAM,cAAc;IAGzB,YAA6B,YAA0B;QAA1B,iBAAY,GAAZ,YAAY,CAAc;QAFtC,WAAM,GAAG,IAAI,eAAM,CAAC,gBAAc,CAAC,IAAI,CAAC,CAAC;IAEA,CAAC;IAGrD,AAAN,KAAK,CAAC,eAAe,CAAC,GAAsB;QAC1C,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,wBAAwB,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QACpD,IAAI,CAAC;YACH,MAAM,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAChD,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,aAAa,GAAG,CAAC,EAAE,yBAAyB,CAAC,CAAC;QAClE,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,IAAI,CAAC,MAAM,CAAC,KAAK,CACf,+BAA+B,GAAG,CAAC,EAAE,KAAK,KAAK,CAAC,OAAO,EAAE,EACzD,KAAK,CAAC,KAAK,CACZ,CAAC;YACF,MAAM,KAAK,CAAC,CAAC,4CAA4C;QAC3D,CAAC;IACH,CAAC;CACF,CAAA;AAnBY,wCAAc;AAMnB;IADL,IAAA,cAAO,EAAC,MAAM,CAAC;;yDACW,UAAG,oBAAH,UAAG;;qDAY7B;yBAlBU,cAAc;IAD1B,IAAA,gBAAS,EAAC,OAAO,CAAC;yDAI0B,4BAAY,oBAAZ,4BAAY;GAH5C,cAAc,CAmB1B","names":[],"sources":["C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\email\\email.processor.ts"],"sourcesContent":["import { Process, Processor } from '@nestjs/bull';\r\nimport { Logger } from '@nestjs/common';\r\nimport { Job } from 'bull';\r\nimport { EmailService, EmailOptions } from './email.service';\r\n\r\n@Processor('email')\r\nexport class EmailProcessor {\r\n  private readonly logger = new Logger(EmailProcessor.name);\r\n\r\n  constructor(private readonly emailService: EmailService) {}\r\n\r\n  @Process('send')\r\n  async handleSendEmail(job: Job<EmailOptions>) {\r\n    this.logger.debug(`Processing email job ${job.id}`);\r\n    try {\r\n      await this.emailService.sendImmediate(job.data);\r\n      this.logger.debug(`Email job ${job.id} completed successfully`);\r\n    } catch (error) {\r\n      this.logger.error(\r\n        `Failed to process email job ${job.id}: ${error.message}`,\r\n        error.stack,\r\n      );\r\n      throw error; // Rethrow to trigger Bull's retry mechanism\r\n    }\r\n  }\r\n}\r\n"],"version":3}